<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Watch Wellness</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üè•</text></svg>">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1/dist/chartjs-plugin-annotation.min.js"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #121212; color: #e0e0e0; margin: 0; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; }
        h1, h2, h3 { color: #ffffff; font-weight: 500; }
        .metric-wrapper { margin-bottom: 20px; }

        .summary-item {
            background-color: #1e1e1e;
            padding: 20px 25px 30px;
            border-radius: 12px;
            border: 1px solid #333;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;

            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 190px;
        }

        .summary-item:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4); }

        .summary-item h2 {
            margin: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .score-scale-container {
            position: relative;
            height: 80px;
            margin: 0;
            flex-shrink: 0;
        }

        .scale-wrapper {
            position: relative;
            height: 100%;
            margin: 0 45px;
        }

        .score-scale-bar { position: absolute; top: 50%; transform: translateY(-50%); width: 100%; height: 10px; border-radius: 5px; }
        .scale-pointer { position: absolute; transform: translateX(-50%); width: 0; height: 0; border-left: 8px solid transparent; border-right: 8px solid transparent; }

        .pointer-avg { top: 63px; border-top: 12px solid; }
        .pointer-last { top: 5px; border-bottom: 12px solid; }

        .pointer-label {
            font-size: 0.8em;
            color: #ccc;
            background-color: rgba(0,0,0,0.8);
            padding: 3px 6px;
            border-radius: 4px;
            white-space: nowrap;
        }

        .pointer-avg .pointer-label { position: absolute; bottom: 14px; transform: translateX(-50%); }
        .pointer-last .pointer-label { position: absolute; top: 14px; transform: translateX(-50%); }

        .details-container { display: none; flex-direction: column; gap: 30px; margin-top: 20px; }
        .details-container.visible { display: flex; }
        .chart-wrapper { background-color: #1e1e1e; padding: 20px; border-radius: 12px; border: 1px solid #333; }
        .chart-subtitle { margin-top: -10px; margin-bottom: 20px; font-size: 0.9em; color: #999; }
        canvas { max-width: 100% !important; height: auto !important; }
        .vo2-chart-container { position: relative; }
        .vo2-gradient-bg { position: absolute; top: 0; left: 0; right: 0; bottom: 0; pointer-events: none; border-radius: 8px; z-index: 1; }
        #vo2-max-chart { position: relative; z-index: 2; }

        /* Tab functionality */
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .nav-button.active { background-color: #007bff !important; }

        /* Group styling for new unified report */
        .metric-group {
            margin-bottom: 40px;
            border: 1px solid #333;
            border-radius: 12px;
            padding: 20px;
            background-color: #1a1a1a;
        }

        .group-header {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #333;
            position: relative;
        }

        .group-header h2 {
            margin: 0;
            font-size: 1.5em;
        }

        .group-ticker {
            display: none;
        }

        .metric-group .metric-wrapper {
            margin-bottom: 15px;
        }

        .metric-group .metric-wrapper:last-child {
            margin-bottom: 0;
        }

        /* Expandable group functionality */
        .group-header {
            cursor: pointer;
            user-select: none;
            transition: background-color 0.2s ease;
        }

        .group-header:hover {
            background-color: #2a2a2a;
        }

        .expand-arrow {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2em;
            transition: transform 0.3s ease;
        }

        .group-content {
            overflow: hidden;
            transition: max-height 0.3s ease, opacity 0.3s ease;
        }

        .group-content.collapsed {
            max-height: 0;
            opacity: 0;
        }

        .group-content.expanded {
            max-height: 2000px;
            opacity: 1;
        }

        .group-header.expanded .expand-arrow {
            transform: rotate(180deg);
        }

        /* Gradient scale styling */
        .gradient-scale {
            background: linear-gradient(to right, #FF0000 0%, #FF4040 12.5%, #FF8080 25%, #FFBFBF 37.5%, #FFFFFF 50%, #D0FFD0 62.5%, #A1FFA1 75%, #72FF72 87.5%, #43FF43 100%);
            height: 8px;
            border-radius: 4px;
            position: relative;
        }

        .gradient-scale::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            width: 2px;
            height: 100%;
            background-color: #ffffff;
            transform: translateX(-50%);
        }

        /* Category summary styling */
        .category-summary {
            padding: 20px;
            background-color: #1a1a1a;
            border-radius: 8px;
            margin: 10px 0;
        }

        .category-summary .score-scale-container {
            margin: 0;
        }

        /* Component sliders styling */
        .component-sliders {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            padding: 15px;
            background-color: #1a1a1a;
            border-radius: 8px;
        }

        /* Component sliders grid - 2 rows of 2 columns */
        .component-sliders-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(2, auto);
            gap: 20px;
        }

        .component-slider {
            flex: 1;
        }

        .component-slider h4 {
            margin: 0 0 10px 0;
            font-size: 0.9em;
            color: #ccc;
        }

        .component-slider .score-scale-container {
            margin: 0;
        }
    </style>
</head>
<body>
    <div class="container" id="main-container">
        
<style>
    .report-title {
        text-align: center;
        font-size: 4.25em;
        font-weight: 600;
        letter-spacing: 0.04em;
        margin: 0 0 28px;
        padding-top: 24px;
    }
    .scale-marker-group {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
    }
    .scale-marker {
        position: absolute;
        top: 32px;
        transform: translate(-50%, -50%);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 28px;
        height: 28px;
        border-radius: 999px;
        pointer-events: auto;
        cursor: pointer;
        font-weight: 700;
        font-size: 0.7rem;
        border: 2px solid rgba(255, 255, 255, 0.85);
        box-shadow: 0 8px 22px rgba(0, 0, 0, 0.45);
        background-color: #ffffff;
        color: #111111;
        text-transform: uppercase;
        letter-spacing: 0.04em;
    }
    .scale-marker.hidden {
        display: none;
    }
    .marker-recent {
        z-index: 1;
    }
    .marker-healthspan {
        z-index: 2;
        width: 38px;
        height: 38px;
        font-size: 0.88rem;
    }
    .scale-marker-tooltip {
        position: fixed;
        background-color: rgba(17, 17, 17, 0.92);
        color: #ffffff;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.75rem;
        line-height: 1.2;
        pointer-events: none;
        opacity: 0;
        transform: translate(-50%, -8px);
        transition: opacity 0.1s ease-in-out;
        z-index: 9999;
        white-space: nowrap;
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.35);
    }
    .scale-marker-tooltip.visible {
        opacity: 1;
    }
</style>
<h1 class="report-title">Watch Wellness</h1>

<div id="master-score-overview" class="master-score-overview">
    <div class="score-scale-container">
            <div class="scale-wrapper">
                <div class="score-scale-bar gradient-scale"></div>
                <div class="scale-marker-group">
                    <div id="master-marker-recent" class="scale-marker marker-recent" data-label="PoA">PoA</div>
                    <div id="master-marker-healthspan" class="scale-marker marker-healthspan" data-label="HS">HS</div>
            </div>
        </div>
    </div>
</div>

<!-- Navigation Buttons -->
<div class="navigation-container" style="margin-bottom: 30px; text-align: center;">
    <div class="nav-buttons" style="display: inline-flex; gap: 10px; background-color: #1e1e1e; padding: 10px; border-radius: 8px; border: 1px solid #333;">
        <a href="#" id="daily-controls-nav" class="nav-button active" style="padding: 8px 16px; background-color: #007bff; color: #fff; text-decoration: none; border-radius: 4px; transition: background-color 0.2s;">Daily Controls</a>
        <a href="#" id="healthspan-nav" class="nav-button" style="padding: 8px 16px; background-color: #333; color: #fff; text-decoration: none; border-radius: 4px; transition: background-color 0.2s;">Healthspan</a>
    </div>
</div>

<!-- Tab Content Container -->
<div id="tab-content">
    <!-- Daily Controls Tab -->
    <div id="daily-controls-content" class="tab-content active">
        <!-- Sleep Group -->
        <div id="daily-controls-sleep-group" class="metric-group daily-controls-group" data-category="sleep">
            <div class="group-header" onclick="toggleGroup('sleep-group')">
                <h2>Sleep üò¥</h2>
                <div class="group-ticker">
                    <span id="sleep-group-ticker">0</span>
                </div>
                <div class="expand-arrow">‚ñº</div>
            </div>

            <!-- Single sliding scale for Sleep category -->
            <div class="category-summary">
                <div class="score-scale-container">
                    <div class="scale-wrapper">
                        <div class="score-scale-bar gradient-scale"></div>
                        <div class="scale-marker-group">
                            <div id="sleep-category-marker-recent" class="scale-marker marker-recent" data-label="PoA">PoA</div>
                            <div id="sleep-category-marker-healthspan" class="scale-marker marker-healthspan" data-label="HS">HS</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="sleep-group-content" class="group-content collapsed">
                <div class="component-sliders">
                    <div class="component-slider">
                        <h4>Consistency</h4>
                        <div class="score-scale-container">
                            <div class="scale-wrapper">
                                <div class="score-scale-bar gradient-scale"></div>
                                <div class="scale-marker-group">
                                    <div id="daily-sleep-consistency-marker-recent" class="scale-marker marker-recent" data-label="PoA">PoA</div>
                                    <div id="daily-sleep-consistency-marker-healthspan" class="scale-marker marker-healthspan" data-label="HS">HS</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="component-slider">
                        <h4>Duration</h4>
                        <div class="score-scale-container">
                            <div class="scale-wrapper">
                                <div class="score-scale-bar gradient-scale"></div>
                                <div class="scale-marker-group">
                                    <div id="daily-sleep-duration-marker-recent" class="scale-marker marker-recent" data-label="PoA">PoA</div>
                                    <div id="daily-sleep-duration-marker-healthspan" class="scale-marker marker-healthspan" data-label="HS">HS</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="metric-wrapper">
                    <div class="chart-wrapper">
                        <h4>Sleep Windows</h4>
                        <p class="chart-subtitle">Sleep periods showing time in bed. Color indicates sleep consistency.</p>
                        <div style="height: 300px; position: relative;">
                            <canvas id="sleep-windows-chart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="metric-wrapper">
                    <div class="chart-wrapper">
                        <h4>Sleep Duration</h4>
                        <p class="chart-subtitle">Total hours slept each day.</p>
                        <div style="height: 300px; position: relative;">
                            <canvas id="sleep-duration-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Aerobic Group -->
        <div id="daily-controls-aerobic-group" class="metric-group daily-controls-group" data-category="aerobic">
            <div class="group-header" onclick="toggleGroup('aerobic-group')">
                <h2>Aerobic üèÉ</h2>
                <div class="group-ticker">
                    <span id="aerobic-group-ticker">0</span>
                </div>
                <div class="expand-arrow">‚ñº</div>
            </div>

            <!-- Single sliding scale for Aerobic category -->
            <div class="category-summary">
                <div class="score-scale-container">
                    <div class="scale-wrapper">
                        <div class="score-scale-bar gradient-scale"></div>
                        <div class="scale-marker-group">
                            <div id="aerobic-category-marker-recent" class="scale-marker marker-recent" data-label="PoA">PoA</div>
                            <div id="aerobic-category-marker-healthspan" class="scale-marker marker-healthspan" data-label="HS">HS</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="aerobic-group-content" class="group-content collapsed">
                <div class="component-sliders">
                    <div class="component-slider">
                        <h4>Activity Time</h4>
                        <div class="score-scale-container">
                            <div class="scale-wrapper">
                                <div class="score-scale-bar gradient-scale"></div>
                                <div class="scale-marker-group">
                                    <div id="daily-aerobic-activity-marker-recent" class="scale-marker marker-recent" data-label="PoA">PoA</div>
                                    <div id="daily-aerobic-activity-marker-healthspan" class="scale-marker marker-healthspan" data-label="HS">HS</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="component-slider">
                        <h4>Steps</h4>
                        <div class="score-scale-container">
                            <div class="scale-wrapper">
                                <div class="score-scale-bar gradient-scale gradient-steps"></div>
                                <div class="scale-marker-group">
                                    <div id="daily-steps-marker-recent" class="scale-marker marker-recent" data-label="PoA">PoA</div>
                                    <div id="daily-steps-marker-healthspan" class="scale-marker marker-healthspan" data-label="HS">HS</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="metric-wrapper">
                    <div class="chart-wrapper">
                        <h4>Daily Steps</h4>
                        <p class="chart-subtitle">Daily steps. Color indicates health risk based on steps.</p>
                        <div style="height: 300px; position: relative;">
                            <canvas id="steps-chart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="metric-wrapper">
                    <div class="chart-wrapper">
                        <h4>Activity Time Distribution</h4>
                        <p class="chart-subtitle">Time spent in moderate (MPA) and vigorous (VPA) physical activity.</p>
                        <div style="height: 300px; position: relative;">
                            <canvas id="heart-rate-activity-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Anaerobic Group -->
        <div id="daily-controls-anaerobic-group" class="metric-group daily-controls-group" data-category="anaerobic">
            <div class="group-header" onclick="toggleGroup('anaerobic-group')">
                <h2>Anaerobic üí™</h2>
                <div class="group-ticker">
                    <span id="anaerobic-group-ticker">0</span>
                </div>
                <div class="expand-arrow">‚ñº</div>
            </div>

            <!-- Single sliding scale for Anaerobic category -->
            <div class="category-summary">
                <div class="score-scale-container">
                    <div class="scale-wrapper">
                        <div class="score-scale-bar gradient-scale"></div>
                        <div class="scale-marker-group">
                            <div id="anaerobic-category-marker-recent" class="scale-marker marker-recent" data-label="PoA">PoA</div>
                            <div id="anaerobic-category-marker-healthspan" class="scale-marker marker-healthspan" data-label="HS">HS</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="anaerobic-group-content" class="group-content collapsed">
                <div class="component-sliders">
                    <div class="component-slider" style="max-width: 50%; margin: 0 auto;">
                        <h4>Strength Time</h4>
                        <div class="score-scale-container">
                            <div class="scale-wrapper">
                                <div class="score-scale-bar gradient-scale"></div>
                                <div class="scale-marker-group">
                                    <div id="daily-strength-marker-recent" class="scale-marker marker-recent" data-label="PoA">PoA</div>
                                    <div id="daily-strength-marker-healthspan" class="scale-marker marker-healthspan" data-label="HS">HS</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="metric-wrapper">
                    <div class="chart-wrapper">
                        <h4>Strength Training</h4>
                        <p class="chart-subtitle">Daily strength training duration with 7-day rolling sum.</p>
                        <div style="height: 300px; position: relative;">
                            <canvas id="strength-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- HealthSpan Tab -->
    <div id="healthspan-content" class="tab-content">
        <!-- Sleep Group -->
        <div id="healthspan-sleep-group" class="metric-group healthspan-group" data-category="sleep">
            <div class="group-header" onclick="toggleGroup('healthspan-sleep-group')">
                <h2>Sleep üò¥</h2>
                <div class="group-ticker">
                    <span id="healthspan-sleep-group-ticker">0</span>
                </div>
                <div class="expand-arrow">‚ñº</div>
            </div>

            <!-- Main sliding scale for Sleep category -->
            <div class="category-summary">
                <div class="score-scale-container">
                    <div class="scale-wrapper">
                        <div class="score-scale-bar gradient-scale"></div>
                        <div class="scale-marker-group">
                            <div id="healthspan-sleep-category-marker-recent" class="scale-marker marker-recent" data-label="PoA">PoA</div>
                            <div id="healthspan-sleep-category-marker-healthspan" class="scale-marker marker-healthspan" data-label="HS">HS</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="healthspan-sleep-group-content" class="group-content collapsed">
                <!-- Individual component sliders when expanded -->
                <div class="component-sliders">
                    <div class="component-slider">
                        <h4>Sleep Window</h4>
                        <div class="score-scale-container">
                            <div class="scale-wrapper">
                                <div class="score-scale-bar gradient-scale"></div>
                                <div class="scale-marker-group">
                                    <div id="healthspan-sleep-window-marker-recent" class="scale-marker marker-recent" data-label="PoA">PoA</div>
                                    <div id="healthspan-sleep-window-marker-healthspan" class="scale-marker marker-healthspan" data-label="HS">HS</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="component-slider">
                        <h4>Sleep Duration</h4>
                        <div class="score-scale-container">
                            <div class="scale-wrapper">
                                <div class="score-scale-bar gradient-scale"></div>
                                <div class="scale-marker-group">
                                    <div id="healthspan-sleep-duration-marker-recent" class="scale-marker marker-recent" data-label="PoA">PoA</div>
                                    <div id="healthspan-sleep-duration-marker-healthspan" class="scale-marker marker-healthspan" data-label="HS">HS</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sleep Window Chart -->
                <div class="metric-wrapper">
                    <div class="chart-wrapper">
                        <h4>Sleep Windows (Weekly)</h4>
                        <p class="chart-subtitle">Weekly sleep periods showing time in bed. Color indicates sleep consistency.</p>
                        <div style="height: 300px; position: relative;">
                            <canvas id="healthspan-sleep-windows-chart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Sleep Duration Chart -->
                <div class="metric-wrapper">
                    <div class="chart-wrapper">
                        <h4>Sleep Duration (Weekly)</h4>
                        <p class="chart-subtitle">Average hours slept per week.</p>
                        <div style="height: 300px; position: relative;">
                            <canvas id="healthspan-sleep-duration-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Aerobic Group -->
        <div id="healthspan-aerobic-group" class="metric-group healthspan-group" data-category="aerobic">
            <div class="group-header" onclick="toggleGroup('healthspan-aerobic-group')">
                <h2>Aerobic üèÉ</h2>
                <div class="group-ticker">
                    <span id="healthspan-aerobic-group-ticker">0</span>
                </div>
                <div class="expand-arrow">‚ñº</div>
            </div>

            <!-- Main sliding scale for Aerobic category -->
            <div class="category-summary">
                <div class="score-scale-container">
                    <div class="scale-wrapper">
                        <div class="score-scale-bar gradient-scale"></div>
                        <div class="scale-marker-group">
                            <div id="healthspan-aerobic-category-marker-recent" class="scale-marker marker-recent" data-label="PoA">PoA</div>
                            <div id="healthspan-aerobic-category-marker-healthspan" class="scale-marker marker-healthspan" data-label="HS">HS</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="healthspan-aerobic-group-content" class="group-content collapsed">
                <!-- Individual component sliders when expanded -->
                <div class="component-sliders component-sliders-grid">
                    <div class="component-slider">
                        <h4>VO2 Max</h4>
                        <div class="score-scale-container">
                            <div class="scale-wrapper">
                                <div class="score-scale-bar gradient-scale"></div>
                                <div class="scale-marker-group">
                                    <div id="healthspan-vo2-marker-healthspan" class="scale-marker marker-healthspan" data-label="HS">HS</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="component-slider">
                        <h4>Resting Heart Rate</h4>
                        <div class="score-scale-container">
                            <div class="scale-wrapper">
                                <div class="score-scale-bar gradient-scale"></div>
                                <div class="scale-marker-group">
                                    <div id="healthspan-rhr-marker-healthspan" class="scale-marker marker-healthspan" data-label="HS">HS</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="component-slider">
                        <h4>Heart Rate Activity</h4>
                        <div class="score-scale-container">
                            <div class="scale-wrapper">
                                <div class="score-scale-bar gradient-scale"></div>
                                <div class="scale-marker-group">
                                    <div id="healthspan-heart-rate-marker-recent" class="scale-marker marker-recent" data-label="PoA">PoA</div>
                                    <div id="healthspan-heart-rate-marker-healthspan" class="scale-marker marker-healthspan" data-label="HS">HS</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="component-slider">
                        <h4>Steps</h4>
                        <div class="score-scale-container">
                            <div class="scale-wrapper">
                                <div class="score-scale-bar gradient-scale gradient-steps"></div>
                                <div class="scale-marker-group">
                                    <div id="healthspan-steps-marker-recent" class="scale-marker marker-recent" data-label="PoA">PoA</div>
                                    <div id="healthspan-steps-marker-healthspan" class="scale-marker marker-healthspan" data-label="HS">HS</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- VO2 Max Chart -->
                <div class="metric-wrapper">
                    <div class="chart-wrapper">
                        <h4>VO2 Max Trend (Weekly)</h4>
                        <p class="chart-subtitle">Weekly VO2 max over time. Higher is better.</p>
                        <div style="height: 300px; position: relative;">
                            <canvas id="healthspan-vo2-chart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Steps Chart -->
                <div class="metric-wrapper">
                    <div class="chart-wrapper">
                        <h4>Weekly Steps</h4>
                        <p class="chart-subtitle">Average daily steps per week.</p>
                        <div style="height: 300px; position: relative;">
                            <canvas id="healthspan-steps-chart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Heart Rate Activity Chart -->
                <div class="metric-wrapper">
                    <div class="chart-wrapper">
                        <h4>Weekly Activity Time</h4>
                        <p class="chart-subtitle">Weekly time spent in moderate and vigorous physical activity.</p>
                        <div style="height: 300px; position: relative;">
                            <canvas id="healthspan-heart-rate-activity-chart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Resting Heart Rate Chart -->
                <div class="metric-wrapper">
                    <div class="chart-wrapper">
                        <h4>Weekly Resting Heart Rate</h4>
                        <p class="chart-subtitle">Average resting heart rate per week.</p>
                        <div style="height: 300px; position: relative;">
                            <canvas id="healthspan-rhr-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Anaerobic Group -->
        <div id="healthspan-anaerobic-group" class="metric-group healthspan-group" data-category="anaerobic">
            <div class="group-header" onclick="toggleGroup('healthspan-anaerobic-group')">
                <h2>Anaerobic üí™</h2>
                <div class="group-ticker">
                    <span id="healthspan-anaerobic-group-ticker">0</span>
                </div>
                <div class="expand-arrow">‚ñº</div>
            </div>

            <!-- Main sliding scale for Anaerobic category -->
            <div class="category-summary">
                <div class="score-scale-container">
                    <div class="scale-wrapper">
                        <div class="score-scale-bar gradient-scale"></div>
                        <div class="scale-marker-group">
                            <div id="healthspan-anaerobic-category-marker-recent" class="scale-marker marker-recent" data-label="PoA">PoA</div>
                            <div id="healthspan-anaerobic-category-marker-healthspan" class="scale-marker marker-healthspan" data-label="HS">HS</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="healthspan-anaerobic-group-content" class="group-content collapsed">
                <!-- Individual component sliders when expanded -->
                <div class="component-sliders">
                    <div class="component-slider">
                        <h4>Strength Training</h4>
                        <div class="score-scale-container">
                            <div class="scale-wrapper">
                                <div class="score-scale-bar gradient-scale"></div>
                                <div class="scale-marker-group">
                            <div id="healthspan-strength-marker-recent" class="scale-marker marker-recent" data-label="PoA">PoA</div>
                                    <div id="healthspan-strength-marker-healthspan" class="scale-marker marker-healthspan" data-label="HS">HS</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="component-slider">
                        <h4>Body Composition</h4>
                        <div class="score-scale-container">
                            <div class="scale-wrapper">
                                <div class="score-scale-bar gradient-scale"></div>
                                <div class="scale-marker-group">
                                    <div id="healthspan-body-comp-marker-healthspan" class="scale-marker marker-healthspan" data-label="HS">HS</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Strength Training Chart -->
                <div class="metric-wrapper">
                    <div class="chart-wrapper">
                        <h4>Weekly Strength Training</h4>
                        <p class="chart-subtitle">Weekly strength training duration.</p>
                        <div style="height: 300px; position: relative;">
                            <canvas id="healthspan-strength-chart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Body Composition Charts -->
                <div class="metric-wrapper">
                    <div class="chart-wrapper">
                        <h4>Fat-Free Mass Index (FFMI)</h4>
                        <p class="chart-subtitle">Weekly FFMI trends.</p>
                        <div style="height: 150px; position: relative;">
                            <canvas id="healthspan-ffmi-chart"></canvas>
                        </div>
                    </div>
                    <div class="chart-wrapper">
                        <h4>Fat Mass Index (FMI)</h4>
                        <p class="chart-subtitle">Weekly FMI trends.</p>
                        <div style="height: 150px; position: relative;">
                            <canvas id="healthspan-fmi-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

    </div>

    <script>
        // --- DATA PLACEHOLDER (To be replaced by Python) ---
        const chartData = {
    "daily-controls": {
        "sleep": {
            "latestScore": 0.9346143852978472,
            "averageScore": -0.05581596197479999,
            "daily": [
                {
                    "label": "Nov 30",
                    "consistencyScore": 1.0962019433882553,
                    "durationScore": 0.9975,
                    "consistencyRescaled": 0.6564216307562312,
                    "durationRescaled": 1.0357142857142851,
                    "consistencyColor": "#e53935",
                    "durationColor": "#f5faf5",
                    "sleepTime": "01:06",
                    "wakeTime": "08:07",
                    "sleepDuration": 7.016666666666667,
                    "timeInBed": 7.283333333333333,
                    "awakeCount": 1,
                    "consistencyScoreFinal": null,
                    "consistencyRescaledFinal": null,
                    "consistencyColorFinal": "#9e9e9e",
                    "durationScoreFinal": null,
                    "durationRescaledFinal": null,
                    "durationColorFinal": "#9e9e9e",
                    "sleepHrScoreFinal": null,
                    "sleepHrRescaledFinal": null,
                    "hasData": true
                },
                {
                    "label": "Nov 29",
                    "consistencyScore": 1.1383174904942965,
                    "durationScore": 0.93,
                    "consistencyRescaled": 0.5060089625203696,
                    "durationRescaled": 2.0,
                    "consistencyColor": "#e53935",
                    "durationColor": "#43a047",
                    "sleepTime": "00:29",
                    "wakeTime": "10:34",
                    "sleepDuration": 10.083333333333334,
                    "timeInBed": 10.133333333333335,
                    "awakeCount": 0,
                    "consistencyScoreFinal": null,
                    "consistencyRescaledFinal": null,
                    "consistencyColorFinal": "#9e9e9e",
                    "durationScoreFinal": null,
                    "durationRescaledFinal": null,
                    "durationColorFinal": "#9e9e9e",
                    "sleepHrScoreFinal": null,
                    "sleepHrRescaledFinal": null,
                    "hasData": true
                },
                {
                    "label": "Nov 28",
                    "consistencyScore": 1.070061258977609,
                    "durationScore": 1.0238584474885846,
                    "consistencyRescaled": 0.7497812179371106,
                    "durationRescaled": 0.7831050228310497,
                    "consistencyColor": "#e53935",
                    "durationColor": "#f2a09e",
                    "sleepTime": "03:06",
                    "wakeTime": "09:47",
                    "sleepDuration": 6.683333333333334,
                    "timeInBed": 6.716666666666667,
                    "awakeCount": 0,
                    "consistencyScoreFinal": null,
                    "consistencyRescaledFinal": null,
                    "consistencyColorFinal": "#9e9e9e",
                    "durationScoreFinal": null,
                    "durationRescaledFinal": null,
                    "durationColorFinal": "#9e9e9e",
                    "sleepHrScoreFinal": null,
                    "sleepHrRescaledFinal": null,
                    "hasData": true
                },
                {
                    "label": "Nov 27",
                    "consistencyScore": 0.9719306540583136,
                    "durationScore": 0.93,
                    "consistencyRescaled": 1.561386918833728,
                    "durationRescaled": 2.0,
                    "consistencyColor": "#95c997",
                    "durationColor": "#43a047",
                    "sleepTime": "23:17",
                    "wakeTime": "08:52",
                    "sleepDuration": 9.583333333333334,
                    "timeInBed": 9.683333333333334,
                    "awakeCount": 0,
                    "consistencyScoreFinal": null,
                    "consistencyRescaledFinal": null,
                    "consistencyColorFinal": "#9e9e9e",
                    "durationScoreFinal": null,
                    "durationRescaledFinal": null,
                    "durationColorFinal": "#9e9e9e",
                    "sleepHrScoreFinal": null,
                    "sleepHrRescaledFinal": null,
                    "hasData": true
                },
                {
                    "label": "Nov 26",
                    "consistencyScore": 0.950776322173702,
                    "durationScore": 0.9421771771771772,
                    "consistencyRescaled": 1.984473556525959,
                    "durationRescaled": 1.8260403260403264,
                    "consistencyColor": "#45a149",
                    "durationColor": "#43a047",
                    "sleepTime": "23:55",
                    "wakeTime": "07:38",
                    "sleepDuration": 7.714722222222222,
                    "timeInBed": 7.764722222222222,
                    "awakeCount": 0,
                    "consistencyScoreFinal": null,
                    "consistencyRescaledFinal": null,
                    "consistencyColorFinal": "#9e9e9e",
                    "durationScoreFinal": null,
                    "durationRescaledFinal": null,
                    "durationColorFinal": "#9e9e9e",
                    "sleepHrScoreFinal": null,
                    "sleepHrRescaledFinal": null,
                    "hasData": true
                },
                {
                    "label": "Nov 25",
                    "consistencyScore": 0.9500181950509461,
                    "durationScore": 0.9456756756756757,
                    "consistencyRescaled": 1.9996360989810773,
                    "durationRescaled": 1.7760617760617765,
                    "consistencyColor": "#43a047",
                    "durationColor": "#43a047",
                    "sleepTime": "00:32",
                    "wakeTime": "08:11",
                    "sleepDuration": 7.65,
                    "timeInBed": 8.066666666666666,
                    "awakeCount": 1,
                    "consistencyScoreFinal": null,
                    "consistencyRescaledFinal": null,
                    "consistencyColorFinal": "#9e9e9e",
                    "durationScoreFinal": null,
                    "durationRescaledFinal": null,
                    "durationColorFinal": "#9e9e9e",
                    "sleepHrScoreFinal": null,
                    "sleepHrRescaledFinal": null,
                    "hasData": true
                },
                {
                    "label": "Nov 24",
                    "consistencyScore": 0.9572962154294031,
                    "durationScore": 1.0604204718417047,
                    "consistencyRescaled": 1.8540756914119367,
                    "durationRescaled": 0.45072298325723015,
                    "consistencyColor": "#5ead61",
                    "durationColor": "#e53935",
                    "sleepTime": "01:54",
                    "wakeTime": "08:05",
                    "sleepDuration": 6.198055555555555,
                    "timeInBed": 6.681388888888889,
                    "awakeCount": 2,
                    "consistencyScoreFinal": null,
                    "consistencyRescaledFinal": null,
                    "consistencyColorFinal": "#9e9e9e",
                    "durationScoreFinal": null,
                    "durationRescaledFinal": null,
                    "durationColorFinal": "#9e9e9e",
                    "sleepHrScoreFinal": null,
                    "sleepHrRescaledFinal": null,
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ],
            "referenceLines": {
                "worst": {
                    "value": 5.54,
                    "color": "#d32f2f"
                },
                "neutral": {
                    "value": 7.0,
                    "color": "#ffffff"
                },
                "best": {
                    "value": 7.94,
                    "color": "#388e3c"
                }
            }
        },
        "steps": {
            "latestScore": 0.0,
            "averageScore": 0.0,
            "daily": [
                {
                    "label": "Nov 30",
                    "dailySteps": 21256,
                    "rollingAvgSteps": 15679,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": null,
                    "hazardRatioRescaledFinal": null,
                    "hasData": true
                },
                {
                    "label": "Nov 29",
                    "dailySteps": 14782,
                    "rollingAvgSteps": 14792,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": null,
                    "hazardRatioRescaledFinal": null,
                    "hasData": true
                },
                {
                    "label": "Nov 28",
                    "dailySteps": 7198,
                    "rollingAvgSteps": 15046,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": null,
                    "hazardRatioRescaledFinal": null,
                    "hasData": true
                },
                {
                    "label": "Nov 27",
                    "dailySteps": 20893,
                    "rollingAvgSteps": 15339,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": null,
                    "hazardRatioRescaledFinal": null,
                    "hasData": true
                },
                {
                    "label": "Nov 26",
                    "dailySteps": 9020,
                    "rollingAvgSteps": 14773,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": null,
                    "hazardRatioRescaledFinal": null,
                    "hasData": true
                },
                {
                    "label": "Nov 25",
                    "dailySteps": 20059,
                    "rollingAvgSteps": 14337,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": null,
                    "hazardRatioRescaledFinal": null,
                    "hasData": true
                },
                {
                    "label": "Nov 24",
                    "dailySteps": 16547,
                    "rollingAvgSteps": 12666,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": null,
                    "hazardRatioRescaledFinal": null,
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ],
            "referenceLines": {
                "worst": {
                    "value": 2000.0,
                    "color": "#d32f2f"
                },
                "neutral": {
                    "value": 8000.0,
                    "color": "#ffffff"
                },
                "best": {
                    "value": 8000.0,
                    "color": "#388e3c"
                }
            }
        },
        "heartRate": {
            "latestScore": 0.0952380952380949,
            "averageScore": 0.022444897289954913,
            "daily": [
                {
                    "label": "Nov 28",
                    "mpaTime": 0.0,
                    "vpaTime": 0.0,
                    "adjVpaTime": 0.0,
                    "rolling7Day": 36.57142857142857,
                    "hazardRatio": 0.9904761904761905,
                    "hazardRatioRescaled": 1.1058201058201056,
                    "restingHR": 51.0,
                    "maxHR": 195.0,
                    "hrReserve": 144.0,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": null,
                    "hazardRatioRescaledFinal": null,
                    "hasData": true
                },
                {
                    "label": "Nov 27",
                    "mpaTime": 46.0,
                    "vpaTime": 8.0,
                    "adjVpaTime": 31.0,
                    "rolling7Day": 36.57142857142857,
                    "hazardRatio": 0.9904761904761905,
                    "hazardRatioRescaled": 1.1058201058201056,
                    "restingHR": 54.0,
                    "maxHR": 195.0,
                    "hrReserve": 141.0,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": null,
                    "hazardRatioRescaledFinal": null,
                    "hasData": true
                },
                {
                    "label": "Nov 26",
                    "mpaTime": 28.0,
                    "vpaTime": 0.0,
                    "adjVpaTime": 14.0,
                    "rolling7Day": 37.142857142857146,
                    "hazardRatio": 0.9897744360902255,
                    "hazardRatioRescaled": 1.113617376775272,
                    "restingHR": 51.0,
                    "maxHR": 195.0,
                    "hrReserve": 144.0,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": null,
                    "hazardRatioRescaledFinal": null,
                    "hasData": true
                },
                {
                    "label": "Nov 25",
                    "mpaTime": 84.0,
                    "vpaTime": 2.0,
                    "adjVpaTime": 44.0,
                    "rolling7Day": 33.42857142857143,
                    "hazardRatio": 0.9957142857142857,
                    "hazardRatioRescaled": 1.0476190476190483,
                    "restingHR": 56.0,
                    "maxHR": 195.0,
                    "hrReserve": 139.0,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": null,
                    "hazardRatioRescaledFinal": null,
                    "hasData": true
                },
                {
                    "label": "Nov 24",
                    "mpaTime": 46.0,
                    "vpaTime": 16.0,
                    "adjVpaTime": 39.0,
                    "rolling7Day": 22.857142857142858,
                    "hazardRatio": 1.0223364485981308,
                    "hazardRatioRescaled": 0.9028850060950835,
                    "restingHR": 47.0,
                    "maxHR": 195.0,
                    "hrReserve": 148.0,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": null,
                    "hazardRatioRescaledFinal": null,
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ],
            "referenceLines": {
                "worst": {
                    "value": 0.0,
                    "color": "#d32f2f"
                },
                "neutral": {
                    "value": 15.428571428571429,
                    "color": "#ffffff"
                },
                "best": {
                    "value": 71.14285714285714,
                    "color": "#388e3c"
                }
            }
        },
        "strength": {
            "latestScore": -0.240640376984127,
            "averageScore": -0.19318987497342732,
            "daily": [
                {
                    "label": "Nov 30",
                    "dailyDuration": 0.0,
                    "weeklySum": 156.3361979166667,
                    "hrScore": 0.9759359623015873,
                    "hrRescaled": 1.6016009424603168,
                    "hrColor": "#a4d1a6",
                    "hrScoreFinal": null,
                    "hrRescaledFinal": null,
                    "hasData": true
                },
                {
                    "label": "Nov 29",
                    "dailyDuration": 0.0,
                    "weeklySum": 156.3361979166667,
                    "hrScore": 0.9759359623015873,
                    "hrRescaled": 1.6016009424603168,
                    "hrColor": "#a4d1a6",
                    "hrScoreFinal": null,
                    "hrRescaledFinal": null,
                    "hasData": true
                },
                {
                    "label": "Nov 28",
                    "dailyDuration": 57.66513264973958,
                    "weeklySum": 156.3361979166667,
                    "hrScore": 0.9759359623015873,
                    "hrRescaled": 1.6016009424603168,
                    "hrColor": "#a4d1a6",
                    "hrScoreFinal": null,
                    "hrRescaledFinal": null,
                    "hasData": true
                },
                {
                    "label": "Nov 27",
                    "dailyDuration": 0.0,
                    "weeklySum": 98.67106526692712,
                    "hrScore": 0.9869197970920138,
                    "hrRescaled": 1.327005072699654,
                    "hrColor": "#cde6ce",
                    "hrScoreFinal": null,
                    "hrRescaledFinal": null,
                    "hasData": true
                },
                {
                    "label": "Nov 26",
                    "dailyDuration": 43.487849934895834,
                    "weeklySum": 143.66479899088546,
                    "hrScore": 0.9783495620969742,
                    "hrRescaled": 1.5412609475756442,
                    "hrColor": "#add5af",
                    "hrScoreFinal": null,
                    "hrRescaledFinal": null,
                    "hasData": true
                },
                {
                    "label": "Nov 25",
                    "dailyDuration": 35.824365234375,
                    "weeklySum": 100.17694905598961,
                    "hrScore": 0.9866329620845734,
                    "hrRescaled": 1.3341759478856645,
                    "hrColor": "#cce5cd",
                    "hrScoreFinal": null,
                    "hrRescaledFinal": null,
                    "hasData": true
                },
                {
                    "label": "Nov 24",
                    "dailyDuration": 19.35885009765625,
                    "weeklySum": 108.4513834635417,
                    "hrScore": 0.9850568793402777,
                    "hrRescaled": 1.373578016493056,
                    "hrColor": "#c6e2c8",
                    "hrScoreFinal": null,
                    "hrRescaledFinal": null,
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ],
            "referenceLines": {
                "worst": {
                    "value": 0.0,
                    "color": "#d32f2f"
                },
                "neutral": {
                    "value": 30.0,
                    "color": "#ffffff"
                },
                "best": {
                    "value": 240.0,
                    "color": "#388e3c"
                }
            }
        },
        "scoreBars": {
            "sleep": {
                "recent": {
                    "value": 1.4368749774368448,
                    "displayValue": 0.96611444859245
                },
                "healthspan": {
                    "value": 1.1476468803220283,
                    "displayValue": 1.0116904020765232
                },
                "showRecent": true,
                "showHealthspan": true,
                "source": "SleepHRsRescaled",
                "displaySource": "SleepHRs",
                "components": {
                    "consistency": {
                        "recent": {
                            "value": 1.4425754703099751,
                            "displayValue": 1.0053292574875194
                        },
                        "healthspan": {
                            "value": 1.2662658322513096,
                            "displayValue": 1.0308354086435028
                        },
                        "showRecent": true,
                        "showHealthspan": true,
                        "source": "SleepHRsRescaled",
                        "displaySource": "SleepHRs"
                    },
                    "duration": {
                        "recent": {
                            "value": 1.6021549680796257,
                            "displayValue": 0.9610868488351366
                        },
                        "healthspan": {
                            "value": 1.3741716567265694,
                            "displayValue": 0.9809052915397682
                        },
                        "showRecent": true,
                        "showHealthspan": true,
                        "source": "SleepHRsRescaled",
                        "displaySource": "SleepHRs"
                    }
                }
            },
            "aerobic": {
                "recent": {
                    "value": 1.746984424221932,
                    "displayValue": 0.5746378373426043
                },
                "healthspan": {
                    "value": 1.7704517026281494,
                    "displayValue": 0.5565586851054545
                },
                "showRecent": true,
                "showHealthspan": true,
                "source": "AerobicHRsRescaled",
                "displaySource": "AerobicHRs",
                "components": {
                    "activity": {
                        "recent": {
                            "value": 0.9058796552451661,
                            "displayValue": 1.0235120624737843
                        },
                        "healthspan": {
                            "value": 0.96575792889302,
                            "displayValue": 1.0194359221891498
                        },
                        "showRecent": true,
                        "showHealthspan": true,
                        "source": "AerobicHRsRescaled",
                        "displaySource": "AerobicHRs"
                    }
                }
            },
            "anaerobic": {
                "recent": {
                    "value": 1.8203104462859792,
                    "displayValue": 0.8751958700721562
                },
                "healthspan": {
                    "value": 1.4117911625834219,
                    "displayValue": 0.9277430167065477
                },
                "showRecent": true,
                "showHealthspan": true,
                "source": "AnaerobicHRsRescaled",
                "displaySource": "AnaerobicHRs",
                "components": {
                    "strength": {
                        "recent": {
                            "value": 1.6444667119424812,
                            "displayValue": 0.9742213315223007
                        },
                        "healthspan": {
                            "value": 1.50915704119647,
                            "displayValue": 0.9790680644018857
                        },
                        "showRecent": true,
                        "showHealthspan": true,
                        "source": "AnaerobicHRsRescaled",
                        "displaySource": "AnaerobicHRs"
                    }
                }
            },
            "steps": {
                "recent": {
                    "value": 1.0,
                    "displayValue": 1.0
                },
                "healthspan": {
                    "value": 0.9873941381053484,
                    "displayValue": 0.9873941381053484
                },
                "showRecent": true,
                "showHealthspan": true,
                "source": "StepsDaily",
                "displaySource": "StepsDaily"
            }
        }
    },
    "healthspan": {
        "sleep": {
            "latestScore": 0.15136504457925914,
            "averageScore": 0.26506521417293705,
            "daily": [
                {
                    "label": "Week of Nov 24",
                    "consistencyScore": 0.9572962154294031,
                    "durationScore": 1.0604204718417047,
                    "consistencyRescaled": 1.8540756914119367,
                    "durationRescaled": 0.45072298325723015,
                    "consistencyColor": "#5ead61",
                    "durationColor": "#e53935",
                    "sleepTime": "01:54",
                    "wakeTime": "08:05",
                    "sleepDuration": 6.198055555555555,
                    "timeInBed": 6.681388888888889,
                    "awakeCount": 2,
                    "consistencyScoreFinal": 0.9572962154294031,
                    "consistencyRescaledFinal": 1.8540756914119367,
                    "consistencyColorFinal": "#5ead61",
                    "durationScoreFinal": 1.0604204718417047,
                    "durationRescaledFinal": 0.45072298325723015,
                    "durationColorFinal": "#e53935",
                    "sleepHrScoreFinal": 1.015136504457926,
                    "sleepHrRescaledFinal": 0.9640292194440925,
                    "hasData": true
                },
                {
                    "label": "Week of Nov 17",
                    "consistencyScore": 1.0091145390804648,
                    "durationScore": 0.982800550060824,
                    "consistencyRescaled": 1.2566202762961747,
                    "durationRescaled": 1.3711374220180481,
                    "consistencyColor": "#fadada",
                    "durationColor": "#bedebf",
                    "sleepTime": "00:28",
                    "wakeTime": "08:09",
                    "sleepDuration": 7.204642857142858,
                    "timeInBed": 7.0637500000000015,
                    "awakeCount": 0,
                    "consistencyScoreFinal": 1.0537368094351336,
                    "consistencyRescaledFinal": 0.8080828234459514,
                    "consistencyColorFinal": "#e53935",
                    "durationScoreFinal": 0.943918918918919,
                    "durationRescaledFinal": 1.8011583011583006,
                    "durationColorFinal": "#43a047",
                    "sleepHrScoreFinal": 0.9946421099870822,
                    "sleepHrRescaledFinal": 1.0459904722138864,
                    "hasData": true
                },
                {
                    "label": "Week of Nov 10",
                    "consistencyScore": 0.9503058501420948,
                    "durationScore": 0.9539841945663864,
                    "consistencyRescaled": 1.9938829971581062,
                    "durationRescaled": 1.6676193246643347,
                    "consistencyColor": "#44a048",
                    "durationColor": "#51a755",
                    "sleepTime": "00:26",
                    "wakeTime": "07:15",
                    "sleepDuration": 7.65952380952381,
                    "timeInBed": 7.79047619047619,
                    "awakeCount": 0,
                    "consistencyScoreFinal": 0.9521409509946628,
                    "consistencyRescaledFinal": 1.9571809801067435,
                    "consistencyColorFinal": "#4ba44e",
                    "durationScoreFinal": 1.0138127853881278,
                    "durationRescaledFinal": 0.8744292237442928,
                    "durationColorFinal": "#f7c8c7",
                    "sleepHrScoreFinal": 0.9652926696099999,
                    "sleepHrRescaledFinal": 1.2979169990557944,
                    "hasData": true
                },
                {
                    "label": "Week of Nov 03",
                    "consistencyScore": 1.0007292849786962,
                    "durationScore": 0.9351973401973401,
                    "consistencyRescaled": 1.471212203432183,
                    "durationRescaled": 1.92575228289514,
                    "consistencyColor": "#fefcfc",
                    "durationColor": "#43a047",
                    "sleepTime": "00:13",
                    "wakeTime": "08:03",
                    "sleepDuration": 8.07813492063492,
                    "timeInBed": 8.392420634920635,
                    "awakeCount": 1,
                    "consistencyScoreFinal": 0.95,
                    "consistencyRescaledFinal": 2.0,
                    "consistencyColorFinal": "#43a047",
                    "durationScoreFinal": 0.93493993993994,
                    "durationRescaledFinal": 1.9294294294294299,
                    "durationColorFinal": "#43a047",
                    "sleepHrScoreFinal": 0.8881929429429429,
                    "sleepHrRescaledFinal": 1.959717227957571,
                    "hasData": true
                },
                {
                    "label": "Week of Oct 27",
                    "consistencyScore": 1.1339142374313478,
                    "durationScore": 0.9578851674570853,
                    "consistencyRescaled": 0.7564287438676357,
                    "durationRescaled": 1.6644646813433508,
                    "consistencyColor": "#e53935",
                    "durationColor": "#60ae64",
                    "sleepTime": "23:46",
                    "wakeTime": "07:56",
                    "sleepDuration": 7.880476190476192,
                    "timeInBed": 7.927222222222222,
                    "awakeCount": 0,
                    "consistencyScoreFinal": 1.1368652302492608,
                    "consistencyRescaledFinal": 0.5111956062526402,
                    "consistencyColorFinal": "#e53935",
                    "durationScoreFinal": 0.93,
                    "durationRescaledFinal": 2.0,
                    "durationColorFinal": "#43a047",
                    "sleepHrScoreFinal": 1.0572846641318125,
                    "sleepHrRescaledFinal": 0.863867243032765,
                    "hasData": true
                },
                {
                    "label": "Week of Oct 20",
                    "consistencyScore": 1.06355305388611,
                    "durationScore": 0.9734795069041645,
                    "consistencyRescaled": 1.1805169193405909,
                    "durationRescaled": 1.465839616524548,
                    "consistencyColor": "#e53935",
                    "durationColor": "#9bcc9d",
                    "sleepTime": "23:34",
                    "wakeTime": "08:08",
                    "sleepDuration": 7.6876388888888885,
                    "timeInBed": 8.076527777777779,
                    "awakeCount": 1,
                    "consistencyScoreFinal": 1.28,
                    "consistencyRescaledFinal": 0.0,
                    "consistencyColorFinal": "#e53935",
                    "durationScoreFinal": 0.93,
                    "durationRescaledFinal": 2.0,
                    "durationColorFinal": "#43a047",
                    "sleepHrScoreFinal": 1.1904000000000001,
                    "sleepHrRescaledFinal": 0.547528517110266,
                    "hasData": true
                },
                {
                    "label": "Week of Oct 13",
                    "consistencyScore": 1.2347473618870268,
                    "durationScore": 1.0518493150684933,
                    "consistencyRescaled": 0.16161656468919028,
                    "durationRescaled": 0.6013698630136985,
                    "consistencyColor": "#e53935",
                    "durationColor": "#e53935",
                    "sleepTime": "18:44",
                    "wakeTime": "03:16",
                    "sleepDuration": 5.756666666666666,
                    "timeInBed": 6.636666666666668,
                    "awakeCount": 2,
                    "consistencyScoreFinal": 1.28,
                    "consistencyRescaledFinal": 0.0,
                    "consistencyColorFinal": "#e53935",
                    "durationScoreFinal": 0.93,
                    "durationRescaledFinal": 2.0,
                    "durationColorFinal": "#43a047",
                    "sleepHrScoreFinal": 1.1904000000000001,
                    "sleepHrRescaledFinal": 0.547528517110266,
                    "hasData": true
                },
                {
                    "label": "Week of Oct 06",
                    "consistencyScore": 1.0960102547774386,
                    "durationScore": 1.0138062622309199,
                    "consistencyRescaled": 0.8525705904420017,
                    "durationRescaled": 1.0303326810176123,
                    "consistencyColor": "#e53935",
                    "durationColor": "#f7c8c7",
                    "sleepTime": "19:35",
                    "wakeTime": "00:55",
                    "sleepDuration": 6.46904761904762,
                    "timeInBed": 6.8309523809523816,
                    "awakeCount": 1,
                    "consistencyScoreFinal": 1.28,
                    "consistencyRescaledFinal": 0.0,
                    "consistencyColorFinal": "#e53935",
                    "durationScoreFinal": 1.11,
                    "durationRescaledFinal": 0.0,
                    "durationColorFinal": "#e53935",
                    "sleepHrScoreFinal": 1.4208,
                    "sleepHrRescaledFinal": 0.0,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 29",
                    "consistencyScore": 0.96009549134479,
                    "durationScore": 0.9938197492992014,
                    "consistencyRescaled": 1.824050724922693,
                    "durationRescaled": 1.204774245870136,
                    "consistencyColor": "#68b36c",
                    "durationColor": "#e7f3e8",
                    "sleepTime": "23:14",
                    "wakeTime": "06:43",
                    "sleepDuration": 7.0988492063492075,
                    "timeInBed": 7.177420634920635,
                    "awakeCount": 0,
                    "consistencyScoreFinal": 1.0110614525139665,
                    "consistencyRescaledFinal": 0.9604948124501196,
                    "consistencyColorFinal": "#f9d3d2",
                    "durationScoreFinal": 0.9546846846846847,
                    "durationRescaledFinal": 1.6473616473616475,
                    "durationColorFinal": "#54a858",
                    "sleepHrScoreFinal": 0.9652448839901354,
                    "sleepHrRescaledFinal": 1.2983271760503396,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 22",
                    "consistencyScore": 1.0291336276680638,
                    "durationScore": 0.9652158812432784,
                    "consistencyRescaled": 1.2968420091177058,
                    "durationRescaled": 1.5230086110712335,
                    "consistencyColor": "#ef8b89",
                    "durationColor": "#7cbc7e",
                    "sleepTime": "00:00",
                    "wakeTime": "06:38",
                    "sleepDuration": 7.65952380952381,
                    "timeInBed": 8.054761904761905,
                    "awakeCount": 1,
                    "consistencyScoreFinal": 0.95,
                    "consistencyRescaledFinal": 2.0,
                    "consistencyColorFinal": "#43a047",
                    "durationScoreFinal": 1.0276255707762556,
                    "durationRescaledFinal": 0.7488584474885855,
                    "durationColorFinal": "#f0918f",
                    "sleepHrScoreFinal": 0.9762442922374428,
                    "sleepHrRescaledFinal": 1.2039116546142248,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 15",
                    "consistencyScore": 1.08071682540937,
                    "durationScore": 1.0030140071578428,
                    "consistencyRescaled": 1.0023974044962334,
                    "durationRescaled": 1.109802072130839,
                    "consistencyColor": "#e53935",
                    "durationColor": "#fdf3f2",
                    "sleepTime": "23:23",
                    "wakeTime": "06:57",
                    "sleepDuration": 6.919444444444444,
                    "timeInBed": 7.552777777777778,
                    "awakeCount": 2,
                    "consistencyScoreFinal": 1.28,
                    "consistencyRescaledFinal": 0.0,
                    "consistencyColorFinal": "#e53935",
                    "durationScoreFinal": 0.9501801801801802,
                    "durationRescaledFinal": 1.7117117117117113,
                    "durationColorFinal": "#43a047",
                    "sleepHrScoreFinal": 1.2162306306306307,
                    "sleepHrRescaledFinal": 0.48614393861542116,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 08",
                    "consistencyScore": 0.9901752927006611,
                    "durationScore": 0.976048906048906,
                    "consistencyRescaled": 1.4200579104124742,
                    "durationRescaled": 1.4237911380768524,
                    "consistencyColor": "#daecda",
                    "durationColor": "#a4d1a6",
                    "sleepTime": "23:49",
                    "wakeTime": "07:17",
                    "sleepDuration": 7.145238095238094,
                    "timeInBed": 7.3690476190476195,
                    "awakeCount": 1,
                    "consistencyScoreFinal": 1.024252017380509,
                    "consistencyRescaledFinal": 0.9133856522124679,
                    "consistencyColorFinal": "#f29e9d",
                    "durationScoreFinal": 0.9555855855855856,
                    "durationRescaledFinal": 1.634491634491635,
                    "durationColorFinal": "#58aa5b",
                    "sleepHrScoreFinal": 0.9787604638157711,
                    "sleepHrRescaledFinal": 1.1823136153152696,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 01",
                    "consistencyScore": 0.9659199760234168,
                    "durationScore": 1.0082093933463798,
                    "consistencyRescaled": 1.6816004795316637,
                    "durationRescaled": 1.0812133072407044,
                    "consistencyColor": "#7ebe81",
                    "durationColor": "#fadedd",
                    "sleepTime": "00:32",
                    "wakeTime": "07:03",
                    "sleepDuration": 7.192857142857143,
                    "timeInBed": 7.380952380952381,
                    "awakeCount": 0,
                    "consistencyScoreFinal": 0.9588124696749151,
                    "consistencyRescaledFinal": 1.823750606501698,
                    "consistencyColorFinal": "#64b067",
                    "durationScoreFinal": 1.0364155251141554,
                    "durationRescaledFinal": 0.668949771689497,
                    "durationColorFinal": "#ec6e6b",
                    "sleepHrScoreFinal": 0.9937281292441272,
                    "sleepHrRescaledFinal": 1.0538358004795945,
                    "hasData": true
                },
                {
                    "label": "Week of Aug 25",
                    "consistencyScore": 0.9757496990241374,
                    "durationScore": 0.9668862796260057,
                    "consistencyRescaled": 1.6279784412606249,
                    "durationRescaled": 1.4972820178299633,
                    "consistencyColor": "#a3d0a5",
                    "durationColor": "#82c085",
                    "sleepTime": "00:06",
                    "wakeTime": "06:55",
                    "sleepDuration": 7.499126984126984,
                    "timeInBed": 7.770555555555556,
                    "awakeCount": 1,
                    "consistencyScoreFinal": 0.95,
                    "consistencyRescaledFinal": 2.0,
                    "consistencyColorFinal": "#43a047",
                    "durationScoreFinal": 1.0138127853881278,
                    "durationRescaledFinal": 0.8744292237442928,
                    "durationColorFinal": "#f7c8c7",
                    "sleepHrScoreFinal": 0.9631221461187214,
                    "sleepHrRescaledFinal": 1.316548101985224,
                    "hasData": true
                },
                {
                    "label": "Week of Aug 18",
                    "consistencyScore": 0.9890892874406939,
                    "durationScore": 0.9698590028384548,
                    "consistencyRescaled": 1.5124872552356636,
                    "durationRescaled": 1.4903812814771722,
                    "consistencyColor": "#d5ead6",
                    "durationColor": "#8dc590",
                    "sleepTime": "23:19",
                    "wakeTime": "07:27",
                    "sleepDuration": 7.4305555555555545,
                    "timeInBed": 7.663888888888889,
                    "awakeCount": 1,
                    "consistencyScoreFinal": 1.0537368094351336,
                    "consistencyRescaledFinal": 0.8080828234459514,
                    "consistencyColorFinal": "#e53935",
                    "durationScoreFinal": 0.93,
                    "durationRescaledFinal": 2.0,
                    "durationColorFinal": "#43a047",
                    "sleepHrScoreFinal": 0.9799752327746742,
                    "sleepHrRescaledFinal": 1.171886413951294,
                    "hasData": true
                },
                {
                    "label": "Week of Aug 11",
                    "consistencyScore": 0.9795926610946182,
                    "durationScore": 0.9716489997825615,
                    "consistencyRescaled": 1.4345735126748358,
                    "durationRescaled": 1.5174766253533376,
                    "consistencyColor": "#b2d8b3",
                    "durationColor": "#94c996",
                    "sleepTime": "23:02",
                    "wakeTime": "07:02",
                    "sleepDuration": 7.734801587301587,
                    "timeInBed": 8.251468253968254,
                    "awakeCount": 1,
                    "consistencyScoreFinal": 0.9548702086365841,
                    "consistencyRescaledFinal": 1.9025958272683168,
                    "consistencyColorFinal": "#55a958",
                    "durationScoreFinal": 0.93,
                    "durationRescaledFinal": 2.0,
                    "durationColorFinal": "#43a047",
                    "sleepHrScoreFinal": 0.8880292940320232,
                    "sleepHrRescaledFinal": 1.9611219396392852,
                    "hasData": true
                },
                {
                    "label": "Week of Aug 04",
                    "consistencyScore": 0.961075372778352,
                    "durationScore": 0.95760145419392,
                    "consistencyRescaled": 1.7784925444329576,
                    "durationRescaled": 1.6268627097883457,
                    "consistencyColor": "#6cb56f",
                    "durationColor": "#5fae62",
                    "sleepTime": "00:10",
                    "wakeTime": "07:00",
                    "sleepDuration": 7.726626984126985,
                    "timeInBed": 7.948055555555555,
                    "awakeCount": 0,
                    "consistencyScoreFinal": 0.9601103230890465,
                    "consistencyRescaledFinal": 1.7977935382190686,
                    "consistencyColorFinal": "#69b36c",
                    "durationScoreFinal": 1.0125570776255708,
                    "durationRescaledFinal": 0.8858447488584476,
                    "durationColorFinal": "#f8cdcc",
                    "sleepHrScoreFinal": 0.9721665029451876,
                    "sleepHrRescaledFinal": 1.2389141378095485,
                    "hasData": true
                },
                {
                    "label": "Week of Jul 28",
                    "consistencyScore": 1.0833987870086286,
                    "durationScore": 0.9545613617531424,
                    "consistencyRescaled": 0.9538908264794379,
                    "durationRescaled": 1.67304164662286,
                    "consistencyColor": "#e53935",
                    "durationColor": "#54a857",
                    "sleepTime": "23:43",
                    "wakeTime": "06:59",
                    "sleepDuration": 7.8189682539682535,
                    "timeInBed": 8.068968253968253,
                    "awakeCount": 0,
                    "consistencyScoreFinal": 0.9519893255701115,
                    "consistencyRescaledFinal": 1.960213488597769,
                    "consistencyColorFinal": "#4aa34e",
                    "durationScoreFinal": 0.9663963963963964,
                    "durationRescaledFinal": 1.4800514800514804,
                    "durationColorFinal": "#80bf83",
                    "sleepHrScoreFinal": 0.9199990536387915,
                    "sleepHrRescaledFinal": 1.6867034022421326,
                    "hasData": true
                },
                {
                    "label": "Week of Jul 21",
                    "consistencyScore": 1.0872610095719577,
                    "durationScore": 1.0112419562419563,
                    "consistencyRescaled": 0.6883535372430084,
                    "durationRescaled": 1.0842985842985844,
                    "consistencyColor": "#e53935",
                    "durationColor": "#f9d2d1",
                    "sleepTime": "22:39",
                    "wakeTime": "02:02",
                    "sleepDuration": 6.6274999999999995,
                    "timeInBed": 6.991785714285716,
                    "awakeCount": 1,
                    "consistencyScoreFinal": 1.2269053654414872,
                    "consistencyRescaledFinal": 0.1896236948518315,
                    "consistencyColorFinal": "#e53935",
                    "durationScoreFinal": 1.11,
                    "durationRescaledFinal": 0.0,
                    "durationColorFinal": "#e53935",
                    "sleepHrScoreFinal": 1.3618649556400508,
                    "sleepHrRescaledFinal": 0.14005476321280708,
                    "hasData": true
                },
                {
                    "label": "Week of Jul 14",
                    "consistencyScore": 1.1223298005637854,
                    "durationScore": 1.0183289845618613,
                    "consistencyRescaled": 0.6878362718796397,
                    "durationRescaled": 0.8964526449849343,
                    "consistencyColor": "#e53935",
                    "durationColor": "#f5b6b4",
                    "sleepTime": "20:24",
                    "wakeTime": "03:13",
                    "sleepDuration": 6.608888888888889,
                    "timeInBed": 7.061269841269841,
                    "awakeCount": 1,
                    "consistencyScoreFinal": 1.28,
                    "consistencyRescaledFinal": 0.0,
                    "consistencyColorFinal": "#e53935",
                    "durationScoreFinal": 1.0138127853881278,
                    "durationRescaledFinal": 0.8744292237442928,
                    "durationColorFinal": "#f7c8c7",
                    "sleepHrScoreFinal": 1.2976803652968036,
                    "sleepHrRescaledFinal": 0.2925846832300296,
                    "hasData": true
                },
                {
                    "label": "Week of Jul 07",
                    "consistencyScore": 0.9837717711508551,
                    "durationScore": 0.9682460640679819,
                    "consistencyRescaled": 1.4274744187594608,
                    "durationRescaled": 1.488107201414442,
                    "consistencyColor": "#c1e0c3",
                    "durationColor": "#87c28a",
                    "sleepTime": "23:30",
                    "wakeTime": "07:06",
                    "sleepDuration": 7.397619047619047,
                    "timeInBed": 7.830952380952381,
                    "awakeCount": 1,
                    "consistencyScoreFinal": 0.9988547412660888,
                    "consistencyRescaledFinal": 1.022905174678225,
                    "consistencyColorFinal": "#fafcfa",
                    "durationScoreFinal": 0.9483783783783785,
                    "durationRescaledFinal": 1.7374517374517366,
                    "durationColorFinal": "#43a047",
                    "sleepHrScoreFinal": 0.947292239757488,
                    "sleepHrRescaledFinal": 1.4524271265451674,
                    "hasData": true
                },
                {
                    "label": "Week of Jun 30",
                    "consistencyScore": 1.0138925995812496,
                    "durationScore": 0.9733547833547834,
                    "consistencyRescaled": 1.272324538652487,
                    "durationRescaled": 1.462278605135748,
                    "consistencyColor": "#f7c7c6",
                    "durationColor": "#9acc9c",
                    "sleepTime": "23:07",
                    "wakeTime": "06:27",
                    "sleepDuration": 7.400436507936509,
                    "timeInBed": 7.748055555555554,
                    "awakeCount": 1,
                    "consistencyScoreFinal": 1.0918451626531473,
                    "consistencyRescaledFinal": 0.6719815619530451,
                    "consistencyColorFinal": "#e53935",
                    "durationScoreFinal": 0.9623423423423423,
                    "durationRescaledFinal": 1.5379665379665393,
                    "durationColorFinal": "#71b774",
                    "sleepHrScoreFinal": 1.0507288313027856,
                    "sleepHrRescaledFinal": 0.8794466936720875,
                    "hasData": true
                },
                {
                    "label": "Week of Jun 23",
                    "consistencyScore": 1.0467458248677086,
                    "durationScore": 0.9496615891821371,
                    "consistencyRescaled": 1.379369216931545,
                    "durationRescaled": 1.7386896261651645,
                    "consistencyColor": "#e64542",
                    "durationColor": "#43a047",
                    "sleepTime": "23:17",
                    "wakeTime": "06:33",
                    "sleepDuration": 7.700000000000001,
                    "timeInBed": 8.342857142857142,
                    "awakeCount": 2,
                    "consistencyScoreFinal": 0.9633937483582873,
                    "consistencyRescaledFinal": 1.7321250328342537,
                    "consistencyColorFinal": "#75b978",
                    "durationScoreFinal": 0.9663963963963964,
                    "durationRescaledFinal": 1.4800514800514804,
                    "durationColorFinal": "#80bf83",
                    "sleepHrScoreFinal": 0.9310202467242655,
                    "sleepHrRescaledFinal": 1.5921008864869908,
                    "hasData": true
                },
                {
                    "label": "Week of Jun 16",
                    "consistencyScore": 1.2716059357836924,
                    "durationScore": 1.0291891891891893,
                    "consistencyRescaled": 0.029978800772526792,
                    "durationRescaled": 0.8687258687258683,
                    "consistencyColor": "#e53935",
                    "durationColor": "#ef8b89",
                    "sleepTime": "23:11",
                    "wakeTime": "06:47",
                    "sleepDuration": 4.041666666666666,
                    "timeInBed": 4.05,
                    "awakeCount": 0,
                    "consistencyScoreFinal": 1.28,
                    "consistencyRescaledFinal": 0.0,
                    "consistencyColorFinal": "#e53935",
                    "durationScoreFinal": 0.9483783783783785,
                    "durationRescaledFinal": 1.7374517374517366,
                    "durationColorFinal": "#43a047",
                    "sleepHrScoreFinal": 1.2139243243243245,
                    "sleepHrRescaledFinal": 0.4916247045524609,
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ],
            "referenceLines": {
                "worst": {
                    "value": 5.54,
                    "color": "#d32f2f"
                },
                "neutral": {
                    "value": 7.0,
                    "color": "#ffffff"
                },
                "best": {
                    "value": 7.94,
                    "color": "#388e3c"
                }
            }
        },
        "vo2": {
            "latestScore": -4.6,
            "averageScore": -4.6,
            "daily": [
                {
                    "date": "Week of Nov 24",
                    "vo2": 53.3,
                    "hr": 0.54,
                    "hrRescaled": 2.0,
                    "hrFinal": 0.54,
                    "hrRescaledFinal": 2.0,
                    "hrColor": "#43a047",
                    "hrColorFinal": "#43a047"
                },
                {
                    "date": "Week of Nov 17",
                    "vo2": 53.300000000000004,
                    "hr": 0.54,
                    "hrRescaled": 2.0,
                    "hrFinal": 0.54,
                    "hrRescaledFinal": 2.0,
                    "hrColor": "#43a047",
                    "hrColorFinal": "#43a047"
                },
                {
                    "date": "Week of Nov 10",
                    "vo2": 53.34285714285714,
                    "hr": 0.54,
                    "hrRescaled": 2.0,
                    "hrFinal": 0.54,
                    "hrRescaledFinal": 2.0,
                    "hrColor": "#43a047",
                    "hrColorFinal": "#43a047"
                },
                {
                    "date": "Week of Nov 03",
                    "vo2": 53.39999999999999,
                    "hr": 0.54,
                    "hrRescaled": 2.0,
                    "hrFinal": 0.54,
                    "hrRescaledFinal": 2.0,
                    "hrColor": "#43a047",
                    "hrColorFinal": "#43a047"
                },
                {
                    "date": "Week of Oct 27",
                    "vo2": 53.42857142857143,
                    "hr": 0.54,
                    "hrRescaled": 2.0,
                    "hrFinal": 0.54,
                    "hrRescaledFinal": 2.0,
                    "hrColor": "#43a047",
                    "hrColorFinal": "#43a047"
                },
                {
                    "date": "Week of Oct 20",
                    "vo2": 53.58571428571428,
                    "hr": 0.54,
                    "hrRescaled": 2.0,
                    "hrFinal": 0.54,
                    "hrRescaledFinal": 2.0,
                    "hrColor": "#43a047",
                    "hrColorFinal": "#43a047"
                },
                {
                    "date": "Week of Oct 13",
                    "vo2": 53.699999999999996,
                    "hr": 0.54,
                    "hrRescaled": 2.0,
                    "hrFinal": 0.54,
                    "hrRescaledFinal": 2.0,
                    "hrColor": "#43a047",
                    "hrColorFinal": "#43a047"
                },
                {
                    "date": "Week of Oct 06",
                    "vo2": 53.87142857142857,
                    "hr": 0.54,
                    "hrRescaled": 2.0,
                    "hrFinal": 0.54,
                    "hrRescaledFinal": 2.0,
                    "hrColor": "#43a047",
                    "hrColorFinal": "#43a047"
                },
                {
                    "date": "Week of Sep 29",
                    "vo2": 53.885714285714286,
                    "hr": 0.54,
                    "hrRescaled": 2.0,
                    "hrFinal": 0.54,
                    "hrRescaledFinal": 2.0,
                    "hrColor": "#43a047",
                    "hrColorFinal": "#43a047"
                },
                {
                    "date": "Week of Sep 22",
                    "vo2": 53.82857142857143,
                    "hr": 0.54,
                    "hrRescaled": 2.0,
                    "hrFinal": 0.54,
                    "hrRescaledFinal": 2.0,
                    "hrColor": "#43a047",
                    "hrColorFinal": "#43a047"
                },
                {
                    "date": "Week of Sep 15",
                    "vo2": 53.714285714285715,
                    "hr": 0.54,
                    "hrRescaled": 2.0,
                    "hrFinal": 0.54,
                    "hrRescaledFinal": 2.0,
                    "hrColor": "#43a047",
                    "hrColorFinal": "#43a047"
                },
                {
                    "date": "Week of Sep 08",
                    "vo2": 53.800000000000004,
                    "hr": 0.54,
                    "hrRescaled": 2.0,
                    "hrFinal": 0.54,
                    "hrRescaledFinal": 2.0,
                    "hrColor": "#43a047",
                    "hrColorFinal": "#43a047"
                },
                {
                    "date": "Week of Sep 01",
                    "vo2": 54.085714285714275,
                    "hr": 0.54,
                    "hrRescaled": 2.0,
                    "hrFinal": 0.54,
                    "hrRescaledFinal": 2.0,
                    "hrColor": "#43a047",
                    "hrColorFinal": "#43a047"
                },
                {
                    "date": "Week of Aug 25",
                    "vo2": 54.114285714285714,
                    "hr": 0.54,
                    "hrRescaled": 2.0,
                    "hrFinal": 0.54,
                    "hrRescaledFinal": 2.0,
                    "hrColor": "#43a047",
                    "hrColorFinal": "#43a047"
                },
                {
                    "date": "Week of Aug 18",
                    "vo2": 53.98571428571429,
                    "hr": 0.54,
                    "hrRescaled": 2.0,
                    "hrFinal": 0.54,
                    "hrRescaledFinal": 2.0,
                    "hrColor": "#43a047",
                    "hrColorFinal": "#43a047"
                },
                {
                    "date": "Week of Aug 11",
                    "vo2": 53.87142857142857,
                    "hr": 0.54,
                    "hrRescaled": 2.0,
                    "hrFinal": 0.54,
                    "hrRescaledFinal": 2.0,
                    "hrColor": "#43a047",
                    "hrColorFinal": "#43a047"
                },
                {
                    "date": "Week of Aug 04",
                    "vo2": 53.82857142857143,
                    "hr": 0.54,
                    "hrRescaled": 2.0,
                    "hrFinal": 0.54,
                    "hrRescaledFinal": 2.0,
                    "hrColor": "#43a047",
                    "hrColorFinal": "#43a047"
                },
                {
                    "date": "Week of Jul 28",
                    "vo2": 54.05714285714286,
                    "hr": 0.54,
                    "hrRescaled": 2.0,
                    "hrFinal": 0.54,
                    "hrRescaledFinal": 2.0,
                    "hrColor": "#43a047",
                    "hrColorFinal": "#43a047"
                },
                {
                    "date": "Week of Jul 21",
                    "vo2": 54.18571428571429,
                    "hr": 0.54,
                    "hrRescaled": 2.0,
                    "hrFinal": 0.54,
                    "hrRescaledFinal": 2.0,
                    "hrColor": "#43a047",
                    "hrColorFinal": "#43a047"
                },
                {
                    "date": "Week of Jul 14",
                    "vo2": 54.27142857142858,
                    "hr": 0.54,
                    "hrRescaled": 2.0,
                    "hrFinal": 0.54,
                    "hrRescaledFinal": 2.0,
                    "hrColor": "#43a047",
                    "hrColorFinal": "#43a047"
                },
                {
                    "date": "Week of Jul 07",
                    "vo2": 54.51428571428572,
                    "hr": 0.54,
                    "hrRescaled": 2.0,
                    "hrFinal": 0.54,
                    "hrRescaledFinal": 2.0,
                    "hrColor": "#43a047",
                    "hrColorFinal": "#43a047"
                },
                {
                    "date": "Week of Jun 30",
                    "vo2": 54.81428571428571,
                    "hr": 0.54,
                    "hrRescaled": 2.0,
                    "hrFinal": 0.54,
                    "hrRescaledFinal": 2.0,
                    "hrColor": "#43a047",
                    "hrColorFinal": "#43a047"
                },
                {
                    "date": "Week of Jun 23",
                    "vo2": 54.971428571428575,
                    "hr": 0.54,
                    "hrRescaled": 2.0,
                    "hrFinal": 0.54,
                    "hrRescaledFinal": 2.0,
                    "hrColor": "#43a047",
                    "hrColorFinal": "#43a047"
                },
                {
                    "date": "Week of Jun 16",
                    "vo2": 55.900000000000006,
                    "hr": 0.54,
                    "hrRescaled": 2.0,
                    "hrFinal": 0.54,
                    "hrRescaledFinal": 2.0,
                    "hrColor": "#43a047",
                    "hrColorFinal": "#43a047"
                }
            ],
            "zones": [
                {
                    "value": 36.05,
                    "color": "#e53935"
                },
                {
                    "value": 38.85,
                    "color": "#e53935"
                },
                {
                    "value": 44.8,
                    "color": "#ffffff"
                },
                {
                    "value": 51.28,
                    "color": "#43a047"
                },
                {
                    "value": 54.95,
                    "color": "#43a047"
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ],
            "referenceLines": {
                "worst": {
                    "value": 36.05,
                    "color": "#d32f2f"
                },
                "neutral": {
                    "value": 44.8,
                    "color": "#ffffff"
                },
                "best": {
                    "value": 54.95,
                    "color": "#388e3c"
                }
            }
        },
        "steps": {
            "latestScore": 0.0,
            "averageScore": 0.17670717120181534,
            "daily": [
                {
                    "label": "Week of Nov 24",
                    "dailySteps": 16547,
                    "rollingAvgSteps": 12666,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": 1.0,
                    "hazardRatioRescaledFinal": 1.0,
                    "hasData": true
                },
                {
                    "label": "Week of Nov 17",
                    "dailySteps": 12346,
                    "rollingAvgSteps": 13923,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": 1.0,
                    "hazardRatioRescaledFinal": 1.0,
                    "hasData": true
                },
                {
                    "label": "Week of Nov 10",
                    "dailySteps": 16365,
                    "rollingAvgSteps": 16573,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": 1.0,
                    "hazardRatioRescaledFinal": 1.0,
                    "hasData": true
                },
                {
                    "label": "Week of Nov 03",
                    "dailySteps": 14857,
                    "rollingAvgSteps": 12952,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": 1.0,
                    "hazardRatioRescaledFinal": 1.0,
                    "hasData": true
                },
                {
                    "label": "Week of Oct 27",
                    "dailySteps": 11286,
                    "rollingAvgSteps": 7555,
                    "hazardRatio": 1.2018804761904762,
                    "hazardRatioRescaled": 0.8654130158730159,
                    "hrColor": "#e53935",
                    "hazardRatioFinal": 1.0,
                    "hazardRatioRescaledFinal": 1.0,
                    "hasData": true
                },
                {
                    "label": "Week of Oct 20",
                    "dailySteps": 5283,
                    "rollingAvgSteps": 7285,
                    "hazardRatio": 1.1826683673469387,
                    "hazardRatioRescaled": 0.8782210884353742,
                    "hrColor": "#e53935",
                    "hazardRatioFinal": 1.509125,
                    "hazardRatioRescaledFinal": 0.6605833333333333,
                    "hasData": true
                },
                {
                    "label": "Week of Oct 13",
                    "dailySteps": 8638,
                    "rollingAvgSteps": 8775,
                    "hazardRatio": 1.0272990816326533,
                    "hazardRatioRescaled": 0.981800612244898,
                    "hrColor": "#f09290",
                    "hazardRatioFinal": 1.0,
                    "hazardRatioRescaledFinal": 1.0,
                    "hasData": true
                },
                {
                    "label": "Week of Oct 06",
                    "dailySteps": 10446,
                    "rollingAvgSteps": 12707,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": 1.0,
                    "hazardRatioRescaledFinal": 1.0,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 29",
                    "dailySteps": 15301,
                    "rollingAvgSteps": 14424,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": 1.0,
                    "hazardRatioRescaledFinal": 1.0,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 22",
                    "dailySteps": 12743,
                    "rollingAvgSteps": 12281,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": 1.0,
                    "hazardRatioRescaledFinal": 1.0,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 15",
                    "dailySteps": 9667,
                    "rollingAvgSteps": 9301,
                    "hazardRatio": 1.0122492857142857,
                    "hazardRatioRescaled": 0.9918338095238095,
                    "hrColor": "#f8cecd",
                    "hazardRatioFinal": 1.0,
                    "hazardRatioRescaledFinal": 1.0,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 08",
                    "dailySteps": 9254,
                    "rollingAvgSteps": 12636,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": 1.0,
                    "hazardRatioRescaledFinal": 1.0,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 01",
                    "dailySteps": 18686,
                    "rollingAvgSteps": 17102,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": 1.0,
                    "hazardRatioRescaledFinal": 1.0,
                    "hasData": true
                },
                {
                    "label": "Week of Aug 25",
                    "dailySteps": 14834,
                    "rollingAvgSteps": 18858,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": 1.0,
                    "hazardRatioRescaledFinal": 1.0,
                    "hasData": true
                },
                {
                    "label": "Week of Aug 18",
                    "dailySteps": 20489,
                    "rollingAvgSteps": 16401,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": 1.0,
                    "hazardRatioRescaledFinal": 1.0,
                    "hasData": true
                },
                {
                    "label": "Week of Aug 11",
                    "dailySteps": 13915,
                    "rollingAvgSteps": 14646,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": 1.0,
                    "hazardRatioRescaledFinal": 1.0,
                    "hasData": true
                },
                {
                    "label": "Week of Aug 04",
                    "dailySteps": 15771,
                    "rollingAvgSteps": 14926,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": 1.0,
                    "hazardRatioRescaledFinal": 1.0,
                    "hasData": true
                },
                {
                    "label": "Week of Jul 28",
                    "dailySteps": 12878,
                    "rollingAvgSteps": 12134,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": 1.0,
                    "hazardRatioRescaledFinal": 1.0,
                    "hasData": true
                },
                {
                    "label": "Week of Jul 21",
                    "dailySteps": 10218,
                    "rollingAvgSteps": 11644,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": 1.0,
                    "hazardRatioRescaledFinal": 1.0,
                    "hasData": true
                },
                {
                    "label": "Week of Jul 14",
                    "dailySteps": 14240,
                    "rollingAvgSteps": 14467,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": 1.0,
                    "hazardRatioRescaledFinal": 1.0,
                    "hasData": true
                },
                {
                    "label": "Week of Jul 07",
                    "dailySteps": 16868,
                    "rollingAvgSteps": 17436,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": 1.0,
                    "hazardRatioRescaledFinal": 1.0,
                    "hasData": true
                },
                {
                    "label": "Week of Jun 30",
                    "dailySteps": 16288,
                    "rollingAvgSteps": 15748,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": 1.0,
                    "hazardRatioRescaledFinal": 1.0,
                    "hasData": true
                },
                {
                    "label": "Week of Jun 23",
                    "dailySteps": 16056,
                    "rollingAvgSteps": 18803,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": 1.0,
                    "hazardRatioRescaledFinal": 1.0,
                    "hasData": true
                },
                {
                    "label": "Week of Jun 16",
                    "dailySteps": 24147,
                    "rollingAvgSteps": 19062,
                    "hazardRatio": 1.0,
                    "hazardRatioRescaled": 1.0,
                    "hrColor": "#ffffff",
                    "hazardRatioFinal": 1.0,
                    "hazardRatioRescaledFinal": 1.0,
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ],
            "referenceLines": {
                "worst": {
                    "value": 2000.0,
                    "color": "#d32f2f"
                },
                "neutral": {
                    "value": 8000.0,
                    "color": "#ffffff"
                },
                "best": {
                    "value": 8000.0,
                    "color": "#388e3c"
                }
            }
        },
        "heartRate": {
            "latestScore": -0.22336448598130776,
            "averageScore": -0.13840819760767786,
            "daily": [
                {
                    "label": "Week of Nov 24",
                    "mpaTime": 46.0,
                    "vpaTime": 16.0,
                    "adjVpaTime": 39.0,
                    "rolling7Day": 8.857142857142858,
                    "hazardRatio": 1.0223364485981308,
                    "hazardRatioRescaled": 0.9028850060950835,
                    "restingHR": 47.0,
                    "maxHR": 195.0,
                    "hrReserve": 148.0,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": 1.0223364485981308,
                    "hazardRatioRescaledFinal": 0.9028850060950835,
                    "hasData": true
                },
                {
                    "label": "Week of Nov 17",
                    "mpaTime": 80.0,
                    "vpaTime": 10.0,
                    "adjVpaTime": 50.0,
                    "rolling7Day": 1.836734693877551,
                    "hazardRatio": 1.051815754339119,
                    "hazardRatioRescaled": 0.7747141115690483,
                    "restingHR": 49.142857142857146,
                    "maxHR": 195.0,
                    "hrReserve": 145.85714285714286,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": 1.055981308411215,
                    "hazardRatioRescaledFinal": 0.7566030069077605,
                    "hasData": true
                },
                {
                    "label": "Week of Nov 10",
                    "mpaTime": 152.0,
                    "vpaTime": 32.0,
                    "adjVpaTime": 108.0,
                    "rolling7Day": 3.7551020408163263,
                    "hazardRatio": 1.0055281551873085,
                    "hazardRatioRescaled": 0.9759645426638758,
                    "restingHR": 48.285714285714285,
                    "maxHR": 195.0,
                    "hrReserve": 146.71428571428572,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": 1.0,
                    "hazardRatioRescaledFinal": 1.0,
                    "hasData": true
                },
                {
                    "label": "Week of Nov 03",
                    "mpaTime": 72.0,
                    "vpaTime": 10.0,
                    "adjVpaTime": 46.0,
                    "rolling7Day": 1.673469387755102,
                    "hazardRatio": 1.0293622869708632,
                    "hazardRatioRescaled": 0.8723378827353778,
                    "restingHR": 46.714285714285715,
                    "maxHR": 195.0,
                    "hrReserve": 148.28571428571428,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": 1.0604672897196261,
                    "hazardRatioRescaledFinal": 0.7370987403494516,
                    "hasData": true
                },
                {
                    "label": "Week of Oct 27",
                    "mpaTime": 164.0,
                    "vpaTime": 4.0,
                    "adjVpaTime": 86.0,
                    "rolling7Day": 3.4285714285714284,
                    "hazardRatio": 1.0547380507343125,
                    "hazardRatioRescaled": 0.7620084750682068,
                    "restingHR": 46.714285714285715,
                    "maxHR": 195.0,
                    "hrReserve": 148.28571428571428,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": 1.015607476635514,
                    "hazardRatioRescaledFinal": 0.9321414059325475,
                    "hasData": true
                },
                {
                    "label": "Week of Oct 20",
                    "mpaTime": 30.0,
                    "vpaTime": 14.0,
                    "adjVpaTime": 29.0,
                    "rolling7Day": 0.8979591836734694,
                    "hazardRatio": 1.1063328882955052,
                    "hazardRatioRescaled": 0.5376830943673688,
                    "restingHR": 50.142857142857146,
                    "maxHR": 195.0,
                    "hrReserve": 144.85714285714286,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": 1.1062666666666667,
                    "hazardRatioRescaledFinal": 0.5379710144927534,
                    "hasData": true
                },
                {
                    "label": "Week of Oct 13",
                    "mpaTime": 38.0,
                    "vpaTime": 6.0,
                    "adjVpaTime": 25.0,
                    "rolling7Day": 0.8979591836734694,
                    "hazardRatio": 1.0535959056519804,
                    "hazardRatioRescaled": 0.7669743232522591,
                    "restingHR": 52.857142857142854,
                    "maxHR": 195.0,
                    "hrReserve": 142.14285714285714,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": 1.1233333333333333,
                    "hazardRatioRescaledFinal": 0.46376811594202927,
                    "hasData": true
                },
                {
                    "label": "Week of Oct 06",
                    "mpaTime": 164.0,
                    "vpaTime": 36.0,
                    "adjVpaTime": 118.0,
                    "rolling7Day": 4.081632653061225,
                    "hazardRatio": 0.9987682155990779,
                    "hazardRatioRescaled": 1.0503472906707731,
                    "restingHR": 48.285714285714285,
                    "maxHR": 195.0,
                    "hrReserve": 146.71428571428572,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": 0.9952380952380953,
                    "hazardRatioRescaledFinal": 1.0529100529100526,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 29",
                    "mpaTime": 254.0,
                    "vpaTime": 16.0,
                    "adjVpaTime": 143.0,
                    "rolling7Day": 5.5102040816326525,
                    "hazardRatio": 0.9925974600366462,
                    "hazardRatioRescaled": 1.082818787316605,
                    "restingHR": 48.0,
                    "maxHR": 195.0,
                    "hrReserve": 147.0,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": 0.9868421052631579,
                    "hazardRatioRescaledFinal": 1.1461988304093573,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 22",
                    "mpaTime": 244.0,
                    "vpaTime": 30.0,
                    "adjVpaTime": 152.0,
                    "rolling7Day": 5.591836734693878,
                    "hazardRatio": 0.9844253490870031,
                    "hazardRatioRescaled": 1.1730516768110757,
                    "restingHR": 47.42857142857143,
                    "maxHR": 195.0,
                    "hrReserve": 147.57142857142858,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": 0.9848120300751879,
                    "hazardRatioRescaledFinal": 1.1687552213868009,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 15",
                    "mpaTime": 80.0,
                    "vpaTime": 34.0,
                    "adjVpaTime": 74.0,
                    "rolling7Day": 2.326530612244898,
                    "hazardRatio": 1.0394557449147885,
                    "hazardRatioRescaled": 0.8284532829791809,
                    "restingHR": 49.42857142857143,
                    "maxHR": 195.0,
                    "hrReserve": 145.57142857142858,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": 1.0290654205607477,
                    "hazardRatioRescaledFinal": 0.8736286062576188,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 08",
                    "mpaTime": 52.0,
                    "vpaTime": 36.0,
                    "adjVpaTime": 62.0,
                    "rolling7Day": 1.7959183673469388,
                    "hazardRatio": 0.9943848272215919,
                    "hazardRatioRescaled": 1.1034761849639354,
                    "restingHR": 47.42857142857143,
                    "maxHR": 195.0,
                    "hrReserve": 147.57142857142858,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": 1.0425233644859813,
                    "hazardRatioRescaledFinal": 0.8151158065826902,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 01",
                    "mpaTime": 430.0,
                    "vpaTime": 40.0,
                    "adjVpaTime": 255.0,
                    "rolling7Day": 9.591836734693876,
                    "hazardRatio": 0.9654731562562581,
                    "hazardRatioRescaled": 1.383631597152689,
                    "restingHR": 48.285714285714285,
                    "maxHR": 195.0,
                    "hrReserve": 146.71428571428572,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": 0.961578947368421,
                    "hazardRatioRescaledFinal": 1.4269005847953227,
                    "hasData": true
                },
                {
                    "label": "Week of Aug 25",
                    "mpaTime": 276.0,
                    "vpaTime": 56.0,
                    "adjVpaTime": 194.0,
                    "rolling7Day": 6.775510204081633,
                    "hazardRatio": 0.9824597207303974,
                    "hazardRatioRescaled": 1.1948919918844734,
                    "restingHR": 47.142857142857146,
                    "maxHR": 195.0,
                    "hrReserve": 147.85714285714286,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": 0.9753383458646616,
                    "hazardRatioRescaledFinal": 1.2740183792815376,
                    "hasData": true
                },
                {
                    "label": "Week of Aug 18",
                    "mpaTime": 222.0,
                    "vpaTime": 28.0,
                    "adjVpaTime": 139.0,
                    "rolling7Day": 5.1020408163265305,
                    "hazardRatio": 0.9920002846195045,
                    "hazardRatioRescaled": 1.105102100579177,
                    "restingHR": 47.0,
                    "maxHR": 195.0,
                    "hrReserve": 148.0,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": 0.9877443609022556,
                    "hazardRatioRescaledFinal": 1.1361737677527157,
                    "hasData": true
                },
                {
                    "label": "Week of Aug 11",
                    "mpaTime": 276.0,
                    "vpaTime": 58.0,
                    "adjVpaTime": 196.0,
                    "rolling7Day": 6.816326530612245,
                    "hazardRatio": 0.9666478089897869,
                    "hazardRatioRescaled": 1.3705799001134804,
                    "restingHR": 46.714285714285715,
                    "maxHR": 195.0,
                    "hrReserve": 148.28571428571428,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": 0.9748872180451128,
                    "hazardRatioRescaledFinal": 1.2790309106098579,
                    "hasData": true
                },
                {
                    "label": "Week of Aug 04",
                    "mpaTime": 280.0,
                    "vpaTime": 32.0,
                    "adjVpaTime": 172.0,
                    "rolling7Day": 6.36734693877551,
                    "hazardRatio": 0.9867852404119544,
                    "hazardRatioRescaled": 1.1542191247208269,
                    "restingHR": 46.57142857142857,
                    "maxHR": 195.0,
                    "hrReserve": 148.42857142857142,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": 0.9803007518796992,
                    "hazardRatioRescaledFinal": 1.2188805346700087,
                    "hasData": true
                },
                {
                    "label": "Week of Jul 28",
                    "mpaTime": 174.0,
                    "vpaTime": 6.0,
                    "adjVpaTime": 93.0,
                    "rolling7Day": 3.673469387755102,
                    "hazardRatio": 1.0189248409644232,
                    "hazardRatioRescaled": 0.9177180827633774,
                    "restingHR": 49.42857142857143,
                    "maxHR": 195.0,
                    "hrReserve": 145.57142857142858,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": 1.0088235294117647,
                    "hazardRatioRescaledFinal": 0.9616368286445014,
                    "hasData": true
                },
                {
                    "label": "Week of Jul 21",
                    "mpaTime": 104.0,
                    "vpaTime": 44.0,
                    "adjVpaTime": 96.0,
                    "rolling7Day": 3.020408163265306,
                    "hazardRatio": 1.0275237571664182,
                    "hazardRatioRescaled": 0.8803314905807912,
                    "restingHR": 49.142857142857146,
                    "maxHR": 195.0,
                    "hrReserve": 145.85714285714286,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": 1.0070588235294118,
                    "hazardRatioRescaledFinal": 0.9693094629156009,
                    "hasData": true
                },
                {
                    "label": "Week of Jul 14",
                    "mpaTime": 188.0,
                    "vpaTime": 20.0,
                    "adjVpaTime": 114.0,
                    "rolling7Day": 4.244897959183674,
                    "hazardRatio": 0.993929449792706,
                    "hazardRatioRescaled": 1.079279534336315,
                    "restingHR": 46.0,
                    "maxHR": 195.0,
                    "hrReserve": 149.0,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": 0.9971428571428571,
                    "hazardRatioRescaledFinal": 1.031746031746032,
                    "hasData": true
                },
                {
                    "label": "Week of Jul 07",
                    "mpaTime": 176.0,
                    "vpaTime": 42.0,
                    "adjVpaTime": 130.0,
                    "rolling7Day": 4.448979591836735,
                    "hazardRatio": 0.9991062731044213,
                    "hazardRatioRescaled": 1.0464317475839635,
                    "restingHR": 46.285714285714285,
                    "maxHR": 195.0,
                    "hrReserve": 148.71428571428572,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": 0.9897744360902255,
                    "hazardRatioRescaledFinal": 1.113617376775272,
                    "hasData": true
                },
                {
                    "label": "Week of Jun 30",
                    "mpaTime": 130.0,
                    "vpaTime": 20.0,
                    "adjVpaTime": 85.0,
                    "rolling7Day": 3.061224489795918,
                    "hazardRatio": 0.9997224703949461,
                    "hazardRatioRescaled": 1.0289087559620655,
                    "restingHR": 45.57142857142857,
                    "maxHR": 195.0,
                    "hrReserve": 149.42857142857142,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": 1.016728971962617,
                    "hazardRatioRescaledFinal": 0.92726533929297,
                    "hasData": true
                },
                {
                    "label": "Week of Jun 23",
                    "mpaTime": 282.0,
                    "vpaTime": 42.0,
                    "adjVpaTime": 183.0,
                    "rolling7Day": 6.612244897959184,
                    "hazardRatio": 0.9898655851912828,
                    "hazardRatioRescaled": 1.1417707112928508,
                    "restingHR": 49.42857142857143,
                    "maxHR": 195.0,
                    "hrReserve": 145.57142857142858,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": 0.9778195488721805,
                    "hazardRatioRescaledFinal": 1.2464494569757725,
                    "hasData": true
                },
                {
                    "label": "Week of Jun 16",
                    "mpaTime": 48.0,
                    "vpaTime": 0.0,
                    "adjVpaTime": 24.0,
                    "rolling7Day": 3.4285714285714284,
                    "hazardRatio": 1.0764,
                    "hazardRatioRescaled": 0.6678260869565216,
                    "restingHR": 49.0,
                    "maxHR": 195.0,
                    "hrReserve": 146.0,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hazardRatioFinal": 1.0764,
                    "hazardRatioRescaledFinal": 0.6678260869565216,
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ],
            "referenceLines": {
                "worst": {
                    "value": 0.0,
                    "color": "#d32f2f"
                },
                "neutral": {
                    "value": 108.0,
                    "color": "#ffffff"
                },
                "best": {
                    "value": 498.0,
                    "color": "#388e3c"
                }
            }
        },
        "rhr": {
            "latestScore": -1.794,
            "averageScore": -1.714267857142856,
            "daily": [
                {
                    "label": "Week of Nov 24",
                    "rhr": 47,
                    "hrScore": 0.8206,
                    "hrColor": "#43a047",
                    "hrRescaled": 1.9247422680412374,
                    "hrScoreFinal": 0.8206,
                    "hrRescaledFinal": 1.9247422680412374,
                    "hrColorFinal": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Nov 17",
                    "rhr": 49,
                    "hrScore": 0.8373714285714285,
                    "hrColor": "#43a047",
                    "hrRescaled": 1.8382916053019147,
                    "hrScoreFinal": 0.8206,
                    "hrRescaledFinal": 1.9247422680412374,
                    "hrColorFinal": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Nov 10",
                    "rhr": 48,
                    "hrScore": 0.8299857142857144,
                    "hrColor": "#43a047",
                    "hrRescaled": 1.876362297496318,
                    "hrScoreFinal": 0.8206,
                    "hrRescaledFinal": 1.9247422680412374,
                    "hrColorFinal": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Nov 03",
                    "rhr": 46,
                    "hrScore": 0.8185142857142857,
                    "hrColor": "#43a047",
                    "hrRescaled": 1.9354933726067747,
                    "hrScoreFinal": 0.8206,
                    "hrRescaledFinal": 1.9247422680412374,
                    "hrColorFinal": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Oct 27",
                    "rhr": 46,
                    "hrScore": 0.8195571428571429,
                    "hrColor": "#43a047",
                    "hrRescaled": 1.9301178203240057,
                    "hrScoreFinal": 0.806,
                    "hrRescaledFinal": 2.0,
                    "hrColorFinal": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Oct 20",
                    "rhr": 50,
                    "hrScore": 0.8435428571428571,
                    "hrColor": "#43a047",
                    "hrRescaled": 1.8064801178203242,
                    "hrScoreFinal": 0.8279000000000001,
                    "hrRescaledFinal": 1.8871134020618554,
                    "hrColorFinal": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Oct 13",
                    "rhr": 52,
                    "hrScore": 0.8637857142857143,
                    "hrColor": "#43a047",
                    "hrRescaled": 1.702135493372607,
                    "hrScoreFinal": 0.8717,
                    "hrRescaledFinal": 1.661340206185567,
                    "hrColorFinal": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Oct 06",
                    "rhr": 48,
                    "hrScore": 0.8299857142857144,
                    "hrColor": "#43a047",
                    "hrRescaled": 1.876362297496318,
                    "hrScoreFinal": 0.8133,
                    "hrRescaledFinal": 1.9623711340206187,
                    "hrColorFinal": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Sep 29",
                    "rhr": 48,
                    "hrScore": 0.8279,
                    "hrColor": "#43a047",
                    "hrRescaled": 1.8871134020618556,
                    "hrScoreFinal": 0.806,
                    "hrRescaledFinal": 2.0,
                    "hrColorFinal": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Sep 22",
                    "rhr": 47,
                    "hrScore": 0.8237285714285715,
                    "hrColor": "#43a047",
                    "hrRescaled": 1.9086156111929309,
                    "hrScoreFinal": 0.8133,
                    "hrRescaledFinal": 1.9623711340206187,
                    "hrColorFinal": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Sep 15",
                    "rhr": 49,
                    "hrScore": 0.8383285714285715,
                    "hrColor": "#43a047",
                    "hrRescaled": 1.833357879234168,
                    "hrScoreFinal": 0.8133,
                    "hrRescaledFinal": 1.9623711340206187,
                    "hrColorFinal": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Sep 08",
                    "rhr": 47,
                    "hrScore": 0.8237285714285715,
                    "hrColor": "#43a047",
                    "hrRescaled": 1.9086156111929307,
                    "hrScoreFinal": 0.806,
                    "hrRescaledFinal": 2.0,
                    "hrColorFinal": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Sep 01",
                    "rhr": 48,
                    "hrScore": 0.8299857142857144,
                    "hrColor": "#43a047",
                    "hrRescaled": 1.876362297496318,
                    "hrScoreFinal": 0.8206,
                    "hrRescaledFinal": 1.9247422680412374,
                    "hrColorFinal": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Aug 25",
                    "rhr": 47,
                    "hrScore": 0.8216428571428572,
                    "hrColor": "#43a047",
                    "hrRescaled": 1.9193667157584684,
                    "hrScoreFinal": 0.8133,
                    "hrRescaledFinal": 1.9623711340206187,
                    "hrColorFinal": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Aug 18",
                    "rhr": 47,
                    "hrScore": 0.8205999999999999,
                    "hrColor": "#43a047",
                    "hrRescaled": 1.9247422680412372,
                    "hrScoreFinal": 0.8133,
                    "hrRescaledFinal": 1.9623711340206187,
                    "hrColorFinal": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Aug 11",
                    "rhr": 46,
                    "hrScore": 0.8195571428571428,
                    "hrColor": "#43a047",
                    "hrRescaled": 1.930117820324006,
                    "hrScoreFinal": 0.806,
                    "hrRescaledFinal": 2.0,
                    "hrColorFinal": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Aug 04",
                    "rhr": 46,
                    "hrScore": 0.8206,
                    "hrColor": "#43a047",
                    "hrRescaled": 1.9247422680412372,
                    "hrScoreFinal": 0.806,
                    "hrRescaledFinal": 2.0,
                    "hrColorFinal": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Jul 28",
                    "rhr": 49,
                    "hrScore": 0.8383285714285715,
                    "hrColor": "#43a047",
                    "hrRescaled": 1.8333578792341678,
                    "hrScoreFinal": 0.8498,
                    "hrRescaledFinal": 1.7742268041237115,
                    "hrColorFinal": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Jul 21",
                    "rhr": 49,
                    "hrScore": 0.8362428571428573,
                    "hrColor": "#43a047",
                    "hrRescaled": 1.8441089837997056,
                    "hrScoreFinal": 0.8498,
                    "hrRescaledFinal": 1.7742268041237115,
                    "hrColorFinal": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Jul 14",
                    "rhr": 46,
                    "hrScore": 0.8174714285714285,
                    "hrColor": "#43a047",
                    "hrRescaled": 1.9408689248895432,
                    "hrScoreFinal": 0.8206,
                    "hrRescaledFinal": 1.9247422680412374,
                    "hrColorFinal": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Jul 07",
                    "rhr": 46,
                    "hrScore": 0.8174714285714286,
                    "hrColor": "#43a047",
                    "hrRescaled": 1.9408689248895432,
                    "hrScoreFinal": 0.806,
                    "hrRescaledFinal": 2.0,
                    "hrColorFinal": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Jun 30",
                    "rhr": 45,
                    "hrScore": 0.8133,
                    "hrColor": "#43a047",
                    "hrRescaled": 1.9623711340206185,
                    "hrScoreFinal": 0.806,
                    "hrRescaledFinal": 2.0,
                    "hrColorFinal": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Jun 23",
                    "rhr": 49,
                    "hrScore": 0.8383285714285714,
                    "hrColor": "#43a047",
                    "hrRescaled": 1.8333578792341678,
                    "hrScoreFinal": 0.8352,
                    "hrRescaledFinal": 1.849484536082474,
                    "hrColorFinal": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Jun 16",
                    "rhr": 49,
                    "hrScore": 0.8351999999999999,
                    "hrColor": "#43a047",
                    "hrRescaled": 1.8494845360824743,
                    "hrScoreFinal": 0.8206,
                    "hrRescaledFinal": 1.9247422680412374,
                    "hrColorFinal": "#43a047",
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ],
            "referenceLines": {
                "worst": {
                    "value": 115.0,
                    "color": "#d32f2f"
                },
                "neutral": {
                    "value": 70.0,
                    "color": "#ffffff"
                },
                "best": {
                    "value": 45.0,
                    "color": "#388e3c"
                }
            }
        },
        "strength": {
            "latestScore": -0.14943120659722253,
            "averageScore": -0.2113112540616291,
            "daily": [
                {
                    "label": "Week of Nov 24",
                    "dailyDuration": 19.35885009765625,
                    "weeklySum": 108.4513834635417,
                    "hrScore": 0.9850568793402777,
                    "hrRescaled": 1.373578016493056,
                    "hrColor": "#c6e2c8",
                    "hrScoreFinal": 0.9850568793402777,
                    "hrRescaledFinal": 1.373578016493056,
                    "hasData": true
                },
                {
                    "label": "Week of Nov 17",
                    "dailyDuration": 18.784838285900296,
                    "weeklySum": 140.4748474121094,
                    "hrScore": 0.9789571719215029,
                    "hrRescaled": 1.5260707019624256,
                    "hrColor": "#afd7b1",
                    "hrScoreFinal": 0.9806678346664186,
                    "hrRescaledFinal": 1.4833041333395345,
                    "hasData": true
                },
                {
                    "label": "Week of Nov 10",
                    "dailyDuration": 21.54606003534226,
                    "weeklySum": 171.87346801757818,
                    "hrScore": 0.9729764822823661,
                    "hrRescaled": 1.675587942940849,
                    "hrColor": "#99cb9b",
                    "hrScoreFinal": 0.9769862056671627,
                    "hrRescaledFinal": 1.575344858320933,
                    "hasData": true
                },
                {
                    "label": "Week of Nov 03",
                    "dailyDuration": 27.49489484514509,
                    "weeklySum": 206.53415091378352,
                    "hrScore": 0.9669419240384955,
                    "hrRescaled": 1.8264518990376106,
                    "hrColor": "#82c085",
                    "hrScoreFinal": 0.9690544259207589,
                    "hrRescaledFinal": 1.7736393519810278,
                    "hasData": true
                },
                {
                    "label": "Week of Oct 27",
                    "dailyDuration": 30.631785365513394,
                    "weeklySum": 166.70679699125748,
                    "hrScore": 0.9739606100969033,
                    "hrRescaled": 1.6509847475774175,
                    "hrColor": "#9dcd9f",
                    "hrScoreFinal": 0.9648719052269344,
                    "hrRescaledFinal": 1.878202369326638,
                    "hasData": true
                },
                {
                    "label": "Week of Oct 20",
                    "dailyDuration": 7.323023623511905,
                    "weeklySum": 34.661944289434544,
                    "hrScore": 1.0031936432645974,
                    "hrRescaled": 0.7773017755279198,
                    "hrColor": "#fdf2f2",
                    "hrScoreFinal": 0.9959502542162698,
                    "hrRescaledFinal": 1.1012436445932545,
                    "hasData": true
                },
                {
                    "label": "Week of Oct 13",
                    "dailyDuration": 14.972945149739584,
                    "weeklySum": 114.89429466610864,
                    "hrScore": 0.9838296581588365,
                    "hrRescaled": 1.4042585460290888,
                    "hrColor": "#c2e0c3",
                    "hrScoreFinal": 0.9857503588479662,
                    "hrRescaledFinal": 1.3562410288008435,
                    "hasData": true
                },
                {
                    "label": "Week of Oct 06",
                    "dailyDuration": 17.926664225260417,
                    "weeklySum": 145.8306565057664,
                    "hrScore": 0.9779370178084255,
                    "hrRescaled": 1.5515745547893631,
                    "hrColor": "#acd5ad",
                    "hrScoreFinal": 0.9818120667472718,
                    "hrRescaledFinal": 1.4546983313182036,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 29",
                    "dailyDuration": 30.501847330729166,
                    "weeklySum": 224.35666213262652,
                    "hrScore": 0.9643489535723143,
                    "hrRescaled": 1.8912761606921416,
                    "hrColor": "#78bb7b",
                    "hrScoreFinal": 0.9650451559399801,
                    "hrRescaledFinal": 1.8738711015004972,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 22",
                    "dailyDuration": 23.46622605096726,
                    "weeklySum": 117.62231619698662,
                    "hrScore": 0.9833100350100977,
                    "hrRescaled": 1.4172491247475558,
                    "hrColor": "#c0dfc1",
                    "hrScoreFinal": 0.974425984312996,
                    "hrRescaledFinal": 1.6393503921750998,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 15",
                    "dailyDuration": 0.0,
                    "weeklySum": 29.518938337053584,
                    "hrScore": 1.0063995604915141,
                    "hrRescaled": 0.6192334482621173,
                    "hrColor": "#fbe5e5",
                    "hrScoreFinal": 1.02,
                    "hrRescaledFinal": 0.0,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 08",
                    "dailyDuration": 17.04795241582961,
                    "weeklySum": 127.73584827241446,
                    "hrScore": 0.9813836479481115,
                    "hrRescaled": 1.465408801297211,
                    "hrColor": "#b9dbba",
                    "hrScoreFinal": 0.9829836824931796,
                    "hrRescaledFinal": 1.4254079376705102,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 01",
                    "dailyDuration": 12.868347749255951,
                    "weeklySum": 86.03494698660718,
                    "hrScore": 0.9893266767644558,
                    "hrRescaled": 1.266833080888605,
                    "hrColor": "#d6ead7",
                    "hrScoreFinal": 0.9885564887152778,
                    "hrRescaledFinal": 1.286087782118055,
                    "hasData": true
                },
                {
                    "label": "Week of Aug 25",
                    "dailyDuration": 12.913033040364581,
                    "weeklySum": 122.83642403738841,
                    "hrScore": 0.9823168716119259,
                    "hrRescaled": 1.4420782097018503,
                    "hrColor": "#bcddbd",
                    "hrScoreFinal": 0.9884969083271329,
                    "hrRescaledFinal": 1.2875772918216777,
                    "hasData": true
                },
                {
                    "label": "Week of Aug 18",
                    "dailyDuration": 33.003515043712795,
                    "weeklySum": 221.8411156063988,
                    "hrScore": 0.9634588351225907,
                    "hrRescaled": 1.9135291219352324,
                    "hrColor": "#75b978",
                    "hrScoreFinal": 0.9617095989893353,
                    "hrRescaledFinal": 1.9572600252666172,
                    "hasData": true
                },
                {
                    "label": "Week of Aug 11",
                    "dailyDuration": 29.963875906808035,
                    "weeklySum": 189.11889590308783,
                    "hrScore": 0.9696916388756024,
                    "hrRescaled": 1.7577090281099415,
                    "hrColor": "#8dc58f",
                    "hrScoreFinal": 0.965762451171875,
                    "hrRescaledFinal": 1.8559387207031248,
                    "hasData": true
                },
                {
                    "label": "Week of Aug 04",
                    "dailyDuration": 23.994455101376484,
                    "weeklySum": 197.92142101469497,
                    "hrScore": 0.9680149674257724,
                    "hrRescaled": 1.799625814355691,
                    "hrColor": "#86c289",
                    "hrScoreFinal": 0.9737216789124503,
                    "hrRescaledFinal": 1.6569580271887414,
                    "hasData": true
                },
                {
                    "label": "Week of Jul 28",
                    "dailyDuration": 25.700404575892858,
                    "weeklySum": 189.01534191313246,
                    "hrScore": 0.9709553747475551,
                    "hrRescaled": 1.7261156313111188,
                    "hrColor": "#91c794",
                    "hrScoreFinal": 0.9714470796130952,
                    "hrRescaledFinal": 1.71382300967262,
                    "hasData": true
                },
                {
                    "label": "Week of Jul 21",
                    "dailyDuration": 15.116369047619047,
                    "weeklySum": 86.67280273437503,
                    "hrScore": 0.9892051804315477,
                    "hrRescaled": 1.2698704892113095,
                    "hrColor": "#d6ead7",
                    "hrScoreFinal": 0.985559126984127,
                    "hrRescaledFinal": 1.3610218253968258,
                    "hasData": true
                },
                {
                    "label": "Week of Jul 14",
                    "dailyDuration": 25.909171549479165,
                    "weeklySum": 163.47173200334825,
                    "hrScore": 0.9745768129517433,
                    "hrRescaled": 1.6355796762064203,
                    "hrColor": "#9fcea1",
                    "hrScoreFinal": 0.9711687236483134,
                    "hrRescaledFinal": 1.7207819087921639,
                    "hasData": true
                },
                {
                    "label": "Week of Jul 07",
                    "dailyDuration": 25.38262416294643,
                    "weeklySum": 175.80017787388397,
                    "hrScore": 0.9722285375478317,
                    "hrRescaled": 1.6942865613042095,
                    "hrColor": "#96ca98",
                    "hrScoreFinal": 0.9718707868303571,
                    "hrRescaledFinal": 1.7032303292410718,
                    "hasData": true
                },
                {
                    "label": "Week of Jun 30",
                    "dailyDuration": 20.09057123093378,
                    "weeklySum": 147.89968319847472,
                    "hrScore": 0.9775429174860049,
                    "hrRescaled": 1.5614270628498796,
                    "hrColor": "#aad4ac",
                    "hrScoreFinal": 0.978926857406374,
                    "hrRescaledFinal": 1.5268285648406503,
                    "hasData": true
                },
                {
                    "label": "Week of Jun 23",
                    "dailyDuration": 22.582798258463544,
                    "weeklySum": 156.52176746186757,
                    "hrScore": 0.975900615721549,
                    "hrRescaled": 1.6024846069612748,
                    "hrColor": "#a4d1a6",
                    "hrScoreFinal": 0.9756038880363342,
                    "hrRescaledFinal": 1.6099027990916435,
                    "hasData": true
                },
                {
                    "label": "Week of Jun 16",
                    "dailyDuration": 0.0,
                    "weeklySum": 127.97036743164065,
                    "hrScore": 0.9813389776320685,
                    "hrRescaled": 1.4665255591982882,
                    "hrColor": "#b8dbba",
                    "hrScoreFinal": 0.9813389776320685,
                    "hrRescaledFinal": 1.4665255591982882,
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ],
            "referenceLines": {
                "worst": {
                    "value": 0.0,
                    "color": "#d32f2f"
                },
                "neutral": {
                    "value": 30.0,
                    "color": "#ffffff"
                },
                "best": {
                    "value": 240.0,
                    "color": "#388e3c"
                }
            }
        },
        "bodyComp": {
            "latestScore": -2.2089873811679492,
            "averageScore": -2.2200396005788035,
            "daily": [
                {
                    "label": "Week of Nov 24",
                    "weight": 90.47,
                    "bodyFat": 18.6,
                    "ffmi": 20.835949524671797,
                    "fmi": 4.761040063377095,
                    "hrScore": 0.779101261883205,
                    "hrColor": "#43a047",
                    "ffm": 73.64258,
                    "fm": 16.827420000000004,
                    "hrScoreFinal": 0.779101261883205,
                    "hrRescaled": 1.849610531218442,
                    "hrRescaledFinal": 1.849610531218442,
                    "hrColorFinal": "#43a047",
                    "fmiHrScore": 0.87,
                    "fmiHrScoreFinal": 0.87,
                    "fmiHrRescaled": 2.0,
                    "fmiHrRescaledFinal": 2.0,
                    "ffmFinal": 73.64258,
                    "fmFinal": 16.827420000000004,
                    "hasData": true
                },
                {
                    "label": "Week of Nov 17",
                    "weight": 90.06814285714286,
                    "bodyFat": 18.42448979591837,
                    "ffmi": 20.78801029069391,
                    "fmi": 4.695280467891095,
                    "hrScore": 0.7802997427326522,
                    "hrColor": "#43a047",
                    "ffm": 73.47314357142857,
                    "fm": 16.594999285714287,
                    "hrScoreFinal": 0.779502779821186,
                    "hrRescaled": 1.8450009894897994,
                    "hrRescaledFinal": 1.848066231456977,
                    "hrColorFinal": "#43a047",
                    "fmiHrScore": 0.87,
                    "fmiHrScoreFinal": 0.87,
                    "fmiHrRescaled": 2.0,
                    "fmiHrRescaledFinal": 2.0,
                    "ffmFinal": 73.585815,
                    "fmFinal": 16.759185000000002,
                    "hasData": true
                },
                {
                    "label": "Week of Nov 10",
                    "weight": 89.33564285714284,
                    "bodyFat": 18.18265306122449,
                    "ffmi": 20.680007538155596,
                    "fmi": 4.59603446533661,
                    "hrScore": 0.7829998115461102,
                    "hrColor": "#43a047",
                    "ffm": 73.09141864285714,
                    "fm": 16.244224214285715,
                    "hrScoreFinal": 0.7822141876980534,
                    "hrRescaled": 1.834616109438038,
                    "hrRescaledFinal": 1.8376377396228716,
                    "hrColorFinal": "#43a047",
                    "fmiHrScore": 0.87,
                    "fmiHrScoreFinal": 0.87,
                    "fmiHrRescaled": 2.0,
                    "fmiHrRescaledFinal": 2.0,
                    "ffmFinal": 73.20248699999999,
                    "fmFinal": 16.366513000000005,
                    "hasData": true
                },
                {
                    "label": "Week of Nov 03",
                    "weight": 89.67382142857143,
                    "bodyFat": 18.349999999999998,
                    "ffmi": 20.71589759627821,
                    "fmi": 4.655826438514519,
                    "hrScore": 0.7821025600930447,
                    "hrColor": "#43a047",
                    "ffm": 73.21826846428573,
                    "fm": 16.455552964285715,
                    "hrScoreFinal": 0.7802648893730194,
                    "hrRescaled": 1.8380670765652127,
                    "hrRescaledFinal": 1.8451350408730023,
                    "hrColorFinal": "#43a047",
                    "fmiHrScore": 0.87,
                    "fmiHrScoreFinal": 0.87,
                    "fmiHrRescaled": 2.0,
                    "fmiHrRescaledFinal": 2.0,
                    "ffmFinal": 73.478071,
                    "fmFinal": 16.384929,
                    "hasData": true
                },
                {
                    "label": "Week of Oct 27",
                    "weight": 88.95737030075189,
                    "bodyFat": 18.27593984962406,
                    "ffmi": 20.569101650650794,
                    "fmi": 4.599914391888788,
                    "hrScore": 0.7857724587337301,
                    "hrColor": "#43a047",
                    "ffm": 72.69943287406015,
                    "fm": 16.257937426691733,
                    "hrScoreFinal": 0.7848414405556813,
                    "hrRescaled": 1.8239520817933454,
                    "hrRescaledFinal": 1.8275329209396873,
                    "hrColorFinal": "#43a047",
                    "fmiHrScore": 0.87,
                    "fmiHrScoreFinal": 0.87,
                    "fmiHrRescaled": 2.0,
                    "fmiHrRescaledFinal": 2.0,
                    "ffmFinal": 72.8310565,
                    "fmFinal": 16.3134435,
                    "hasData": true
                },
                {
                    "label": "Week of Oct 20",
                    "weight": 89.57321052631578,
                    "bodyFat": 18.357894736842105,
                    "ffmi": 20.689850849396016,
                    "fmi": 4.653406995306282,
                    "hrScore": 0.7827537287650996,
                    "hrColor": "#43a047",
                    "ffm": 73.12620884210527,
                    "fm": 16.447001684210527,
                    "hrScoreFinal": 0.7846885982285388,
                    "hrRescaled": 1.835562581672694,
                    "hrRescaledFinal": 1.8281207760440816,
                    "hrColorFinal": "#43a047",
                    "fmiHrScore": 0.87,
                    "fmiHrScoreFinal": 0.87,
                    "fmiHrRescaled": 2.0,
                    "fmiHrRescaledFinal": 2.0,
                    "ffmFinal": 72.8526647368421,
                    "fmFinal": 16.28001947368421,
                    "hasData": true
                },
                {
                    "label": "Week of Oct 13",
                    "weight": 90.60110526315786,
                    "bodyFat": 18.57894736842106,
                    "ffmi": 20.870438665983663,
                    "fmi": 4.7636449870148425,
                    "hrScore": 0.7782390333504084,
                    "hrColor": "#43a047",
                    "ffm": 73.76447842105264,
                    "fm": 16.83662684210526,
                    "hrScoreFinal": 0.7801739028138474,
                    "hrRescaled": 1.8529267948061214,
                    "hrRescaledFinal": 1.84548498917751,
                    "hrColorFinal": "#43a047",
                    "fmiHrScore": 0.87,
                    "fmiHrScoreFinal": 0.87,
                    "fmiHrRescaled": 2.0,
                    "fmiHrRescaledFinal": 2.0,
                    "ffmFinal": 73.49093431578947,
                    "fmFinal": 16.669644631578947,
                    "hasData": true
                },
                {
                    "label": "Week of Oct 06",
                    "weight": 91.35999248120301,
                    "bodyFat": 18.708646616541355,
                    "ffmi": 21.01261999569431,
                    "fmi": 4.836178239141313,
                    "hrScore": 0.7746845001076422,
                    "hrColor": "#43a047",
                    "ffm": 74.26700411278196,
                    "fm": 17.092988368421054,
                    "hrScoreFinal": 0.7756592073991564,
                    "hrRescaled": 1.8665980765090684,
                    "hrRescaledFinal": 1.8628492023109369,
                    "hrColorFinal": "#43a047",
                    "fmiHrScore": 0.87,
                    "fmiHrScoreFinal": 0.87,
                    "fmiHrRescaled": 2.0,
                    "fmiHrRescaledFinal": 2.0,
                    "ffmFinal": 74.12920389473686,
                    "fmFinal": 17.05926978947368,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 29",
                    "weight": 91.59128571428572,
                    "bodyFat": 18.585714285714285,
                    "ffmi": 21.09799840748885,
                    "fmi": 4.816240420681628,
                    "hrScore": 0.7725500398127788,
                    "hrColor": "#43a047",
                    "ffm": 74.56876557142857,
                    "fm": 17.022520142857143,
                    "hrScoreFinal": 0.7729062688622301,
                    "hrRescaled": 1.8748075391816197,
                    "hrRescaledFinal": 1.873437427452961,
                    "hrColorFinal": "#43a047",
                    "fmiHrScore": 0.87,
                    "fmiHrScoreFinal": 0.87,
                    "fmiHrRescaled": 2.0,
                    "fmiHrRescaledFinal": 2.0,
                    "ffmFinal": 74.51840333333334,
                    "fmFinal": 17.064930000000004,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 22",
                    "weight": 91.69864285714286,
                    "bodyFat": 18.714285714285715,
                    "ffmi": 21.08915124005691,
                    "fmi": 4.855462515359245,
                    "hrScore": 0.7727712189985773,
                    "hrColor": "#43a047",
                    "ffm": 74.53749614285714,
                    "fm": 17.161146714285714,
                    "hrScoreFinal": 0.7746903151878678,
                    "hrRescaled": 1.8739568500054724,
                    "hrRescaledFinal": 1.8665757108158931,
                    "hrColorFinal": "#43a047",
                    "fmiHrScore": 0.87,
                    "fmiHrScoreFinal": 0.87,
                    "fmiHrRescaled": 2.0,
                    "fmiHrRescaledFinal": 2.0,
                    "ffmFinal": 74.26618199999999,
                    "fmFinal": 17.269484666666663,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 15",
                    "weight": 91.8643,
                    "bodyFat": 18.5,
                    "ffmi": 21.183088331824358,
                    "fmi": 4.808395371208692,
                    "hrScore": 0.7704227917043911,
                    "hrColor": "#43a047",
                    "ffm": 74.86950740000002,
                    "fm": 16.9947926,
                    "hrScoreFinal": 0.7683891042326844,
                    "hrRescaled": 1.8829892626754192,
                    "hrRescaledFinal": 1.8908111375665986,
                    "hrColorFinal": "#43a047",
                    "fmiHrScore": 0.87,
                    "fmiHrScoreFinal": 0.87,
                    "fmiHrRescaled": 2.0,
                    "fmiHrRescaledFinal": 2.0,
                    "ffmFinal": 75.15702200000001,
                    "fmFinal": 16.721978,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 08",
                    "weight": 91.56391428571429,
                    "bodyFat": 18.914285714285715,
                    "ffmi": 21.006313546853782,
                    "fmi": 4.900180988488651,
                    "hrScore": 0.7748421613286555,
                    "hrColor": "#43a047",
                    "ffm": 74.24471460000002,
                    "fm": 17.31919968571429,
                    "hrScoreFinal": 0.7731343749999999,
                    "hrRescaled": 1.8659916871974789,
                    "hrRescaledFinal": 1.8725600961538464,
                    "hrColorFinal": "#43a047",
                    "fmiHrScore": 0.87,
                    "fmiHrScoreFinal": 0.87,
                    "fmiHrRescaled": 2.0,
                    "fmiHrRescaledFinal": 2.0,
                    "ffmFinal": 74.4861546,
                    "fmFinal": 17.3585454,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 01",
                    "weight": 91.5465,
                    "bodyFat": 19.3,
                    "ffmi": 20.903631592349484,
                    "fmi": 4.997935858985967,
                    "hrScore": 0.7774092101912629,
                    "hrColor": "#43a047",
                    "ffm": 73.88179550000001,
                    "fm": 17.6647045,
                    "hrScoreFinal": 0.7680328697940244,
                    "hrRescaled": 1.856118422341296,
                    "hrRescaledFinal": 1.892181270022983,
                    "hrColorFinal": "#43a047",
                    "fmiHrScore": 0.87,
                    "fmiHrScoreFinal": 0.87,
                    "fmiHrRescaled": 2.0,
                    "fmiHrRescaledFinal": 2.0,
                    "ffmFinal": 75.207385,
                    "fmFinal": 17.071614999999998,
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ],
            "referenceLinesFMI": {
                "worst": {
                    "value": 20.0,
                    "color": "#d32f2f"
                },
                "neutral": {
                    "value": 8.090909090909092,
                    "color": "#ffffff"
                },
                "best": {
                    "value": 6.8,
                    "color": "#388e3c"
                }
            },
            "referenceLinesFFMI": {
                "worst": {
                    "value": 13.0,
                    "color": "#d32f2f"
                },
                "neutral": {
                    "value": 18.0,
                    "color": "#ffffff"
                },
                "best": {
                    "value": 23.0,
                    "color": "#388e3c"
                }
            }
        },
        "scoreBars": {
            "sleep": {
                "recent": {
                    "value": 1.4368749774368448,
                    "displayValue": 0.96611444859245
                },
                "healthspan": {
                    "value": 1.1476468803220283,
                    "displayValue": 1.0116904020765232
                },
                "showRecent": true,
                "showHealthspan": true,
                "source": "SleepHRsRescaled",
                "displaySource": "SleepHRs",
                "components": {
                    "consistency": {
                        "recent": {
                            "value": 1.4425754703099751,
                            "displayValue": 1.0053292574875194
                        },
                        "healthspan": {
                            "value": 1.2662658322513096,
                            "displayValue": 1.0308354086435028
                        },
                        "showRecent": true,
                        "showHealthspan": true,
                        "source": "SleepHRsRescaled",
                        "displaySource": "SleepHRs"
                    },
                    "duration": {
                        "recent": {
                            "value": 1.6021549680796257,
                            "displayValue": 0.9610868488351366
                        },
                        "healthspan": {
                            "value": 1.3741716567265694,
                            "displayValue": 0.9809052915397682
                        },
                        "showRecent": true,
                        "showHealthspan": true,
                        "source": "SleepHRsRescaled",
                        "displaySource": "SleepHRs"
                    }
                }
            },
            "aerobic": {
                "recent": {
                    "value": 1.746984424221932,
                    "displayValue": 0.5746378373426043
                },
                "healthspan": {
                    "value": 1.7704517026281494,
                    "displayValue": 0.5565586851054545
                },
                "showRecent": true,
                "showHealthspan": true,
                "source": "AerobicHRsRescaled",
                "displaySource": "AerobicHRs",
                "components": {
                    "activity": {
                        "recent": {
                            "value": 0.9058796552451661,
                            "displayValue": 1.0235120624737843
                        },
                        "healthspan": {
                            "value": 0.96575792889302,
                            "displayValue": 1.0194359221891498
                        },
                        "showRecent": true,
                        "showHealthspan": true,
                        "source": "AerobicHRsRescaled",
                        "displaySource": "AerobicHRs"
                    }
                }
            },
            "anaerobic": {
                "recent": {
                    "value": 1.8203104462859792,
                    "displayValue": 0.8751958700721562
                },
                "healthspan": {
                    "value": 1.4117911625834219,
                    "displayValue": 0.9277430167065477
                },
                "showRecent": true,
                "showHealthspan": true,
                "source": "AnaerobicHRsRescaled",
                "displaySource": "AnaerobicHRs",
                "components": {
                    "strength": {
                        "recent": {
                            "value": 1.6444667119424812,
                            "displayValue": 0.9742213315223007
                        },
                        "healthspan": {
                            "value": 1.50915704119647,
                            "displayValue": 0.9790680644018857
                        },
                        "showRecent": true,
                        "showHealthspan": true,
                        "source": "AnaerobicHRsRescaled",
                        "displaySource": "AnaerobicHRs"
                    }
                }
            },
            "steps": {
                "recent": {
                    "value": 1.0,
                    "displayValue": 1.0
                },
                "healthspan": {
                    "value": 0.9873941381053484,
                    "displayValue": 0.9873941381053484
                },
                "showRecent": true,
                "showHealthspan": true,
                "source": "StepsDaily",
                "displaySource": "StepsDaily"
            },
            "vo2": {
                "healthspan": {
                    "value": 1.988405797101449,
                    "displayValue": 0.5453333333333334
                },
                "showHealthspan": true
            },
            "rhr": {
                "healthspan": {
                    "value": 1.8811397479954182,
                    "displayValue": 0.8290588888888888
                },
                "showHealthspan": true
            },
            "heartRateActivity": {
                "recent": {
                    "value": 0.9058796552451661,
                    "displayValue": 1.0235120624737843
                },
                "healthspan": {
                    "value": 0.96575792889302,
                    "displayValue": 1.0194359221891498
                },
                "showRecent": true,
                "showHealthspan": true
            }
        }
    },
    "masterScore": {
        "recent": 1.6594002787220052,
        "healthspan": 1.4208697700055335,
        "recentRaw": 0.485878918082325,
        "healthspanRaw": 0.5223796958410808
    }
};

        // Chart.js configuration
        try {
            if (typeof ChartDataLabels !== 'undefined') {
                Chart.register(ChartDataLabels);
            }
            if (typeof ChartAnnotation !== 'undefined') {
                Chart.register(ChartAnnotation);
            }
        } catch (error) {
            console.warn('Chart.js plugin registration failed:', error);
        }

        // Color utility functions
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }

        function rgbToHex(r, g, b) {
            return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
        }

        function getColorForScore(score) {
            if (score >= 1.5) return "#d32f2f";
            if (score >= 1.2) return "#f57c00";
            if (score >= 0.8) return "#ffffff";
            if (score >= 0.5) return "#7cb342";
            return "#388e3c";
        }

        // Helper function to convert time string to minutes from midnight
        function timeToMinutes(timeStr) {
            if (!timeStr) return 0;
            const [hours, minutes] = timeStr.split(':').map(Number);
            return hours * 60 + minutes;
        }

        // Initialize charts and interactions
        function initializeCharts() {
            console.log('initializeCharts called');
            console.log('chartData:', chartData);

            if (chartData && chartData.sleep) {
                console.log('Processing sleep data');
                const sleepData = chartData.sleep;
                createSleepCharts(sleepData);
                updateSleepSummary(sleepData);
            }

            if (chartData && chartData.vo2) {
                const vo2Data = chartData.vo2;
                createVO2Charts(vo2Data);
                updateVO2Summary(vo2Data);
            }

            if (chartData && chartData.steps) {
                const stepsData = chartData.steps;
                createStepsCharts(stepsData);
                updateStepsSummary(stepsData);
            }

            if (chartData && chartData.strength) {
                const strengthData = chartData.strength;
                createStrengthCharts(strengthData);
                updateStrengthSummary(strengthData);
            }

            if (chartData && chartData.bodyComp) {
                const bodyCompData = chartData.bodyComp;
                createBodyCompCharts(bodyCompData);
                updateBodyCompSummary(bodyCompData);
            }

            if (chartData && chartData.rhr) {
                const rhrData = chartData.rhr;
                createRHRCharts(rhrData);
                updateRHRSummary(rhrData);
            }

            if (chartData && chartData.heartRate) {
                const heartRateData = chartData.heartRate;
                createHeartRateCharts(heartRateData);
                updateHeartRateSummary(heartRateData);
            }
        }

        // Summary update functions
        function updateSleepSummary(data) {
            updateSummaryScale('sleep', data.latestScore, data.averageScore, data.colorStops);
        }

        function updateVO2Summary(data) {
            updateSummaryScale('vo2', data.latestScore, data.averageScore, data.colorStops);
        }

        function updateStepsSummary(data) {
            updateSummaryScale('steps', data.latestScore, data.averageScore, data.colorStops);
        }

        function updateStrengthSummary(data) {
            updateSummaryScale('strength', data.latestScore, data.averageScore, data.colorStops);
        }

        function updateBodyCompSummary(data) {
            updateSummaryScale('bodyComp', data.latestScore, data.averageScore, data.colorStops);
        }

        function updateRHRSummary(data) {
            updateSummaryScale('rhr', data.latestScore, data.averageScore, data.colorStops);
        }

        function updateHeartRateSummary(data) {
            updateSummaryScale('heart-rate', data.latestScore, data.averageScore, data.colorStops);
        }

        function updateSummaryScale(metric, latestScore, averageScore, colorStops) {
            console.log('updateSummaryScale called with:', metric, latestScore, averageScore, colorStops);

            const scaleBar = document.querySelector(`#${metric}-summary .score-scale-bar`);
            const lastPointer = document.querySelector(`#${metric}-last-pointer`);
            const avgPointer = document.querySelector(`#${metric}-avg-pointer`);

            console.log('Elements found:', {
                scaleBar: !!scaleBar,
                lastPointer: !!lastPointer,
                avgPointer: !!avgPointer
            });

            if (!scaleBar || !lastPointer || !avgPointer) {
                console.log('Missing elements, returning');
                return;
            }

            // Create gradient background
            const gradient = createGradient(colorStops);
            console.log('Generated gradient:', gradient);
            scaleBar.style.setProperty('background', gradient, 'important');
            console.log('Applied gradient to scaleBar with !important');

            // Position pointers
            const lastPosition = Math.max(0, Math.min(100, (latestScore + 2) * 25));
            const avgPosition = Math.max(0, Math.min(100, (averageScore + 2) * 25));

            lastPointer.style.left = `${lastPosition}%`;
            avgPointer.style.left = `${avgPosition}%`;

            // Set pointer colors
            const lastColor = getColorForScore(latestScore);
            const avgColor = getColorForScore(averageScore);

            lastPointer.style.borderTopColor = lastColor;
            avgPointer.style.borderBottomColor = avgColor;
        }

        function createGradient(colorStops) {
            console.log('createGradient called with colorStops:', colorStops);
            const sortedStops = colorStops.sort((a, b) => b.score - a.score);
            console.log('Sorted stops:', sortedStops);

            // Use a simpler, more reliable gradient format
            const gradient = `linear-gradient(to right,
                #d32f2f 0%,
                #f57c00 25%,
                #ffffff 50%,
                #7cb342 75%,
                #388e3c 100%)`;

            console.log('Generated gradient string:', gradient);
            return gradient;
        }

        
// Tab switching functionality
function switchTab(tabName) {
    // Update navigation buttons
    document.querySelectorAll('.nav-button').forEach(btn => {
        btn.style.backgroundColor = '#333';
        btn.classList.remove('active');
    });
    document.getElementById(tabName + '-nav').style.backgroundColor = '#007bff';
    document.getElementById(tabName + '-nav').classList.add('active');

    // Update tab content visibility
    document.querySelectorAll('.tab-content').forEach(content => {
        content.classList.remove('active');
    });
    document.getElementById(tabName + '-content').classList.add('active');

    // Destroy existing charts before creating new ones
    destroyAllCharts();

    // Re-initialize charts with the new data
    initializeChartsForTab(tabName);
}

// Function to destroy all existing charts
function destroyAllCharts() {
    Chart.helpers.each(Chart.instances, function(instance) {
        instance.destroy();
    });
}

// Function to toggle group expansion
function toggleGroup(groupId) {
    const content = document.getElementById(groupId + '-content');
    const header = document.querySelector(`[onclick="toggleGroup('${groupId}')"]`);
    const arrow = header.querySelector('.expand-arrow');

    if (content.classList.contains('collapsed')) {
        content.classList.remove('collapsed');
        content.classList.add('expanded');
        header.classList.add('expanded');
        arrow.textContent = '‚ñ≤';
    } else {
        content.classList.remove('expanded');
        content.classList.add('collapsed');
        header.classList.remove('expanded');
        arrow.textContent = '‚ñº';
    }
}

// Initialize charts for specific tab
function initializeChartsForTab(tabName) {
    const data = chartData[tabName];
    if (!data) return;

    if (tabName === 'daily-controls') {
        // Daily Controls charts
        if (data.sleep) {
            createSleepCharts(data.sleep);
        }
        if (data.steps) {
            createStepsCharts(data.steps);
        }
        if (data.heartRate) {
            createHeartRateCharts(data.heartRate);
        }
        if (data.strength) {
            createStrengthCharts(data.strength);
        }

        // Update group tickers
        updateGroupTickers('daily-controls', data);
    } else if (tabName === 'healthspan') {
        // HealthSpan charts (weekly aggregated)
        if (data.sleep) {
            createHealthSpanSleepCharts(data.sleep);
        }
        if (data.vo2) {
            createHealthSpanVO2Charts(data.vo2);
        }
        if (data.steps) {
            createHealthSpanStepsCharts(data.steps);
        }
        if (data.heartRate) {
            createHealthSpanHeartRateCharts(data.heartRate);
        }
        if (data.rhr) {
            createHealthSpanRHRCharts(data.rhr);
        }
        if (data.strength) {
            createHealthSpanStrengthCharts(data.strength);
        }
        if (data.bodyComp) {
            createHealthSpanFFMICharts(data.bodyComp);
            createHealthSpanFMICharts(data.bodyComp);
        }

        // Update group tickers
        updateGroupTickers('healthspan', data);
    }
}

const DEFAULT_SCALE = {
    min: 0,
    mid: 1,
    max: 2,
    minColor: '#d32f2f',
    midColor: '#ffffff',
    maxColor: '#43a047',
    fallbackColor: '#616161',
    decimals: 2,
};

const STEP_SCALE = {
    ...DEFAULT_SCALE,
    max: 1,
    maxColor: '#ffffff',
};

const STEP_SUB_SCALE = {
    ...DEFAULT_SCALE,
    max: 1,
    midColor: '#ffffff',
    maxColor: '#ffffff',
};

const PRIMARY_BLUE = '#1e88e5';
const PRIMARY_BLUE_DARK = '#1565c0';
const PRIMARY_BLUE_LIGHT = '#42a5f5';
const PRIMARY_BLUE_PALE = '#90caf9';
const PRIMARY_BLUE_FILL = 'rgba(30, 136, 229, 0.12)';

const STEPS_BAR_TINT_COLOR = PRIMARY_BLUE;
const STEPS_BAR_TINT_RATIO = 0.25;

const SCALE_FALLBACK_COLOR = '#616161';

const DAILY_COLOR_PALETTE = {
    stepsLine: PRIMARY_BLUE_DARK,
    activityLine: PRIMARY_BLUE_DARK,
    strengthLine: PRIMARY_BLUE_DARK,
    strengthBar: PRIMARY_BLUE,
    mpaBar: PRIMARY_BLUE_LIGHT,
    vpaBar: PRIMARY_BLUE_PALE,
};

function getColorForRescaledValue(value, overrides = {}) {
    const config = { ...DEFAULT_SCALE, ...overrides };
    const numericValue = toNumberOrNull(value);
    if (numericValue === null) {
        return config.fallbackColor || SCALE_FALLBACK_COLOR;
    }
    return getScaleColor(numericValue, overrides);
}

function getRescaledValue(entry, finalKey, fallbackKey) {
    if (!entry) {
        return null;
    }
    const finalValue = toNumberOrNull(entry[finalKey]);
    if (finalValue !== null) {
        return finalValue;
    }
    return toNumberOrNull(entry[fallbackKey]);
}

function getScoreValue(entry, finalKey, fallbackKey) {
    if (!entry) {
        return null;
    }
    const finalValue = toNumberOrNull(entry[finalKey]);
    if (finalValue !== null) {
        return finalValue;
    }
    return toNumberOrNull(entry[fallbackKey]);
}

function formatScore(value, decimals = 2) {
    const numericValue = toNumberOrNull(value);
    if (numericValue === null) {
        return '‚Äî';
    }
    return numericValue.toFixed(decimals);
}

function blendColors(color1, color2, ratio = 0.3) {
    if (!color1) return color2;
    if (!color2) return color1;

    const rgb1 = hexToRgb(color1);
    const rgb2 = hexToRgb(color2);

    if (!rgb1 || !rgb2) {
        return color1 || color2;
    }

    const blended = {
        r: Math.round(rgb1.r * (1 - ratio) + rgb2.r * ratio),
        g: Math.round(rgb1.g * (1 - ratio) + rgb2.g * ratio),
        b: Math.round(rgb1.b * (1 - ratio) + rgb2.b * ratio),
    };

    return rgbToHex(blended.r, blended.g, blended.b);
}

function toNumberOrNull(value) {
    if (value === null || value === undefined) {
        return null;
    }
    const numericValue = Number(value);
    return Number.isFinite(numericValue) ? numericValue : null;
}

function clampValue(value, min, max) {
    return Math.min(Math.max(value, min), max);
}

function interpolateColor(startHex, endHex, t) {
    const start = hexToRgb(startHex) || { r: 0, g: 0, b: 0 };
    const end = hexToRgb(endHex) || { r: 255, g: 255, b: 255 };
    const ratio = Math.min(Math.max(t, 0), 1);

    const r = Math.round(start.r + (end.r - start.r) * ratio);
    const g = Math.round(start.g + (end.g - start.g) * ratio);
    const b = Math.round(start.b + (end.b - start.b) * ratio);

    return rgbToHex(r, g, b);
}

function getReadableTextColor(hexColor) {
    const rgb = hexToRgb(hexColor);
    if (!rgb) {
        return '#111111';
    }

    const luminance = (0.2126 * rgb.r + 0.7152 * rgb.g + 0.0722 * rgb.b) / 255;
    return luminance > 0.6 ? '#111111' : '#ffffff';
}

function getScaleColor(rawValue, overrides = {}) {
    const config = { ...DEFAULT_SCALE, ...overrides };
    const value = toNumberOrNull(rawValue);

    if (value === null) {
        return config.fallbackColor;
    }

    const min = config.min;
    const mid = config.mid;
    const max = config.max;
    const minColor = config.minColor;
    const midColor = config.midColor;
    const maxColor = config.maxColor;

    const lowerBound = Math.min(min, max);
    const upperBound = Math.max(min, max);
    const clampedValue = clampValue(value, lowerBound, upperBound);

    if (max === mid) {
        const denominator = mid - min;
        const t = denominator === 0 ? 1 : (clampedValue - min) / denominator;
        return interpolateColor(minColor, midColor, t);
    }

    if (clampedValue <= mid) {
        const denominator = mid - min;
        const t = denominator === 0 ? 0 : (clampedValue - min) / denominator;
        return interpolateColor(minColor, midColor, t);
    }

    const denominator = max - mid;
    const t = denominator === 0 ? 0 : (clampedValue - mid) / denominator;
    return interpolateColor(midColor, maxColor, t);
}

function getScalePosition(rawValue, overrides = {}) {
    const config = { ...DEFAULT_SCALE, ...overrides };
    const value = toNumberOrNull(rawValue);

    if (value === null) {
        return null;
    }

    const min = config.min;
    const max = config.max;

    if (max === min) {
        return 50;
    }

    const lowerBound = Math.min(min, max);
    const upperBound = Math.max(min, max);
    const clampedValue = clampValue(value, lowerBound, upperBound);

    return ((clampedValue - min) / (max - min)) * 100;
}

let markerTooltipElement = null;

function getMarkerTooltipElement() {
    if (!markerTooltipElement) {
        markerTooltipElement = document.createElement('div');
        markerTooltipElement.className = 'scale-marker-tooltip';
        document.body.appendChild(markerTooltipElement);
    }
    return markerTooltipElement;
}

function hideMarkerTooltip() {
    if (!markerTooltipElement) {
        return;
    }
    markerTooltipElement.classList.remove('visible');
}

function formatMarkerTooltip(pointer) {
    const rawValue = (pointer.dataset.tooltipValue || '').trim();
    if (rawValue) {
        return rawValue;
    }
    const rescaledValue = (pointer.dataset.rescaledValue || '').trim();
    return rescaledValue;
}

function positionMarkerTooltip(pointer, event) {
    const tooltip = getMarkerTooltipElement();
    const rect = pointer.getBoundingClientRect();
    const x = event ? event.clientX : rect.left + rect.width / 2;
    const y = event ? event.clientY : rect.top;
    tooltip.style.left = `${x}px`;
    tooltip.style.top = `${y - 12}px`;
}

function attachMarkerTooltip(pointer) {
    if (!pointer || pointer.dataset.markerTooltipAttached === 'true') {
        return;
    }

    pointer.addEventListener('mouseenter', event => {
        const tooltipText = formatMarkerTooltip(pointer);
        const tooltip = getMarkerTooltipElement();
        if (!tooltipText) {
            hideMarkerTooltip();
            return;
        }
        tooltip.textContent = tooltipText;
        positionMarkerTooltip(pointer, event);
        tooltip.classList.add('visible');
    });

    pointer.addEventListener('mousemove', event => {
        if (markerTooltipElement && markerTooltipElement.classList.contains('visible')) {
            positionMarkerTooltip(pointer, event);
        }
    });

    pointer.addEventListener('mouseleave', hideMarkerTooltip);

    pointer.dataset.markerTooltipAttached = 'true';
}

if (typeof window !== 'undefined') {
    window.addEventListener('scroll', hideMarkerTooltip, true);
    window.addEventListener('resize', hideMarkerTooltip);
}

function updatePointer(pointerId, rawValue, overrides = {}, extra = {}) {
    const pointer = document.getElementById(pointerId);
    if (!pointer) {
        return;
    }

    const isMasterPointer = pointer.classList.contains('master-pointer');

    const config = { ...DEFAULT_SCALE, ...overrides };
    const value = toNumberOrNull(rawValue);
    const position = getScalePosition(value, config);

    if (value === null || position === null || Number.isNaN(position)) {
        pointer.classList.add('hidden');
        hideMarkerTooltip();
        return;
    }

    pointer.classList.remove('hidden');

    const anchor = extra.anchor ? Math.max(0, Math.min(100, extra.anchor)) : null;
    const displayOverride = Object.prototype.hasOwnProperty.call(extra, 'displayValue')
        ? toNumberOrNull(extra.displayValue)
        : null;
    if (isMasterPointer && typeof extra.top === 'number') {
        pointer.style.top = `${extra.top}px`;
    }

    const basePosition = anchor !== null ? anchor : position;
    const finalPosition =
        typeof extra.offset === 'number'
            ? basePosition + extra.offset
            : basePosition;

    pointer.dataset.scalePosition = position.toString();
    pointer.style.left = `${Math.max(0, Math.min(100, finalPosition))}%`;

    const color = getScaleColor(value, config);
    const decimals = config.decimals ?? 2;
    const clampedValue = clampValue(value, config.min, config.max);
    const labelValue = displayOverride !== null ? displayOverride : clampedValue;
    const readableColor = getReadableTextColor(color);
    // For tooltip, always prefer displayValue (raw HR) over rescaled value
    // Only fallback to rescaled value if displayValue is truly unavailable
    const tooltipValue =
        displayOverride !== null && !Number.isNaN(displayOverride)
            ? displayOverride
            : value;
    
    // Debug logging for consistency markers
    if (pointer.id && pointer.id.includes('consistency')) {
        console.log('Tooltip value debug:', {
            elementId: pointer.id,
            displayOverride,
            value,
            tooltipValue,
            hasDisplayOverride: displayOverride !== null
        });
    }

    if (isMasterPointer) {
        pointer.style.borderBottomColor = 'transparent';
        pointer.style.borderTopColor = 'transparent';
        const badge = pointer.querySelector('.master-pointer-badge');
        if (badge) {
            badge.style.backgroundColor = color;
            badge.style.color = readableColor;
        }
    } else if (pointer.classList.contains('scale-marker')) {
        const isRecentMarker = pointer.classList.contains('marker-recent');
        const baseLabel =
            pointer.dataset.label ||
            pointer.textContent.trim() ||
            (isRecentMarker ? 'PoA' : 'HS');
        pointer.dataset.label = baseLabel;
        pointer.textContent = baseLabel;
        pointer.dataset.tooltipValue =
            tooltipValue !== null && !Number.isNaN(tooltipValue)
                ? tooltipValue.toFixed(decimals)
                : '';
        pointer.dataset.rescaledValue =
            value !== null && !Number.isNaN(value) ? value.toFixed(decimals) : '';
        pointer.style.backgroundColor = color;
        pointer.style.color = readableColor;
        pointer.style.borderColor = color;
        pointer.removeAttribute('title');
        pointer.removeAttribute('aria-label');
        attachMarkerTooltip(pointer);
    } else if (pointer.classList.contains('pointer-avg')) {
        pointer.style.borderTopColor = color;
        pointer.style.borderBottomColor = 'transparent';
        const label = pointer.querySelector('.pointer-label');
        if (label) {
            label.textContent = labelValue.toFixed(decimals);
            label.style.backgroundColor = color;
            label.style.color = readableColor;
        }
    } else {
        pointer.style.borderBottomColor = color;
        pointer.style.borderTopColor = 'transparent';
        const label = pointer.querySelector('.pointer-label');
        if (label) {
            const valueContainer = label.querySelector('.pointer-label-value');
            const titleContainer = label.querySelector('.pointer-label-title');

            if (valueContainer) {
                valueContainer.textContent = labelValue.toFixed(decimals);
                valueContainer.style.color = readableColor;
            } else {
                label.textContent = labelValue.toFixed(decimals);
            }

            if (titleContainer) {
                titleContainer.style.color = readableColor;
            }

            label.style.backgroundColor = color;
            label.style.color = readableColor;
        }
    }
}

function setTicker(elementId, rawValue, overrides = {}, displayValue = null) {
    const element = document.getElementById(elementId);
    if (!element) {
        return;
    }

    const config = { ...DEFAULT_SCALE, ...overrides };
    const pointerValue = toNumberOrNull(rawValue);
    const displayOverride = toNumberOrNull(displayValue);
    const effectiveValue = pointerValue !== null ? pointerValue : displayOverride;

    if (effectiveValue === null) {
        element.textContent = '‚Äî';
        element.style.backgroundColor = '#424242';
        element.style.color = '#bdbdbd';
        return;
    }

    const clampedValue = clampValue(effectiveValue, config.min, config.max);
    const decimals = config.decimals ?? 2;
    const color = getScaleColor(clampedValue, config);
    const textValue =
        displayOverride !== null ? displayOverride : clampedValue;

    element.textContent = textValue.toFixed(decimals);
    element.style.backgroundColor = color;
    element.style.color = getReadableTextColor(color);
}

function selectMarker(entry, key) {
    if (!entry || !entry[key]) {
        return null;
    }
    const marker = entry[key];
    const pointer = toNumberOrNull(marker.value);
    // Check if displayValue exists AND is not null/undefined
    // If displayValue is missing or null, set display to null (don't fallback to rescaled value)
    // This allows the tooltip to show the rescaled value as a fallback, but we know it's not the raw HR
    const hasDisplay = Object.prototype.hasOwnProperty.call(marker, 'displayValue') &&
                       marker.displayValue !== null &&
                       marker.displayValue !== undefined;
    const display = hasDisplay ? toNumberOrNull(marker.displayValue) : null;

    if (pointer === null && display === null) {
        return null;
    }

    return { pointer, display };
}

function applyMarker(elementId, markerValues, shouldShow, overrides = {}) {
    const element = document.getElementById(elementId);
    if (!element) {
        return;
    }

    if (!shouldShow || !markerValues || markerValues.pointer === null) {
        element.classList.add('hidden');
        return;
    }

    // Debug logging for sleep consistency markers
    if (elementId && elementId.includes('consistency')) {
        console.log('Consistency marker debug:', {
            elementId,
            pointer: markerValues.pointer,
            display: markerValues.display,
            hasDisplay: markerValues.display !== null && markerValues.display !== markerValues.pointer
        });
    }

    updatePointer(elementId, markerValues.pointer, overrides, {
        displayValue: markerValues.display,
    });
}

function updateBarMarkers(baseId, entry, overrides = {}) {
    const showRecent = !!(entry && entry.showRecent);
    const showHealthspan = !!(entry && entry.showHealthspan);

    const recentMarker = selectMarker(entry, 'recent');
    const healthspanMarker = selectMarker(entry, 'healthspan');

    applyMarker(`${baseId}-marker-recent`, recentMarker, showRecent, overrides);
    applyMarker(`${baseId}-marker-healthspan`, healthspanMarker, showHealthspan, overrides);

    if (showRecent && recentMarker && recentMarker.pointer !== null) {
        return recentMarker;
    }

    if (showHealthspan && healthspanMarker && healthspanMarker.pointer !== null) {
        return healthspanMarker;
    }

    return null;
}

function setTickerFromMarker(elementId, marker, overrides = {}) {
    if (!marker) {
        setTicker(elementId, null, overrides, null);
        return;
    }

    const pointerValue = marker.pointer !== null ? marker.pointer : marker.display;
    setTicker(elementId, pointerValue, overrides, marker.display);
}

const DAILY_CONTROLS_BORDER_COLORS = {
    green: '#43a047',
    orange: '#fb8c00',
    red: '#d32f2f',
};

const DEFAULT_GROUP_BORDER_COLOR = '#3a3a3a';

function computeDailyControlsBorderColor(recentValue, healthspanValue) {
    const recent = toNumberOrNull(recentValue);
    const healthspan = toNumberOrNull(healthspanValue);

    if (recent === null || healthspan === null) {
        return DAILY_CONTROLS_BORDER_COLORS.red;
    }

    if (recent > healthspan && recent >= 1) {
        return DAILY_CONTROLS_BORDER_COLORS.green;
    }

    if ((recent > healthspan && recent < 1) || (recent < healthspan && recent > 1)) {
        return DAILY_CONTROLS_BORDER_COLORS.orange;
    }

    return DAILY_CONTROLS_BORDER_COLORS.red;
}

function applyDailyControlsBorder(groupId, recentValue, healthspanValue) {
    const groupElement = document.getElementById(groupId);
    if (!groupElement) {
        return;
    }

    const color = computeDailyControlsBorderColor(recentValue, healthspanValue);
    groupElement.style.borderColor = color;

    const rgb = hexToRgb(color);
    if (rgb) {
        groupElement.style.boxShadow = `0 0 18px rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, 0.35)`;
    } else {
        groupElement.style.boxShadow = '';
    }
}

function updateDailyControlsGroupBorder(groupId, entry) {
    const recentValue =
        entry && entry.recent && Object.prototype.hasOwnProperty.call(entry.recent, 'value')
            ? entry.recent.value
            : null;
    const healthspanValue =
        entry &&
        entry.healthspan &&
        Object.prototype.hasOwnProperty.call(entry.healthspan, 'value')
            ? entry.healthspan.value
            : null;

    applyDailyControlsBorder(groupId, recentValue, healthspanValue);
}

function updateHealthspanGroupBorder(groupId, entry, overrides = {}) {
    const element = document.getElementById(groupId);
    if (!element) {
        return;
    }

    // Use the same logic as daily controls
    const recentValue =
        entry && entry.recent && Object.prototype.hasOwnProperty.call(entry.recent, 'value')
            ? entry.recent.value
            : null;
    const healthspanValue =
        entry &&
        entry.healthspan &&
        Object.prototype.hasOwnProperty.call(entry.healthspan, 'value')
            ? entry.healthspan.value
            : null;

    const color = computeDailyControlsBorderColor(recentValue, healthspanValue);
    element.style.borderColor = color;

    const rgb = hexToRgb(color);
    if (rgb) {
        element.style.boxShadow = `0 0 18px rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, 0.35)`;
    } else {
        element.style.boxShadow = '';
    }
}

function updateGroupTickers(tabName, data) {
    if (!data || !data.scoreBars) {
        return;
    }

    const scoreBars = data.scoreBars;

    if (tabName === 'daily-controls') {
        const sleepMarker = updateBarMarkers('sleep-category', scoreBars.sleep || null);
        setTickerFromMarker('sleep-group-ticker', sleepMarker);
        updateDailyControlsGroupBorder('daily-controls-sleep-group', scoreBars.sleep || null);
        const dailySleepComponents = (scoreBars.sleep && scoreBars.sleep.components) || {};
        updateBarMarkers('daily-sleep-consistency', dailySleepComponents.consistency || null, DEFAULT_SCALE);
        updateBarMarkers('daily-sleep-duration', dailySleepComponents.duration || null);

        const aerobicMarker = updateBarMarkers('aerobic-category', scoreBars.aerobic || null);
        setTickerFromMarker('aerobic-group-ticker', aerobicMarker);
        updateDailyControlsGroupBorder(
            'daily-controls-aerobic-group',
            scoreBars.aerobic || null
        );
        const dailyAerobicComponents = (scoreBars.aerobic && scoreBars.aerobic.components) || {};
        updateBarMarkers('daily-aerobic-activity', dailyAerobicComponents.activity || null);
        updateBarMarkers('daily-steps', scoreBars.steps || null, STEP_SUB_SCALE);

        const anaerobicMarker = updateBarMarkers('anaerobic-category', scoreBars.anaerobic || null);
        setTickerFromMarker('anaerobic-group-ticker', anaerobicMarker);
        updateDailyControlsGroupBorder(
            'daily-controls-anaerobic-group',
            scoreBars.anaerobic || null
        );
        const dailyAnaerobicComponents = (scoreBars.anaerobic && scoreBars.anaerobic.components) || {};
        updateBarMarkers('daily-strength', dailyAnaerobicComponents.strength || null);
    } else if (tabName === 'healthspan') {
        const sleepEntry = scoreBars.sleep || null;
        const sleepMarker = updateBarMarkers('healthspan-sleep-category', sleepEntry);
        setTickerFromMarker('healthspan-sleep-group-ticker', sleepMarker);
        updateHealthspanGroupBorder('healthspan-sleep-group', sleepEntry);

        const sleepComponents = (sleepEntry && sleepEntry.components) || {};
        updateBarMarkers('healthspan-sleep-window', sleepComponents.consistency || null);
        updateBarMarkers('healthspan-sleep-duration', sleepComponents.duration || null);

        const aerobicEntry = scoreBars.aerobic || null;
        const aerobicMarker = updateBarMarkers('healthspan-aerobic-category', aerobicEntry);
        setTickerFromMarker('healthspan-aerobic-group-ticker', aerobicMarker);
        updateHealthspanGroupBorder('healthspan-aerobic-group', aerobicEntry);

        const showAerobicHS = !!(aerobicEntry && aerobicEntry.showHealthspan);
        const showAerobicRecent = !!(aerobicEntry && aerobicEntry.showRecent);
        const aerobicHSMarker = selectMarker(aerobicEntry, 'healthspan');
        const aerobicRecentMarker = selectMarker(aerobicEntry, 'recent');
        applyMarker('healthspan-aerobic-category-marker-recent', aerobicRecentMarker, showAerobicRecent);
        applyMarker('healthspan-aerobic-category-marker-healthspan', aerobicHSMarker, showAerobicHS);
        
        // Use separate markers for VO2, RHR, and heart rate activity
        const vo2Entry = scoreBars.vo2 || null;
        const vo2HSMarker = selectMarker(vo2Entry, 'healthspan');
        const showVo2HS = !!(vo2Entry && vo2Entry.showHealthspan);
        applyMarker('healthspan-vo2-marker-healthspan', vo2HSMarker, showVo2HS);
        
        const rhrEntry = scoreBars.rhr || null;
        const rhrHSMarker = selectMarker(rhrEntry, 'healthspan');
        const showRhrHS = !!(rhrEntry && rhrEntry.showHealthspan);
        applyMarker('healthspan-rhr-marker-healthspan', rhrHSMarker, showRhrHS);
        
        const hrActivityEntry = scoreBars.heartRateActivity || null;
        const hrActivityHSMarker = selectMarker(hrActivityEntry, 'healthspan');
        const hrActivityRecentMarker = selectMarker(hrActivityEntry, 'recent');
        const showHrActivityHS = !!(hrActivityEntry && hrActivityEntry.showHealthspan);
        const showHrActivityRecent = !!(hrActivityEntry && hrActivityEntry.showRecent);
        applyMarker('healthspan-heart-rate-marker-recent', hrActivityRecentMarker, showHrActivityRecent);
        applyMarker('healthspan-heart-rate-marker-healthspan', hrActivityHSMarker, showHrActivityHS);

        updateBarMarkers('healthspan-steps', scoreBars.steps || null, STEP_SCALE);

        const anaerobicEntry = scoreBars.anaerobic || null;
        const anaerobicMarker = updateBarMarkers('healthspan-anaerobic-category', anaerobicEntry);
        setTickerFromMarker('healthspan-anaerobic-group-ticker', anaerobicMarker);
        updateHealthspanGroupBorder('healthspan-anaerobic-group', anaerobicEntry);

        const showAnaerobicHS = !!(anaerobicEntry && anaerobicEntry.showHealthspan);
        const showAnaerobicRecent = !!(anaerobicEntry && anaerobicEntry.showRecent);
        const anaerobicHSMarker = selectMarker(anaerobicEntry, 'healthspan');
        const anaerobicRecentMarker = selectMarker(anaerobicEntry, 'recent');
        applyMarker('healthspan-anaerobic-category-marker-recent', anaerobicRecentMarker, showAnaerobicRecent);
        applyMarker('healthspan-strength-marker-recent', anaerobicRecentMarker, showAnaerobicRecent);
        applyMarker('healthspan-strength-marker-healthspan', anaerobicHSMarker, showAnaerobicHS);
        applyMarker('healthspan-body-comp-marker-healthspan', anaerobicHSMarker, showAnaerobicHS);
    }
}

function combinePointerOffsets(pointers) {
    const MIN_SEPARATION_PCT = 3;

    if (!Array.isArray(pointers) || pointers.length === 0) {
        return {};
    }

    const sorted = pointers
        .map((item, idx) => ({
            id: item.id,
            position: Math.max(0, Math.min(100, item.position)),
            index: idx,
        }))
        .sort((a, b) => a.position - b.position);

    const offsets = {};

    for (let i = 0; i < sorted.length; i += 1) {
        const current = sorted[i];
        let offset = 0;

        if (i > 0) {
            const prev = sorted[i - 1];
            const diff = current.position + offset - prev.position;
            if (diff < MIN_SEPARATION_PCT) {
                offset = prev.position + MIN_SEPARATION_PCT - current.position;
            }
        }

        offsets[current.id] = offset;
    }

    return offsets;
}

function updateMasterScoreOverview(masterScore) {
    const container = document.getElementById('master-score-overview');
    if (!container) {
        return;
    }

    const recentValue = toNumberOrNull(masterScore.recent);
    const healthspanValue = toNumberOrNull(masterScore.healthspan);
    const recentRaw = toNumberOrNull(masterScore.recentRaw);
    const healthspanRaw = toNumberOrNull(masterScore.healthspanRaw);
    const hasData = recentValue !== null || healthspanValue !== null;

    container.style.display = hasData ? '' : 'none';

    const markers = [
        {
            id: 'master-marker-recent',
            value: recentValue,
            raw: recentRaw,
        },
        {
            id: 'master-marker-healthspan',
            value: healthspanValue,
            raw: healthspanRaw,
        },
    ];

    const pointerPositions = markers
        .filter(marker => marker.value !== null)
        .map(marker => ({
            id: marker.id,
            position: getScalePosition(marker.value),
        }));

    const offsets = combinePointerOffsets(pointerPositions);

    markers.forEach(marker => {
        const element = document.getElementById(marker.id);
        if (!element) {
            return;
        }

        if (marker.value === null) {
            element.classList.add('hidden');
            return;
        }

        const anchorPosition =
            pointerPositions.find(position => position.id === marker.id)
                ?.position ?? null;

        updatePointer(marker.id, marker.value, {}, {
            displayValue: marker.raw,
            anchor: anchorPosition,
            offset: offsets[marker.id] || 0,
        });
    });
}

// Override the original initializeCharts to work with new structure
function initializeCharts() {
    console.log('initializeCharts called for new unified report');
    console.log('chartData:', chartData);

    if (chartData && chartData.masterScore) {
        updateMasterScoreOverview(chartData.masterScore);
    }

    // Destroy any existing charts first
    destroyAllCharts();

    // Initialize with daily-controls data by default
    initializeChartsForTab('daily-controls');
}

// Chart creation functions for Daily Controls
function createStepsCharts(data) {
    const stepsCtx = document.getElementById('steps-chart');
    if (!stepsCtx) {
        console.warn('Steps chart canvas not found');
        return;
    }
    if (!data || !data.daily) {
        console.warn('Steps chart data not available');
        return;
    }

    try {
        const reversedDaily = data.daily.slice().reverse();
        const stepsBarColor = reversedDaily.map(() => DAILY_COLOR_PALETTE.mpaBar);
        const stepsLineColor = PRIMARY_BLUE_DARK;
        const labels = reversedDaily.map(d => d.label);
        const referenceLineDatasets = createReferenceLineDatasets(data.referenceLines, labels);

        new Chart(stepsCtx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [
                    ...referenceLineDatasets,
                    {
                        label: 'Daily Steps',
                        data: reversedDaily.map(d => d.dailySteps),
                        backgroundColor: stepsBarColor,
                        borderColor: DAILY_COLOR_PALETTE.mpaBar,
                        borderWidth: 1,
                        borderRadius: 4,
                        borderSkipped: false,
                        order: 1
                    }, {
                        label: '7-Day Rolling Average',
                        data: reversedDaily.map(d => d.rollingAvgSteps),
                        type: 'line',
                        borderColor: stepsLineColor,
                        backgroundColor: PRIMARY_BLUE_FILL,
                        borderWidth: 2,
                        fill: false,
                        tension: 0.4,
                        pointRadius: 4,
                        pointHoverRadius: 6,
                        pointBackgroundColor: reversedDaily.map(d =>
                            getColorForRescaledValue(d.hazardRatioRescaled, STEP_SCALE)
                        ),
                        pointBorderColor: reversedDaily.map(d =>
                            getColorForRescaledValue(d.hazardRatioRescaled, STEP_SCALE)
                        ),
                        pointBorderWidth: 2,
                        order: 99,
                        z: 10
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                animation: false,
                plugins: {
                    legend: { display: false },
                    datalabels: { display: false },
                    tooltip: {
                        callbacks: {
                            title: function(context) {
                                return context[0].label;
                            },
                            label: function(context) {
                                const value = context.parsed.y;
                                return [
                                    `Steps: ${value.toLocaleString()}`,
                                    `Rolling Avg: ${data.daily[context.dataIndex].rollingAvgSteps.toLocaleString()}`
                                ];
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Date'
                        },
                        offset: true,
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Steps'
                        },
                        beginAtZero: true,
                        grid: {
                            display: true
                        },
                        ticks: {
                            callback: function(value) {
                                return value.toLocaleString();
                            }
                        }
                    }
                }
            }
        });
    } catch (error) {
        console.error('Error creating steps chart:', error);
    }
}

function createHeartRateCharts(data) {
    const activityCtx = document.getElementById('heart-rate-activity-chart');
    if (activityCtx && data.daily) {
        const reversedDaily = data.daily.slice().reverse();

        // Use pre-calculated combined rolling average from enricher data
        const activityRollingAvg = reversedDaily.map(d => d.rolling7Day || 0);
        const activityLinePointColors = reversedDaily.map(d =>
            getColorForRescaledValue(d.hazardRatioRescaled)
        );
        const labels = reversedDaily.map(d => d.label);
        const referenceLineDatasets = createReferenceLineDatasets(data.referenceLines, labels);

        // Debug: Log the rolling average data
        console.log('Daily Controls Rolling Average Data:', activityRollingAvg);
        console.log('Sample data point:', reversedDaily[0]);

        new Chart(activityCtx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [
                    ...referenceLineDatasets,
                    {
                        label: 'MPA Time (min)',
                        data: reversedDaily.map(d => d.mpaTime),
                        backgroundColor: DAILY_COLOR_PALETTE.mpaBar,
                        borderColor: DAILY_COLOR_PALETTE.mpaBar,
                        stack: 'activity',
                        order: 1
                    },
                    {
                        label: 'VPA Time (min)',
                        data: reversedDaily.map(d => d.vpaTime),
                        backgroundColor: '#8e24aa',
                        borderColor: '#8e24aa',
                        stack: 'activity',
                        order: 2
                    },
                    {
                        label: 'Activity 7-Day Rolling Avg',
                        data: activityRollingAvg,
                        type: 'line',
                        borderColor: DAILY_COLOR_PALETTE.activityLine,
                    backgroundColor: PRIMARY_BLUE_FILL,
                        borderWidth: 2,
                        fill: false,
                        tension: 0.4,
                        pointRadius: 4,
                        pointHoverRadius: 6,
                        pointBackgroundColor: activityLinePointColors,
                        pointBorderColor: activityLinePointColors,
                        pointBorderWidth: 2,
                        order: 99,
                        z: 10
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: true },
                    datalabels: { display: false }
                },
                scales: {
                    x: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Date'
                        },
                        offset: true,
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Minutes'
                        },
                        beginAtZero: true,
                        stacked: true,
                        grid: {
                            display: true
                        }
                    }
                }
            }
        });
    }
}

function createStrengthCharts(data) {
    const strengthCtx = document.getElementById('strength-chart');
    if (strengthCtx && data.daily) {
        const reversedDaily = data.daily.slice().reverse();

        // Use pre-calculated rolling average from enricher data
        const strengthRollingAvg = reversedDaily.map(d => d.weeklySum || 0);
        const strengthLinePointColors = reversedDaily.map(d =>
            getColorForRescaledValue(d.hrRescaled)
        );
        const labels = reversedDaily.map(d => d.label);
        const referenceLineDatasets = createReferenceLineDatasets(data.referenceLines, labels);

        // Debug: Log the strength rolling average data
        console.log('Strength Rolling Average Data:', strengthRollingAvg);
        console.log('Sample strength data point:', reversedDaily[0]);

        new Chart(strengthCtx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [
                    ...referenceLineDatasets,
                    {
                        label: 'Strength Training (minutes)',
                        data: reversedDaily.map(d => d.dailyDuration),
                        backgroundColor: reversedDaily.map(() => DAILY_COLOR_PALETTE.mpaBar),
                        borderColor: DAILY_COLOR_PALETTE.mpaBar,
                        borderWidth: 1,
                        borderRadius: 4,
                        borderSkipped: false,
                        order: 1
                    }, {
                        label: '7-Day Rolling Average',
                        data: strengthRollingAvg,
                        type: 'line',
                        borderColor: PRIMARY_BLUE_DARK,
                        backgroundColor: PRIMARY_BLUE_FILL,
                        borderWidth: 2,
                        fill: false,
                        tension: 0.4,
                        pointRadius: 4,
                        pointHoverRadius: 6,
                        pointBackgroundColor: strengthLinePointColors,
                        pointBorderColor: strengthLinePointColors,
                        pointBorderWidth: 2,
                        order: 99,
                        z: 10
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                animation: false,
                layout: {
                    padding: {
                        left: 10,
                        right: 10,
                        top: 10,
                        bottom: 10
                    }
                },
                plugins: {
                    legend: { display: false },
                    datalabels: { display: false },
                    tooltip: {
                        callbacks: {
                            title: function(context) {
                                return context[0].label;
                            },
                            label: function(context) {
                                const value = context.parsed.y;
                                const weeklySum = data.daily[context.dataIndex].weeklySum;
                                return [
                                    `Duration: ${Math.round(value * 10) / 10} min`,
                                    `Weekly Total: ${Math.round(weeklySum * 10) / 10} min`
                                ];
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Date'
                        },
                        offset: true,
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Minutes'
                        },
                        beginAtZero: true,
                        grid: {
                            display: true
                        },
                        ticks: {
                            callback: function(value) {
                                return Math.round(value);
                            }
                        }
                    }
                }
            }
        });
    }
}

// Helper function to create reference line datasets for charts
function createReferenceLineDatasets(referenceLines, labels) {
    console.log('createReferenceLineDatasets called with:', referenceLines);
    if (!referenceLines) {
        console.log('No referenceLines provided');
        return [];
    }
    if (!referenceLines.worst || !referenceLines.neutral || !referenceLines.best) {
        console.log('ReferenceLines missing required keys:', {
            worst: !!referenceLines.worst,
            neutral: !!referenceLines.neutral,
            best: !!referenceLines.best
        });
        return [];
    }
    
    const datasets = [];
    const dataPoints = labels.map(() => null); // Create array with nulls for each label
    
    // Worst line (red)
    if (referenceLines.worst && referenceLines.worst.value !== undefined && referenceLines.worst.value !== null) {
        datasets.push({
            type: 'line',
            label: 'Worst',
            data: labels.map(() => referenceLines.worst.value),
            borderColor: referenceLines.worst.color || '#d32f2f',
            backgroundColor: 'transparent',
            borderWidth: 1,
            borderDash: [5, 5],
            pointRadius: 0,
            pointHoverRadius: 0,
            fill: false,
            tension: 0,
            order: 0, // Render behind main data
            yAxisID: 'y'
        });
    }
    
    // Neutral line (white)
    if (referenceLines.neutral && referenceLines.neutral.value !== undefined && referenceLines.neutral.value !== null) {
        datasets.push({
            type: 'line',
            label: 'Neutral',
            data: labels.map(() => referenceLines.neutral.value),
            borderColor: referenceLines.neutral.color || '#ffffff',
            backgroundColor: 'transparent',
            borderWidth: 1,
            borderDash: [5, 5],
            pointRadius: 0,
            pointHoverRadius: 0,
            fill: false,
            tension: 0,
            order: 0,
            yAxisID: 'y'
        });
    }
    
    // Best line (green)
    if (referenceLines.best && referenceLines.best.value !== undefined && referenceLines.best.value !== null) {
        datasets.push({
            type: 'line',
            label: 'Best',
            data: labels.map(() => referenceLines.best.value),
            borderColor: referenceLines.best.color || '#388e3c',
            backgroundColor: 'transparent',
            borderWidth: 1,
            borderDash: [5, 5],
            pointRadius: 0,
            pointHoverRadius: 0,
            fill: false,
            tension: 0,
            order: 0,
            yAxisID: 'y'
        });
    }
    
    return datasets;
}

function createSleepCharts(data) {
    console.log('createSleepCharts called with data:', data);
    console.log('Reference lines in sleep data:', data.referenceLines);
    // Sleep windows chart
    const sleepWindowsCtx = document.getElementById('sleep-windows-chart');
    if (sleepWindowsCtx && data.daily) {
        const reversedDaily = data.daily.slice().reverse();

        // Process sleep data to create proper sleep window visualization
        const sleepWindows = reversedDaily.map((d, index) => {
            const rescaledValue = d.consistencyRescaled;
            const barColor = getColorForRescaledValue(rescaledValue);

            if (!d.sleepTime || !d.wakeTime) {
                return {
                    y: index,
                    x: 12 * 60,
                    width: 0,
                    color: barColor,
                    rescaled: rescaledValue,
                    sleepTime: d.sleepTime,
                    wakeTime: d.wakeTime
                };
            }

            let sleepMinutes = timeToMinutes(d.sleepTime);
            let wakeMinutes = timeToMinutes(d.wakeTime);

            let sleepRelativeToMidday, wakeRelativeToMidday;

            if (sleepMinutes >= 12 * 60) {
                sleepRelativeToMidday = sleepMinutes - (12 * 60) - (12 * 60);
            } else {
                sleepRelativeToMidday = sleepMinutes;
            }

            if (wakeMinutes >= 12 * 60) {
                wakeRelativeToMidday = wakeMinutes - (12 * 60) - (12 * 60);
            } else {
                wakeRelativeToMidday = wakeMinutes;
            }

            if (sleepMinutes >= 12 * 60 && wakeMinutes < 12 * 60) {
                // Normal overnight sleep
            }

            const duration = wakeRelativeToMidday - sleepRelativeToMidday;

            return {
                y: index,
                x: sleepRelativeToMidday,
                width: duration,
                color: barColor,
                rescaled: rescaledValue,
                sleepTime: d.sleepTime,
                wakeTime: d.wakeTime
            };
        });

        new Chart(sleepWindowsCtx, {
            type: 'bar',
            data: {
                labels: sleepWindows.map((_, i) => reversedDaily[i].label),
                datasets: [{
                    label: 'Sleep Periods',
                    data: sleepWindows.map(w => ({
                        x: [w.x, w.x + w.width],
                        y: w.y
                    })),
                    backgroundColor: sleepWindows.map(w => w.color),
                    borderColor: sleepWindows.map(w => w.color),
                    borderWidth: 2,
                    barThickness: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                plugins: {
                    legend: { display: false },
                    datalabels: { display: false },
                    tooltip: {
                        callbacks: {
                            title: function(context) {
                                return context[0].label;
                            },
                            label: function(context) {
                                const entry = reversedDaily[context.dataIndex] || {};
                                const lines = [];

                                if (entry.sleepTime) {
                                    lines.push(`Sleep Time: ${entry.sleepTime}`);
                                }

                                if (entry.wakeTime) {
                                    lines.push(`Wake Time: ${entry.wakeTime}`);
                                }

                                const consistencyValue = toNumberOrNull(entry.consistencyScore);
                                if (consistencyValue !== null) {
                                    lines.push(`Sleep Consistency Index: ${consistencyValue.toFixed(2)}`);
                                }

                                const durationValue = entry.sleepDuration;
                                if (typeof durationValue === 'number' && !Number.isNaN(durationValue)) {
                                    lines.push(`Duration: ${durationValue.toFixed(2)}h`);
                                }

                                if (!lines.length) {
                                    lines.push('No data');
                                }

                                return lines;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Time of Day (Midday to Midday)'
                        },
                        min: -12 * 60,
                        max: 12 * 60,
                        type: 'linear',
                        ticks: {
                            stepSize: 180,
                            callback: function(value) {
                                let actualMinutes;
                                if (value <= 0) {
                                    actualMinutes = value + (12 * 60) + (12 * 60);
                                } else {
                                    actualMinutes = value;
                                }

                                let hours = Math.floor(actualMinutes / 60);
                                const minutes = actualMinutes % 60;

                                if (hours >= 24) hours -= 24;
                                if (hours < 0) hours += 24;

                                return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
                            }
                        }
                    },
                    y: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Date'
                        },
                        type: 'category'
                    }
                }
            }
        });
    }

    // Sleep duration chart
    const sleepDurationCtx = document.getElementById('sleep-duration-chart');
    if (sleepDurationCtx && data.daily) {
        const reversedDaily = data.daily.slice().reverse();
        const durationColors = reversedDaily.map(d =>
            getColorForRescaledValue(d.durationRescaled)
        );

        const labels = reversedDaily.map(d => d.label);
        const referenceLineDatasets = createReferenceLineDatasets(data.referenceLines, labels);

        new Chart(sleepDurationCtx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [
                    {
                        label: 'Sleep Duration (hours)',
                        data: reversedDaily.map(d => d.sleepDuration),
                        backgroundColor: durationColors,
                        borderColor: durationColors,
                        borderWidth: 1,
                        borderRadius: 4,
                        borderSkipped: false,
                        order: 1 // Render on top of reference lines
                    },
                    ...referenceLineDatasets
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    datalabels: { display: false },
                    tooltip: {
                        callbacks: {
                            title: function(context) {
                                return context.length ? context[0].label : '';
                            },
                            label: function(context) {
                                const durationValue = context.parsed.y;
                                if (typeof durationValue === 'number' && !Number.isNaN(durationValue)) {
                                    return `Duration: ${durationValue.toFixed(2)}h`;
                                }
                                return 'No data';
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Date'
                        },
                        offset: true,
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Hours'
                        },
                        beginAtZero: true,
                        grid: {
                            display: true
                        }
                    }
                }
            }
        });
    }
}

// HealthSpan chart creation functions (weekly aggregated data)
function createHealthSpanSleepCharts(data) {
    // Sleep windows chart for weekly data
    const sleepWindowsCtx = document.getElementById('healthspan-sleep-windows-chart');
    if (sleepWindowsCtx && data.daily) {
        const reversedDaily = data.daily.slice().reverse();
        const sleepWindows = reversedDaily.map((d, index) => {
            const consistencyRescaled = getRescaledValue(
                d,
                'consistencyRescaledFinal',
                'consistencyRescaled'
            );
            const consistencyScore = getScoreValue(
                d,
                'consistencyScoreFinal',
                'consistencyScore'
            );
            const sleepHrScore = getScoreValue(
                d,
                'sleepHrScoreFinal',
                'consistencyScore'
            );

            if (!d.sleepTime || !d.wakeTime) {
                return {
                    y: index,
                    x: 12 * 60,
                    width: 0,
                    color: SCALE_FALLBACK_COLOR,
                    sleepTime: d.sleepTime,
                    wakeTime: d.wakeTime,
                    consistencyScore,
                    sleepHrScore,
                    consistencyRescaled,
                };
            }

            let sleepMinutes = timeToMinutes(d.sleepTime);
            let wakeMinutes = timeToMinutes(d.wakeTime);

            let sleepRelativeToMidday, wakeRelativeToMidday;

            if (sleepMinutes >= 12 * 60) {
                sleepRelativeToMidday = sleepMinutes - (12 * 60) - (12 * 60);
            } else {
                sleepRelativeToMidday = sleepMinutes;
            }

            if (wakeMinutes >= 12 * 60) {
                wakeRelativeToMidday = wakeMinutes - (12 * 60) - (12 * 60);
            } else {
                wakeRelativeToMidday = wakeMinutes;
            }

            if (sleepMinutes >= 12 * 60 && wakeMinutes < 12 * 60) {
                // Normal overnight sleep
            }

            const duration = wakeRelativeToMidday - sleepRelativeToMidday;

            return {
                y: index,
                x: sleepRelativeToMidday,
                width: duration,
                color: getColorForRescaledValue(consistencyRescaled),
                sleepTime: d.sleepTime,
                wakeTime: d.wakeTime,
                consistencyScore,
                sleepHrScore,
                consistencyRescaled,
            };
        });

        new Chart(sleepWindowsCtx, {
            type: 'bar',
            data: {
                labels: reversedDaily.map(d => d.label),
                datasets: [{
                    label: 'Sleep Periods',
                    data: sleepWindows.map(w => ({
                        x: [w.x, w.x + w.width],
                        y: w.y
                    })),
                    backgroundColor: sleepWindows.map(w => w.color),
                    borderColor: sleepWindows.map(w => w.color),
                    borderWidth: 2,
                    barThickness: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                plugins: {
                    legend: { display: false },
                    datalabels: { display: false },
                    tooltip: {
                        callbacks: {
                            title: function(context) {
                                return context[0].label;
                            },
                            label: function(context) {
                                const window = sleepWindows[context.dataIndex];
                                const duration = Math.round(window.width / 60 * 10) / 10;
                                const lines = [
                                    `Sleep: ${window.sleepTime}`,
                                    `Wake: ${window.wakeTime}`,
                                    `Duration: ${duration}h`
                                ];
                                const consistencyScore = toNumberOrNull(window.consistencyScore);
                                if (consistencyScore !== null) {
                                    lines.push(`Sleep Consistency (final day): ${formatScore(consistencyScore)}`);
                                }
                                const sleepHrScore = toNumberOrNull(window.sleepHrScore);
                                if (sleepHrScore !== null) {
                                    lines.push(`SleepHR (final day): ${formatScore(sleepHrScore)}`);
                                }
                                return lines;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Time of Day (Midday to Midday)'
                        },
                        min: -12 * 60,
                        max: 12 * 60,
                        type: 'linear',
                        ticks: {
                            stepSize: 180,
                            callback: function(value) {
                                let actualMinutes;
                                if (value <= 0) {
                                    actualMinutes = value + (12 * 60) + (12 * 60);
                                } else {
                                    actualMinutes = value;
                                }

                                let hours = Math.floor(actualMinutes / 60);
                                const minutes = actualMinutes % 60;

                                if (hours >= 24) hours -= 24;
                                if (hours < 0) hours += 24;

                                return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
                            }
                        }
                    },
                    y: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Week'
                        },
                        type: 'category'
                    }
                }
            }
        });
    }

    // Sleep duration chart for weekly data
    const sleepDurationCtx = document.getElementById('healthspan-sleep-duration-chart');
    if (sleepDurationCtx && data.daily) {
        const reversedDaily = data.daily.slice().reverse();
        const durationColors = reversedDaily.map(d =>
            getColorForRescaledValue(
                getRescaledValue(d, 'durationRescaledFinal', 'durationRescaled')
            )
        );
        const labels = reversedDaily.map(d => d.label);
        const referenceLineDatasets = createReferenceLineDatasets(data.referenceLines, labels);

        new Chart(sleepDurationCtx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [
                    {
                        label: 'Sleep Duration (hours)',
                        data: reversedDaily.map(d => d.sleepDuration),
                        backgroundColor: durationColors,
                        borderColor: durationColors,
                        borderWidth: 1,
                        borderRadius: 4,
                        borderSkipped: false,
                        order: 1
                    },
                    ...referenceLineDatasets
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    datalabels: { display: false },
                    tooltip: {
                        callbacks: {
                            title: function(context) {
                                return context.length ? context[0].label : '';
                            },
                            label: function(context) {
                                const entry = reversedDaily[context.dataIndex];
                                const lines = [];
                                const durationValue = context.parsed.y;
                                if (typeof durationValue === 'number' && !Number.isNaN(durationValue)) {
                                    lines.push(`Duration: ${durationValue.toFixed(2)}h`);
                                }
                                const durationScore = getScoreValue(
                                    entry,
                                    'durationScoreFinal',
                                    'durationScore'
                                );
                                if (durationScore !== null) {
                                    lines.push(`Sleep Duration Score (final day): ${formatScore(durationScore)}`);
                                }
                                const durationRescaled = getRescaledValue(
                                    entry,
                                    'durationRescaledFinal',
                                    'durationRescaled'
                                );
                                if (durationRescaled !== null) {
                                    lines.push(`Sleep Duration Rescaled: ${formatScore(durationRescaled)}`);
                                }
                                return lines.length ? lines : ['No data'];
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Week'
                        },
                        offset: true,
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Hours'
                        },
                        beginAtZero: true,
                        grid: {
                            display: true
                        }
                    }
                }
            }
        });
    }
}

function createHealthSpanVO2Charts(data) {
    const vo2Ctx = document.getElementById('healthspan-vo2-chart');
    if (vo2Ctx && data.daily) {
        const reversedDaily = data.daily.slice().reverse();
        const pointColors = reversedDaily.map(d =>
            getColorForRescaledValue(
                getRescaledValue(d, 'hrRescaledFinal', 'hrRescaled')
            )
        );
        const labels = reversedDaily.map(d => d.date);
        const referenceLineDatasets = createReferenceLineDatasets(data.referenceLines, labels);

        new Chart(vo2Ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [
                    ...referenceLineDatasets,
                    {
                        label: 'VO2 Max',
                        data: reversedDaily.map(d => d.vo2),
                        borderColor: '#FF9800',
                        backgroundColor: 'rgba(255, 152, 0, 0.1)',
                        fill: true,
                        pointBackgroundColor: pointColors,
                        pointBorderColor: pointColors,
                        pointRadius: 5,
                        pointHoverRadius: 7,
                        tension: 0.2,
                        order: 1
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    datalabels: { display: false },
                    tooltip: {
                        callbacks: {
                            title: function(context) {
                                return context.length ? context[0].label : '';
                            },
                            label: function(context) {
                                const entry = reversedDaily[context.dataIndex];
                                const lines = [`VO2 Max: ${context.formattedValue}`];
                                const hrScore = getScoreValue(entry, 'hrFinal', 'hr');
                                if (hrScore !== null) {
                                    lines.push(`Hazard Ratio (final day): ${formatScore(hrScore)}`);
                                }
                                return lines;
                            }
                        }
                    }
                }
            }
        });
    }
}

function createHealthSpanStepsCharts(data) {
    const stepsCtx = document.getElementById('healthspan-steps-chart');
    if (stepsCtx && data.daily) {
        const reversedDaily = data.daily.slice().reverse();
        const barColors = reversedDaily.map(d =>
            getColorForRescaledValue(
                getRescaledValue(d, 'hazardRatioRescaledFinal', 'hazardRatioRescaled'),
                STEP_SCALE
            )
        );
        const labels = reversedDaily.map(d => d.label);
        const referenceLineDatasets = createReferenceLineDatasets(data.referenceLines, labels);

        new Chart(stepsCtx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [
                    ...referenceLineDatasets,
                    {
                        label: 'Weekly Steps',
                        data: reversedDaily.map(d => d.dailySteps),
                        backgroundColor: barColors,
                        borderColor: barColors,
                        borderWidth: 1,
                        borderRadius: 4,
                        borderSkipped: false,
                        order: 1
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                animation: false,
                plugins: {
                    legend: { display: false },
                    datalabels: { display: false },
                    tooltip: {
                        callbacks: {
                            title: function(context) {
                                return context[0].label;
                            },
                            label: function(context) {
                                const value = context.parsed.y;
                                const entry = reversedDaily[context.dataIndex];
                                const rollingAvg = entry.rollingAvgSteps || 0;
                                const hazardRatio = getScoreValue(
                                    entry,
                                    'hazardRatioFinal',
                                    'hazardRatio'
                                );
                                const lines = [
                                    `Steps: ${value.toLocaleString()}`,
                                    `Rolling Avg: ${rollingAvg.toLocaleString()}`
                                ];
                                if (hazardRatio !== null) {
                                    lines.push(`Hazard Ratio (final day): ${formatScore(hazardRatio)}`);
                                }
                                return lines;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Week'
                        },
                        offset: true,
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Steps'
                        },
                        beginAtZero: true,
                        grid: {
                            display: true
                        },
                        ticks: {
                            callback: function(value) {
                                return value.toLocaleString();
                            }
                        }
                    }
                }
            }
        });
    }
}

function createHealthSpanHeartRateCharts(data) {
    const activityCtx = document.getElementById('healthspan-heart-rate-activity-chart');
    if (activityCtx && data.daily) {
        const reversedDaily = data.daily.slice().reverse();

        // Use pre-calculated combined rolling average from enricher data
        const activityRollingAvg = reversedDaily.map(d => d.rolling7Day || 0);
        const linePointColors = reversedDaily.map(d =>
            getColorForRescaledValue(
                getRescaledValue(d, 'hazardRatioRescaledFinal', 'hazardRatioRescaled')
            )
        );
        const labels = reversedDaily.map(d => d.label);
        const referenceLineDatasets = createReferenceLineDatasets(data.referenceLines, labels);

        // Debug: Log the rolling average data
        console.log('Healthspan Rolling Average Data:', activityRollingAvg);
        console.log('Sample data point:', reversedDaily[0]);

        new Chart(activityCtx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [
                    ...referenceLineDatasets,
                    {
                        label: 'MPA Time (min)',
                        data: reversedDaily.map(d => d.mpaTime),
                        backgroundColor: '#4CAF50',
                        stack: 'activity'
                    },
                    {
                        label: 'VPA Time (min)',
                        data: reversedDaily.map(d => d.vpaTime),
                        backgroundColor: '#FF9800',
                        stack: 'activity'
                    },
                    {
                        label: 'Activity 7-Day Rolling Avg',
                        type: 'line',
                        data: activityRollingAvg,
                        borderColor: '#2196F3',
                        backgroundColor: 'rgba(33, 150, 243, 0.1)',
                        fill: false,
                        pointRadius: 4,
                        pointHoverRadius: 6,
                        pointBackgroundColor: linePointColors,
                        pointBorderColor: linePointColors,
                        tension: 0.1,
                        order: 99,
                        z: 10
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: true },
                    datalabels: { display: false },
                    tooltip: {
                        callbacks: {
                            title: function(context) {
                                return context[0].label;
                            },
                            label: function(context) {
                                const entry = reversedDaily[context.dataIndex];
                                const datasetLabel = context.dataset.label || '';
                                const lines = [`${datasetLabel}: ${context.formattedValue}`];
                                if (context.dataset.type === 'line') {
                                    const hazardRatio = getScoreValue(
                                        entry,
                                        'hazardRatioFinal',
                                        'hazardRatio'
                                    );
                                    if (hazardRatio !== null) {
                                        lines.push(`Hazard Ratio (final day): ${formatScore(hazardRatio)}`);
                                    }
                                }
                                return lines;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Week'
                        },
                        offset: true,
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Minutes'
                        },
                        beginAtZero: true,
                        stacked: true,
                        grid: {
                            display: true
                        }
                    }
                },
                interaction: {
                    intersect: false,
                    mode: 'index'
                }
            }
        });
    }
}

function createHealthSpanRHRCharts(data) {
    const rhrCtx = document.getElementById('healthspan-rhr-chart');
    if (rhrCtx && data.daily) {
        const reversedDaily = data.daily.slice().reverse();
        const pointColors = reversedDaily.map(d =>
            getColorForRescaledValue(
                getRescaledValue(d, 'hrRescaledFinal', 'hrRescaled')
            )
        );
        const labels = reversedDaily.map(d => d.label);
        const referenceLineDatasets = createReferenceLineDatasets(data.referenceLines, labels);

        new Chart(rhrCtx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [
                    ...referenceLineDatasets,
                    {
                        label: 'Resting Heart Rate (BPM)',
                        data: reversedDaily.map(d => d.rhr),
                        borderColor: '#E91E63',
                        backgroundColor: 'rgba(233, 30, 99, 0.1)',
                        fill: true,
                        pointBackgroundColor: pointColors,
                        pointBorderColor: pointColors,
                        pointRadius: 4,
                        pointHoverRadius: 6,
                        tension: 0.15,
                        order: 1
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    datalabels: { display: false },
                    tooltip: {
                        callbacks: {
                            title: function(context) {
                                return context.length ? context[0].label : '';
                            },
                            label: function(context) {
                                const entry = reversedDaily[context.dataIndex];
                                const lines = [`Resting HR: ${context.formattedValue} bpm`];
                                const hazardRatio = getScoreValue(
                                    entry,
                                    'hrScoreFinal',
                                    'hrScore'
                                );
                                if (hazardRatio !== null) {
                                    lines.push(`Hazard Ratio (final day): ${formatScore(hazardRatio)}`);
                                }
                                return lines;
                            }
                        }
                    }
                }
            }
        });
    }
}

function createHealthSpanStrengthCharts(data) {
    const strengthCtx = document.getElementById('healthspan-strength-chart');
    if (strengthCtx && data.daily) {
        const reversedDaily = data.daily.slice().reverse();
        const barColors = reversedDaily.map(d =>
            getColorForRescaledValue(
                getRescaledValue(d, 'hrRescaledFinal', 'hrRescaled')
            )
        );
        const labels = reversedDaily.map(d => d.label);
        const referenceLineDatasets = createReferenceLineDatasets(data.referenceLines, labels);

        new Chart(strengthCtx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [
                    ...referenceLineDatasets,
                    {
                        label: 'Strength Training (minutes)',
                        data: reversedDaily.map(d => d.dailyDuration),
                        backgroundColor: barColors,
                        borderColor: barColors,
                        borderWidth: 1,
                        borderRadius: 4,
                        borderSkipped: false,
                        order: 1
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                animation: false,
                plugins: {
                    legend: { display: false },
                    datalabels: { display: false },
                    tooltip: {
                        callbacks: {
                            title: function(context) {
                                return context[0].label;
                            },
                            label: function(context) {
                                const value = context.parsed.y;
                                const entry = reversedDaily[context.dataIndex];
                                const weeklySum = entry.weeklySum || 0;
                                const hazardRatio = getScoreValue(
                                    entry,
                                    'hrScoreFinal',
                                    'hrScore'
                                );
                                const lines = [
                                    `Duration: ${Math.round(value * 10) / 10} min`,
                                    `Weekly Total: ${Math.round(weeklySum * 10) / 10} min`
                                ];
                                if (hazardRatio !== null) {
                                    lines.push(`Hazard Ratio (final day): ${formatScore(hazardRatio)}`);
                                }
                                return lines;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Week'
                        },
                        offset: true,
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Minutes'
                        },
                        beginAtZero: true,
                        grid: {
                            display: true
                        },
                        ticks: {
                            callback: function(value) {
                                return Math.round(value);
                            }
                        }
                    }
                }
            }
        });
    }
}

function createHealthSpanFFMICharts(data) {
    const ffmiCtx = document.getElementById('healthspan-ffmi-chart');
    if (ffmiCtx && data.daily) {
        const reversedDaily = data.daily.slice().reverse();
        const ffmiValues = reversedDaily.map(d => {
            const value = d.ffmi ?? (d.ffmiFinal !== undefined ? d.ffmiFinal : null);
            return toNumberOrNull(value);
        });
        const ffmiColors = reversedDaily.map(d =>
            getColorForRescaledValue(
                getRescaledValue(d, 'hrRescaledFinal', 'hrRescaled')
            )
        );
        const labels = reversedDaily.map(d => d.label);
        const referenceLineDatasets = createReferenceLineDatasets(data.referenceLinesFFMI, labels);

        new Chart(ffmiCtx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [
                    ...referenceLineDatasets,
                    {
                        label: 'FFMI',
                        data: ffmiValues,
                        borderColor: PRIMARY_BLUE_DARK,
                        backgroundColor: PRIMARY_BLUE_FILL,
                        pointBackgroundColor: ffmiColors,
                        pointBorderColor: ffmiColors,
                        pointRadius: 4,
                        pointHoverRadius: 6,
                        fill: false,
                        tension: 0.15,
                        spanGaps: true,
                        order: 1
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    datalabels: { display: false },
                    tooltip: {
                        callbacks: {
                            title: function(context) {
                                return context.length ? context[0].label : '';
                            },
                            label: function(context) {
                                const entry = reversedDaily[context.dataIndex];
                                const lines = [`FFMI: ${context.formattedValue}`];
                                const hrScore = getScoreValue(entry, 'hrScoreFinal', 'hrScore');
                                if (hrScore !== null) {
                                    lines.push(`FFMI Hazard Ratio (final day): ${formatScore(hrScore)}`);
                                }
                                return lines;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Week'
                        },
                        offset: true,
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        type: 'linear',
                        display: true,
                        title: {
                            display: true,
                            text: 'FFMI'
                        },
                        beginAtZero: false
                    }
                }
            }
        });
    }
}

function createHealthSpanFMICharts(data) {
    const fmiCtx = document.getElementById('healthspan-fmi-chart');
    if (fmiCtx && data.daily) {
        const reversedDaily = data.daily.slice().reverse();
        const fmiValues = reversedDaily.map(d => {
            const value = d.fmi ?? (d.fmiFinal !== undefined ? d.fmiFinal : null);
            return toNumberOrNull(value);
        });
        const fmiColors = reversedDaily.map(d =>
            getColorForRescaledValue(
                getRescaledValue(d, 'fmiHrRescaledFinal', 'fmiHrRescaled')
            )
        );
        const labels = reversedDaily.map(d => d.label);
        const referenceLineDatasets = createReferenceLineDatasets(data.referenceLinesFMI, labels);

        new Chart(fmiCtx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [
                    ...referenceLineDatasets,
                    {
                        label: 'FMI',
                        data: fmiValues,
                        borderColor: '#9C27B0',
                        backgroundColor: 'rgba(156, 39, 176, 0.12)',
                        pointBackgroundColor: fmiColors,
                        pointBorderColor: fmiColors,
                        pointRadius: 4,
                        pointHoverRadius: 6,
                        fill: false,
                        tension: 0.15,
                        spanGaps: true,
                        order: 1
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    datalabels: { display: false },
                    tooltip: {
                        callbacks: {
                            title: function(context) {
                                return context.length ? context[0].label : '';
                            },
                            label: function(context) {
                                const entry = reversedDaily[context.dataIndex];
                                const lines = [`FMI: ${context.formattedValue}`];
                                const hrScore = getScoreValue(entry, 'fmiHrScoreFinal', 'fmiHrScore');
                                if (hrScore !== null) {
                                    lines.push(`FMI Hazard Ratio (final day): ${formatScore(hrScore)}`);
                                }
                                return lines;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Week'
                        },
                        offset: true,
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        type: 'linear',
                        display: true,
                        title: {
                            display: true,
                            text: 'FMI'
                        },
                        beginAtZero: false
                    }
                }
            }
        });
    }
}

// Add event listeners for tab switching
document.addEventListener('DOMContentLoaded', function() {
    // Add click handlers for navigation buttons
    document.getElementById('daily-controls-nav').addEventListener('click', function(e) {
        e.preventDefault();
        switchTab('daily-controls');
    });

    document.getElementById('healthspan-nav').addEventListener('click', function(e) {
        e.preventDefault();
        switchTab('healthspan');
    });
});


        // Event listeners for summary item clicks
        document.addEventListener('DOMContentLoaded', function() {
            initializeCharts();

            // Add click listeners to summary items
            document.querySelectorAll('.summary-item').forEach(item => {
                item.addEventListener('click', function() {
                    const detailsId = this.id.replace('-summary', '-details');
                    const details = document.getElementById(detailsId);
                    if (details) {
                        details.classList.toggle('visible');
                    }
                });
            });

            // Tab switching functionality
            const navButtons = document.querySelectorAll('.nav-button');
            navButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();

                    // Get the tab name from button ID
                    const tabName = this.id.replace('-nav', '');

                    // Call the switchTab function if it exists (defined in unified template)
                    if (typeof switchTab === 'function') {
                        switchTab(tabName);
                    } else {
                        // Fallback for non-unified templates
                        navButtons.forEach(btn => btn.style.backgroundColor = '#333');
                        this.style.backgroundColor = '#007bff';

                        // Navigate to the appropriate report type
                        const currentDate = document.getElementById('current-date').textContent || new Date().toISOString().split('T')[0];

                        // Construct URL based on report type and current date
                        let baseUrl = window.location.origin + window.location.pathname;
                        // Remove current report type from path if present
                        baseUrl = baseUrl.replace(/\/report_(daily|weekly|monthly)\//, '/');

                        const newUrl = `${baseUrl}report_${tabName}/${currentDate}/`;
                        window.location.href = newUrl;
                    }
                });
            });

            // Date navigation functionality
            const prevButton = document.getElementById('prev-day');
            const nextButton = document.getElementById('next-day');
            const currentDateSpan = document.getElementById('current-date');

            // Initialize current date display
            if (currentDateSpan && !currentDateSpan.textContent) {
                const today = new Date();
                currentDateSpan.textContent = today.toISOString().split('T')[0];
            }

            if (prevButton) {
                prevButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    navigateDate(-1);
                });
            }

            if (nextButton) {
                nextButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    navigateDate(1);
                });
            }

            function navigateDate(direction) {
                const currentDateStr = currentDateSpan.textContent;
                if (!currentDateStr) return;

                const currentDate = new Date(currentDateStr);
                const newDate = new Date(currentDate);
                newDate.setDate(currentDate.getDate() + direction);

                const newDateStr = newDate.toISOString().split('T')[0];
                currentDateSpan.textContent = newDateStr;

                // Update URL to reflect new date
                const currentPath = window.location.pathname;
                const pathParts = currentPath.split('/');

                // Find and replace the date part
                for (let i = 0; i < pathParts.length; i++) {
                    if (pathParts[i].match(/^\d{4}-\d{2}-\d{2}$/)) {
                        pathParts[i] = newDateStr;
                        break;
                    }
                }

                const newUrl = pathParts.join('/');
                window.location.href = newUrl;
            }
        });
    </script>
</body>
</html>