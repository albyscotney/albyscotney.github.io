<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1/dist/chartjs-plugin-annotation.min.js"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #121212; color: #e0e0e0; margin: 0; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; }
        h1, h2, h3 { color: #ffffff; font-weight: 500; }
        .metric-wrapper { margin-bottom: 20px; }

        .summary-item {
            background-color: #1e1e1e;
            padding: 20px 25px 30px;
            border-radius: 12px;
            border: 1px solid #333;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;

            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 190px;
        }

        .summary-item:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4); }

        .summary-item h2 {
            margin: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .score-scale-container {
            position: relative;
            height: 80px;
            margin: 0;
            flex-shrink: 0;
        }

        .scale-wrapper {
            position: relative;
            height: 100%;
            margin: 0 45px;
        }

        .score-scale-bar { position: absolute; top: 50%; transform: translateY(-50%); width: 100%; height: 10px; border-radius: 5px; }
        .scale-pointer { position: absolute; transform: translateX(-50%); width: 0; height: 0; border-left: 8px solid transparent; border-right: 8px solid transparent; }

        .pointer-avg { top: 5px; border-bottom: 12px solid; }
        .pointer-last { top: 63px; border-top: 12px solid; }

        .pointer-label {
            font-size: 0.8em;
            color: #ccc;
            background-color: rgba(0,0,0,0.8);
            padding: 3px 6px;
            border-radius: 4px;
            white-space: nowrap;
        }

        .pointer-avg .pointer-label { position: absolute; bottom: 14px; transform: translateX(-50%); }
        .pointer-last .pointer-label { position: absolute; top: 14px; transform: translateX(-50%); }

        .details-container { display: none; flex-direction: column; gap: 30px; margin-top: 20px; }
        .details-container.visible { display: flex; }
        .chart-wrapper { background-color: #1e1e1e; padding: 20px; border-radius: 12px; border: 1px solid #333; }
        .chart-subtitle { margin-top: -10px; margin-bottom: 20px; font-size: 0.9em; color: #999; }
        canvas { max-width: 100% !important; height: auto !important; }
        .vo2-chart-container { position: relative; }
        .vo2-gradient-bg { position: absolute; top: 0; left: 0; right: 0; bottom: 0; pointer-events: none; border-radius: 8px; z-index: 1; }
        #vo2-max-chart { position: relative; z-index: 2; }
        
        /* Tab functionality */
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .nav-button.active { background-color: #007bff !important; }
    </style>
</head>
<body>
    <div class="container" id="main-container">
        
<h1>Health Analysis</h1>

<!-- Navigation Buttons -->
<div class="navigation-container" style="margin-bottom: 30px; text-align: center;">
    <div class="nav-buttons" style="display: inline-flex; gap: 10px; background-color: #1e1e1e; padding: 10px; border-radius: 8px; border: 1px solid #333;">
        <a href="#" id="daily-nav" class="nav-button active" style="padding: 8px 16px; background-color: #007bff; color: #fff; text-decoration: none; border-radius: 4px; transition: background-color 0.2s;">Daily</a>
        <a href="#" id="weekly-nav" class="nav-button" style="padding: 8px 16px; background-color: #333; color: #fff; text-decoration: none; border-radius: 4px; transition: background-color 0.2s;">Weekly</a>
        <a href="#" id="monthly-nav" class="nav-button" style="padding: 8px 16px; background-color: #333; color: #fff; text-decoration: none; border-radius: 4px; transition: background-color 0.2s;">Monthly</a>
    </div>
    <div class="date-nav" style="margin-top: 10px;">
        <a href="#" id="prev-day" class="date-nav-button" style="padding: 6px 12px; background-color: #1e1e1e; color: #fff; text-decoration: none; border-radius: 4px; border: 1px solid #333; margin-right: 5px;">‚Üê Previous</a>
        <span id="current-date" style="color: #aaa; margin: 0 10px;"></span>
        <a href="#" id="next-day" class="date-nav-button" style="padding: 6px 12px; background-color: #1e1e1e; color: #fff; text-decoration: none; border-radius: 4px; border: 1px solid #333; margin-left: 5px;">Next ‚Üí</a>
    </div>
</div>

<!-- Tab Content Container -->
<div id="tab-content">
    <!-- Daily Tab -->
    <div id="daily-content" class="tab-content active">
        <div class="metric-wrapper">
    <div id="sleep-summary" class="summary-item">
        <h2>Sleep üò¥</h2>
        <div class="score-scale-container">
            <div class="scale-wrapper">
                <div class="score-scale-bar"></div>
                <div id="sleep-last-pointer" class="scale-pointer pointer-last"><div class="pointer-label">Last</div></div>
                <div id="sleep-avg-pointer" class="scale-pointer pointer-avg"><div class="pointer-label">Avg</div></div>
            </div>
        </div>
    </div>
    <div id="sleep-details" class="details-container">
        <div class="chart-wrapper"><h3>Sleep Windows</h3><p class="chart-subtitle">Sleep periods showing time in bed. Color indicates sleep consistency.</p><div style="height: 300px; position: relative;"><canvas id="sleep-windows-chart"></canvas></div></div>
        <div class="chart-wrapper"><h3>Sleep Duration</h3><p class="chart-subtitle">Total hours slept each day.</p><div style="height: 300px; position: relative;"><canvas id="sleep-duration-chart"></canvas></div></div>
    </div>
</div>

<div class="metric-wrapper">
    <div id="vo2-summary" class="summary-item">
        <h2>VO2 Max üí™</h2>
        <div class="score-scale-container">
            <div class="scale-wrapper">
                <div class="score-scale-bar"></div>
                <div id="vo2-last-pointer" class="scale-pointer pointer-last"><div class="pointer-label">Last</div></div>
                <div id="vo2-avg-pointer" class="scale-pointer pointer-avg"><div class="pointer-label">Avg</div></div>
            </div>
        </div>
    </div>
    <div id="vo2-details" class="details-container">
        <div class="chart-wrapper">
            <h3>VO2 Max Trend</h3>
            <p class="chart-subtitle">Your estimated VO2 max over time. Higher is better.</p>
            <div class="vo2-chart-container">
            <canvas id="vo2-max-chart"></canvas>
                <div id="vo2-gradient-bg" class="vo2-gradient-bg"></div>
            </div>
            <div id="vo2-zones-data" style="display: none;"></div>
        </div>
    </div>
</div>

<div class="metric-wrapper">
    <div id="steps-summary" class="summary-item">
        <h2>Daily Steps üö∂</h2>
        <div class="score-scale-container">
            <div class="scale-wrapper">
                <div class="score-scale-bar"></div>
                <div id="steps-last-pointer" class="scale-pointer pointer-last"><div class="pointer-label">Last</div></div>
                <div id="steps-avg-pointer" class="scale-pointer pointer-avg"><div class="pointer-label">Avg</div></div>
            </div>
        </div>
    </div>
    <div id="steps-details" class="details-container">
                <div class="chart-wrapper">
                    <h3>Daily Steps</h3>
                    <p class="chart-subtitle">Daily steps. Color indicates health risk based on steps.</p>
                    <div style="position: relative; width: 100%; height: 300px;">
                        <canvas id="steps-chart"></canvas>
                    </div>
                </div>
    </div>
</div>

<div class="metric-wrapper">
    <div id="strength-summary" class="summary-item">
        <h2>Strength Training üí™</h2>
        <div class="score-scale-container">
            <div class="scale-wrapper">
                <div class="score-scale-bar"></div>
                <div id="strength-last-pointer" class="scale-pointer pointer-last"><div class="pointer-label">Last</div></div>
                <div id="strength-avg-pointer" class="scale-pointer pointer-avg"><div class="pointer-label">Avg</div></div>
            </div>
        </div>
    </div>
    <div id="strength-details" class="details-container">
                <div class="chart-wrapper">
                    <h3>Strength Training</h3>
                    <p class="chart-subtitle">Daily strength training duration with 7-day rolling sum. Color indicates heart rate multiplier based on weekly volume.</p>
                    <div style="position: relative; width: 100%; height: 300px;">
                        <canvas id="strength-chart"></canvas>
                    </div>
                </div>
    </div>
</div>

<div class="metric-wrapper">
    <div id="bodyComp-summary" class="summary-item">
        <h2>Body Composition üèãÔ∏è</h2>
        <div class="score-scale-container">
            <div class="scale-wrapper">
                <div class="score-scale-bar"></div>
                <div id="bodyComp-last-pointer" class="scale-pointer pointer-last"><div class="pointer-label">Last</div></div>
                <div id="bodyComp-avg-pointer" class="scale-pointer pointer-avg"><div class="pointer-label">Avg</div></div>
            </div>
        </div>
    </div>
    <div id="bodyComp-details" class="details-container">
        <div class="chart-wrapper">
            <h3>Body Composition Trends</h3>
            <p class="chart-subtitle">Weight, body fat percentage, FFMI, and FMI over time. Color indicates health risk based on FFMI.</p>
            <div style="height: 300px; position: relative;">
                <canvas id="bodyComp-chart"></canvas>
            </div>
        </div>
    </div>
</div>

<div class="metric-wrapper">
    <div id="rhr-summary" class="summary-item">
        <h2>Resting Heart Rate ‚ù§Ô∏è</h2>
        <div class="score-scale-container">
            <div class="scale-wrapper">
                <div class="score-scale-bar"></div>
                <div id="rhr-last-pointer" class="scale-pointer pointer-last"><div class="pointer-label">Last</div></div>
                <div id="rhr-avg-pointer" class="scale-pointer pointer-avg"><div class="pointer-label">Avg</div></div>
            </div>
        </div>
    </div>
    <div id="rhr-details" class="details-container">
        <div class="chart-wrapper">
            <h3>Resting Heart Rate Trends</h3>
            <p class="chart-subtitle">Daily resting heart rate in BPM over time. Color indicates health risk based on hazard ratios.</p>
            <div style="height: 300px; position: relative;">
                <canvas id="rhr-chart"></canvas>
            </div>
        </div>
    </div>
</div>

<div class="metric-wrapper">
    <div id="heart-rate-summary" class="summary-item">
        <h2>Heart Rate Activity üíì</h2>
        <div class="score-scale-container">
            <div class="scale-wrapper">
                <div class="score-scale-bar"></div>
                <div id="heart-rate-last-pointer" class="scale-pointer pointer-last"><div class="pointer-label">Last</div></div>
                <div id="heart-rate-avg-pointer" class="scale-pointer pointer-avg"><div class="pointer-label">Avg</div></div>
            </div>
        </div>
    </div>
    <div id="heart-rate-details" class="details-container">
        <div class="chart-wrapper">
            <h3>Activity Time Distribution</h3>
            <p class="chart-subtitle">Time spent in moderate (MPA) and vigorous (VPA) physical activity. Shows adjusted VPA time and 7-day rolling average.</p>
            <div style="height: 300px; position: relative;">
                <canvas id="heart-rate-activity-chart"></canvas>
            </div>
        </div>
        <div class="chart-wrapper">
            <h3>Hazard Ratio Trend</h3>
            <p class="chart-subtitle">Health risk score based on physical activity levels. Lower is better.</p>
            <div style="height: 300px; position: relative;">
                <canvas id="heart-rate-hr-chart"></canvas>
            </div>
        </div>
    </div>
</div>
    </div>
    
    <!-- Weekly Tab -->
    <div id="weekly-content" class="tab-content">
        <div class="metric-wrapper">
    <div id="sleep-summary" class="summary-item">
        <h2>Sleep üò¥</h2>
        <div class="score-scale-container">
            <div class="scale-wrapper">
                <div class="score-scale-bar"></div>
                <div id="sleep-last-pointer" class="scale-pointer pointer-last"><div class="pointer-label">Last</div></div>
                <div id="sleep-avg-pointer" class="scale-pointer pointer-avg"><div class="pointer-label">Avg</div></div>
            </div>
        </div>
    </div>
    <div id="sleep-details" class="details-container">
        <div class="chart-wrapper"><h3>Sleep Windows</h3><p class="chart-subtitle">Sleep periods showing time in bed. Color indicates sleep consistency.</p><div style="height: 300px; position: relative;"><canvas id="sleep-windows-chart"></canvas></div></div>
        <div class="chart-wrapper"><h3>Sleep Duration</h3><p class="chart-subtitle">Total hours slept each day.</p><div style="height: 300px; position: relative;"><canvas id="sleep-duration-chart"></canvas></div></div>
    </div>
</div>

<div class="metric-wrapper">
    <div id="vo2-summary" class="summary-item">
        <h2>VO2 Max üí™</h2>
        <div class="score-scale-container">
            <div class="scale-wrapper">
                <div class="score-scale-bar"></div>
                <div id="vo2-last-pointer" class="scale-pointer pointer-last"><div class="pointer-label">Last</div></div>
                <div id="vo2-avg-pointer" class="scale-pointer pointer-avg"><div class="pointer-label">Avg</div></div>
            </div>
        </div>
    </div>
    <div id="vo2-details" class="details-container">
        <div class="chart-wrapper">
            <h3>VO2 Max Trend</h3>
            <p class="chart-subtitle">Your estimated VO2 max over time. Higher is better.</p>
            <div class="vo2-chart-container">
            <canvas id="vo2-max-chart"></canvas>
                <div id="vo2-gradient-bg" class="vo2-gradient-bg"></div>
            </div>
            <div id="vo2-zones-data" style="display: none;"></div>
        </div>
    </div>
</div>

<div class="metric-wrapper">
    <div id="steps-summary" class="summary-item">
        <h2>Daily Steps üö∂</h2>
        <div class="score-scale-container">
            <div class="scale-wrapper">
                <div class="score-scale-bar"></div>
                <div id="steps-last-pointer" class="scale-pointer pointer-last"><div class="pointer-label">Last</div></div>
                <div id="steps-avg-pointer" class="scale-pointer pointer-avg"><div class="pointer-label">Avg</div></div>
            </div>
        </div>
    </div>
    <div id="steps-details" class="details-container">
                <div class="chart-wrapper">
                    <h3>Daily Steps</h3>
                    <p class="chart-subtitle">Daily steps. Color indicates health risk based on steps.</p>
                    <div style="position: relative; width: 100%; height: 300px;">
                        <canvas id="steps-chart"></canvas>
                    </div>
                </div>
    </div>
</div>

<div class="metric-wrapper">
    <div id="strength-summary" class="summary-item">
        <h2>Strength Training üí™</h2>
        <div class="score-scale-container">
            <div class="scale-wrapper">
                <div class="score-scale-bar"></div>
                <div id="strength-last-pointer" class="scale-pointer pointer-last"><div class="pointer-label">Last</div></div>
                <div id="strength-avg-pointer" class="scale-pointer pointer-avg"><div class="pointer-label">Avg</div></div>
            </div>
        </div>
    </div>
    <div id="strength-details" class="details-container">
                <div class="chart-wrapper">
                    <h3>Strength Training</h3>
                    <p class="chart-subtitle">Daily strength training duration with 7-day rolling sum. Color indicates heart rate multiplier based on weekly volume.</p>
                    <div style="position: relative; width: 100%; height: 300px;">
                        <canvas id="strength-chart"></canvas>
                    </div>
                </div>
    </div>
</div>

<div class="metric-wrapper">
    <div id="bodyComp-summary" class="summary-item">
        <h2>Body Composition üèãÔ∏è</h2>
        <div class="score-scale-container">
            <div class="scale-wrapper">
                <div class="score-scale-bar"></div>
                <div id="bodyComp-last-pointer" class="scale-pointer pointer-last"><div class="pointer-label">Last</div></div>
                <div id="bodyComp-avg-pointer" class="scale-pointer pointer-avg"><div class="pointer-label">Avg</div></div>
            </div>
        </div>
    </div>
    <div id="bodyComp-details" class="details-container">
        <div class="chart-wrapper">
            <h3>Body Composition Trends</h3>
            <p class="chart-subtitle">Weight, body fat percentage, FFMI, and FMI over time. Color indicates health risk based on FFMI.</p>
            <div style="height: 300px; position: relative;">
                <canvas id="bodyComp-chart"></canvas>
            </div>
        </div>
    </div>
</div>

<div class="metric-wrapper">
    <div id="rhr-summary" class="summary-item">
        <h2>Resting Heart Rate ‚ù§Ô∏è</h2>
        <div class="score-scale-container">
            <div class="scale-wrapper">
                <div class="score-scale-bar"></div>
                <div id="rhr-last-pointer" class="scale-pointer pointer-last"><div class="pointer-label">Last</div></div>
                <div id="rhr-avg-pointer" class="scale-pointer pointer-avg"><div class="pointer-label">Avg</div></div>
            </div>
        </div>
    </div>
    <div id="rhr-details" class="details-container">
        <div class="chart-wrapper">
            <h3>Resting Heart Rate Trends</h3>
            <p class="chart-subtitle">Daily resting heart rate in BPM over time. Color indicates health risk based on hazard ratios.</p>
            <div style="height: 300px; position: relative;">
                <canvas id="rhr-chart"></canvas>
            </div>
        </div>
    </div>
</div>

<div class="metric-wrapper">
    <div id="heart-rate-summary" class="summary-item">
        <h2>Heart Rate Activity üíì</h2>
        <div class="score-scale-container">
            <div class="scale-wrapper">
                <div class="score-scale-bar"></div>
                <div id="heart-rate-last-pointer" class="scale-pointer pointer-last"><div class="pointer-label">Last</div></div>
                <div id="heart-rate-avg-pointer" class="scale-pointer pointer-avg"><div class="pointer-label">Avg</div></div>
            </div>
        </div>
    </div>
    <div id="heart-rate-details" class="details-container">
        <div class="chart-wrapper">
            <h3>Activity Time Distribution</h3>
            <p class="chart-subtitle">Time spent in moderate (MPA) and vigorous (VPA) physical activity. Shows adjusted VPA time and 7-day rolling average.</p>
            <div style="height: 300px; position: relative;">
                <canvas id="heart-rate-activity-chart"></canvas>
            </div>
        </div>
        <div class="chart-wrapper">
            <h3>Hazard Ratio Trend</h3>
            <p class="chart-subtitle">Health risk score based on physical activity levels. Lower is better.</p>
            <div style="height: 300px; position: relative;">
                <canvas id="heart-rate-hr-chart"></canvas>
            </div>
        </div>
    </div>
</div>
    </div>
    
    <!-- Monthly Tab -->
    <div id="monthly-content" class="tab-content">
        <div class="metric-wrapper">
    <div id="sleep-summary" class="summary-item">
        <h2>Sleep üò¥</h2>
        <div class="score-scale-container">
            <div class="scale-wrapper">
                <div class="score-scale-bar"></div>
                <div id="sleep-last-pointer" class="scale-pointer pointer-last"><div class="pointer-label">Last</div></div>
                <div id="sleep-avg-pointer" class="scale-pointer pointer-avg"><div class="pointer-label">Avg</div></div>
            </div>
        </div>
    </div>
    <div id="sleep-details" class="details-container">
        <div class="chart-wrapper"><h3>Sleep Windows</h3><p class="chart-subtitle">Sleep periods showing time in bed. Color indicates sleep consistency.</p><div style="height: 300px; position: relative;"><canvas id="sleep-windows-chart"></canvas></div></div>
        <div class="chart-wrapper"><h3>Sleep Duration</h3><p class="chart-subtitle">Total hours slept each day.</p><div style="height: 300px; position: relative;"><canvas id="sleep-duration-chart"></canvas></div></div>
    </div>
</div>

<div class="metric-wrapper">
    <div id="vo2-summary" class="summary-item">
        <h2>VO2 Max üí™</h2>
        <div class="score-scale-container">
            <div class="scale-wrapper">
                <div class="score-scale-bar"></div>
                <div id="vo2-last-pointer" class="scale-pointer pointer-last"><div class="pointer-label">Last</div></div>
                <div id="vo2-avg-pointer" class="scale-pointer pointer-avg"><div class="pointer-label">Avg</div></div>
            </div>
        </div>
    </div>
    <div id="vo2-details" class="details-container">
        <div class="chart-wrapper">
            <h3>VO2 Max Trend</h3>
            <p class="chart-subtitle">Your estimated VO2 max over time. Higher is better.</p>
            <div class="vo2-chart-container">
            <canvas id="vo2-max-chart"></canvas>
                <div id="vo2-gradient-bg" class="vo2-gradient-bg"></div>
            </div>
            <div id="vo2-zones-data" style="display: none;"></div>
        </div>
    </div>
</div>

<div class="metric-wrapper">
    <div id="steps-summary" class="summary-item">
        <h2>Daily Steps üö∂</h2>
        <div class="score-scale-container">
            <div class="scale-wrapper">
                <div class="score-scale-bar"></div>
                <div id="steps-last-pointer" class="scale-pointer pointer-last"><div class="pointer-label">Last</div></div>
                <div id="steps-avg-pointer" class="scale-pointer pointer-avg"><div class="pointer-label">Avg</div></div>
            </div>
        </div>
    </div>
    <div id="steps-details" class="details-container">
                <div class="chart-wrapper">
                    <h3>Daily Steps</h3>
                    <p class="chart-subtitle">Daily steps. Color indicates health risk based on steps.</p>
                    <div style="position: relative; width: 100%; height: 300px;">
                        <canvas id="steps-chart"></canvas>
                    </div>
                </div>
    </div>
</div>

<div class="metric-wrapper">
    <div id="strength-summary" class="summary-item">
        <h2>Strength Training üí™</h2>
        <div class="score-scale-container">
            <div class="scale-wrapper">
                <div class="score-scale-bar"></div>
                <div id="strength-last-pointer" class="scale-pointer pointer-last"><div class="pointer-label">Last</div></div>
                <div id="strength-avg-pointer" class="scale-pointer pointer-avg"><div class="pointer-label">Avg</div></div>
            </div>
        </div>
    </div>
    <div id="strength-details" class="details-container">
                <div class="chart-wrapper">
                    <h3>Strength Training</h3>
                    <p class="chart-subtitle">Daily strength training duration with 7-day rolling sum. Color indicates heart rate multiplier based on weekly volume.</p>
                    <div style="position: relative; width: 100%; height: 300px;">
                        <canvas id="strength-chart"></canvas>
                    </div>
                </div>
    </div>
</div>

<div class="metric-wrapper">
    <div id="bodyComp-summary" class="summary-item">
        <h2>Body Composition üèãÔ∏è</h2>
        <div class="score-scale-container">
            <div class="scale-wrapper">
                <div class="score-scale-bar"></div>
                <div id="bodyComp-last-pointer" class="scale-pointer pointer-last"><div class="pointer-label">Last</div></div>
                <div id="bodyComp-avg-pointer" class="scale-pointer pointer-avg"><div class="pointer-label">Avg</div></div>
            </div>
        </div>
    </div>
    <div id="bodyComp-details" class="details-container">
        <div class="chart-wrapper">
            <h3>Body Composition Trends</h3>
            <p class="chart-subtitle">Weight, body fat percentage, FFMI, and FMI over time. Color indicates health risk based on FFMI.</p>
            <div style="height: 300px; position: relative;">
                <canvas id="bodyComp-chart"></canvas>
            </div>
        </div>
    </div>
</div>

<div class="metric-wrapper">
    <div id="rhr-summary" class="summary-item">
        <h2>Resting Heart Rate ‚ù§Ô∏è</h2>
        <div class="score-scale-container">
            <div class="scale-wrapper">
                <div class="score-scale-bar"></div>
                <div id="rhr-last-pointer" class="scale-pointer pointer-last"><div class="pointer-label">Last</div></div>
                <div id="rhr-avg-pointer" class="scale-pointer pointer-avg"><div class="pointer-label">Avg</div></div>
            </div>
        </div>
    </div>
    <div id="rhr-details" class="details-container">
        <div class="chart-wrapper">
            <h3>Resting Heart Rate Trends</h3>
            <p class="chart-subtitle">Daily resting heart rate in BPM over time. Color indicates health risk based on hazard ratios.</p>
            <div style="height: 300px; position: relative;">
                <canvas id="rhr-chart"></canvas>
            </div>
        </div>
    </div>
</div>

<div class="metric-wrapper">
    <div id="heart-rate-summary" class="summary-item">
        <h2>Heart Rate Activity üíì</h2>
        <div class="score-scale-container">
            <div class="scale-wrapper">
                <div class="score-scale-bar"></div>
                <div id="heart-rate-last-pointer" class="scale-pointer pointer-last"><div class="pointer-label">Last</div></div>
                <div id="heart-rate-avg-pointer" class="scale-pointer pointer-avg"><div class="pointer-label">Avg</div></div>
            </div>
        </div>
    </div>
    <div id="heart-rate-details" class="details-container">
        <div class="chart-wrapper">
            <h3>Activity Time Distribution</h3>
            <p class="chart-subtitle">Time spent in moderate (MPA) and vigorous (VPA) physical activity. Shows adjusted VPA time and 7-day rolling average.</p>
            <div style="height: 300px; position: relative;">
                <canvas id="heart-rate-activity-chart"></canvas>
            </div>
        </div>
        <div class="chart-wrapper">
            <h3>Hazard Ratio Trend</h3>
            <p class="chart-subtitle">Health risk score based on physical activity levels. Lower is better.</p>
            <div style="height: 300px; position: relative;">
                <canvas id="heart-rate-hr-chart"></canvas>
            </div>
        </div>
    </div>
</div>
    </div>
</div>

    </div>

    <script>
        // --- DATA PLACEHOLDER (To be replaced by Python) ---
        const chartData = {
    "daily": {
        "sleep": {
            "latestScore": -1.1070160116448324,
            "averageScore": -0.7327508474176503,
            "daily": [
                {
                    "label": "Oct 04",
                    "consistencyScore": 0.9562348374575449,
                    "durationScore": 0.93,
                    "consistencyColor": "#5aab5d",
                    "durationColor": "#43a047",
                    "sleepTime": "00:42",
                    "wakeTime": "09:18",
                    "sleepDuration": 8.608611111111111,
                    "timeInBed": 8.758611111111112,
                    "awakeCount": 1,
                    "hasData": true
                },
                {
                    "label": "Oct 03",
                    "consistencyScore": 0.95,
                    "durationScore": 0.948421052631579,
                    "consistencyColor": "#43a047",
                    "durationColor": "#43a047",
                    "sleepTime": "01:27",
                    "wakeTime": "08:33",
                    "sleepDuration": 7.1,
                    "timeInBed": 7.233333333333333,
                    "awakeCount": 0,
                    "hasData": true
                },
                {
                    "label": "Oct 02",
                    "consistencyScore": 0.95,
                    "durationScore": 0.93,
                    "consistencyColor": "#43a047",
                    "durationColor": "#43a047",
                    "sleepTime": "01:02",
                    "wakeTime": "08:25",
                    "sleepDuration": 7.383333333333334,
                    "timeInBed": 7.4,
                    "awakeCount": 0,
                    "hasData": true
                },
                {
                    "label": "Oct 01",
                    "consistencyScore": 0.9516860747210092,
                    "durationScore": 1.0513333333333335,
                    "consistencyColor": "#49a34d",
                    "durationColor": "#e53935",
                    "sleepTime": "00:57",
                    "wakeTime": "06:55",
                    "sleepDuration": 5.966666666666667,
                    "timeInBed": 6.0,
                    "awakeCount": 0,
                    "hasData": true
                },
                {
                    "label": "Sep 30",
                    "consistencyScore": 0.9516860747210092,
                    "durationScore": 0.93,
                    "consistencyColor": "#49a34d",
                    "durationColor": "#43a047",
                    "sleepTime": "01:02",
                    "wakeTime": "08:14",
                    "sleepDuration": 7.2,
                    "timeInBed": 7.266666666666667,
                    "awakeCount": 0,
                    "hasData": true
                },
                {
                    "label": "Sep 29",
                    "consistencyScore": 0.95,
                    "durationScore": 1.053625,
                    "consistencyColor": "#43a047",
                    "durationColor": "#e53935",
                    "sleepTime": "00:56",
                    "wakeTime": "06:53",
                    "sleepDuration": 5.95,
                    "timeInBed": 6.016666666666667,
                    "awakeCount": 0,
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ]
        },
        "vo2": {
            "latestScore": -4.6,
            "averageScore": -4.6,
            "daily": [
                {
                    "date": "Oct 05",
                    "vo2": 53.9
                },
                {
                    "date": "Oct 04",
                    "vo2": 53.9
                },
                {
                    "date": "Oct 03",
                    "vo2": 53.9
                },
                {
                    "date": "Oct 02",
                    "vo2": 53.9
                },
                {
                    "date": "Oct 01",
                    "vo2": 53.9
                },
                {
                    "date": "Sep 30",
                    "vo2": 53.8
                },
                {
                    "date": "Sep 29",
                    "vo2": 53.9
                }
            ],
            "zones": [
                {
                    "value": 36.05,
                    "color": "#e53935"
                },
                {
                    "value": 38.85,
                    "color": "#e53935"
                },
                {
                    "value": 44.8,
                    "color": "#ffffff"
                },
                {
                    "value": 51.28,
                    "color": "#43a047"
                },
                {
                    "value": 54.95,
                    "color": "#43a047"
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ]
        },
        "steps": {
            "latestScore": 0.0,
            "averageScore": 0.0,
            "daily": [
                {
                    "label": "Oct 05",
                    "dailySteps": 124,
                    "rollingAvgSteps": 10816,
                    "hazardRatio": 1.0,
                    "hrColor": "#ffffff",
                    "hasData": true
                },
                {
                    "label": "Oct 04",
                    "dailySteps": 3468,
                    "rollingAvgSteps": 11669,
                    "hazardRatio": 1.0,
                    "hrColor": "#ffffff",
                    "hasData": true
                },
                {
                    "label": "Oct 03",
                    "dailySteps": 3344,
                    "rollingAvgSteps": 13694,
                    "hazardRatio": 1.0,
                    "hrColor": "#ffffff",
                    "hasData": true
                },
                {
                    "label": "Oct 02",
                    "dailySteps": 24868,
                    "rollingAvgSteps": 14298,
                    "hazardRatio": 1.0,
                    "hrColor": "#ffffff",
                    "hasData": true
                },
                {
                    "label": "Oct 01",
                    "dailySteps": 16902,
                    "rollingAvgSteps": 14425,
                    "hazardRatio": 1.0,
                    "hrColor": "#ffffff",
                    "hasData": true
                },
                {
                    "label": "Sep 30",
                    "dailySteps": 15140,
                    "rollingAvgSteps": 12981,
                    "hazardRatio": 1.0,
                    "hrColor": "#ffffff",
                    "hasData": true
                },
                {
                    "label": "Sep 29",
                    "dailySteps": 14063,
                    "rollingAvgSteps": 12747,
                    "hazardRatio": 1.0,
                    "hrColor": "#ffffff",
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ]
        },
        "strength": {
            "latestScore": -0.3495484406001992,
            "averageScore": -0.35651046427685684,
            "daily": [
                {
                    "label": "Oct 05",
                    "dailyDuration": 0.0,
                    "weeklySum": 213.5129313151042,
                    "hrScore": 0.9650451559399801,
                    "hrColor": "#7bbc7e",
                    "hasData": true
                },
                {
                    "label": "Oct 04",
                    "dailyDuration": 0.0,
                    "weeklySum": 213.5129313151042,
                    "hrScore": 0.9650451559399801,
                    "hrColor": "#7bbc7e",
                    "hasData": true
                },
                {
                    "label": "Oct 03",
                    "dailyDuration": 0.0,
                    "weeklySum": 213.5129313151042,
                    "hrScore": 0.9650451559399801,
                    "hrColor": "#7bbc7e",
                    "hasData": true
                },
                {
                    "label": "Oct 02",
                    "dailyDuration": 42.10764973958333,
                    "weeklySum": 267.9152465820313,
                    "hrScore": 0.96,
                    "hrColor": "#68b36b",
                    "hasData": true
                },
                {
                    "label": "Oct 01",
                    "dailyDuration": 0.0,
                    "weeklySum": 225.80759684244794,
                    "hrScore": 0.9627033148871528,
                    "hrColor": "#72b875",
                    "hasData": true
                },
                {
                    "label": "Sep 30",
                    "dailyDuration": 124.25979817708334,
                    "weeklySum": 262.4054321289063,
                    "hrScore": 0.96,
                    "hrColor": "#68b36b",
                    "hasData": true
                },
                {
                    "label": "Sep 29",
                    "dailyDuration": 47.1454833984375,
                    "weeklySum": 173.82956542968753,
                    "hrScore": 0.9726038922991072,
                    "hrColor": "#97ca9a",
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ]
        },
        "bodyComp": {
            "latestScore": -2.288022719556361,
            "averageScore": -2.274215977252151,
            "daily": [
                {
                    "label": "Oct 03",
                    "weight": 91.73,
                    "bodyFat": 18.5,
                    "ffmi": 21.152090878225444,
                    "fmi": 4.8013948619284745,
                    "hrScore": 0.7711977280443639,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Oct 02",
                    "weight": 92.29,
                    "bodyFat": 18.4,
                    "ffmi": 21.30733363512902,
                    "fmi": 4.804594839293799,
                    "hrScore": 0.7673166591217745,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Oct 01",
                    "weight": 91.3,
                    "bodyFat": 18.4,
                    "ffmi": 21.078768673607968,
                    "fmi": 4.753055681303757,
                    "hrScore": 0.7730307831598008,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Sep 30",
                    "weight": 91.41,
                    "bodyFat": 18.7,
                    "ffmi": 21.026575939339068,
                    "fmi": 4.836371095518334,
                    "hrScore": 0.7743356015165233,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Sep 29",
                    "weight": 91.169,
                    "bodyFat": 18.9,
                    "ffmi": 20.919550418741512,
                    "fmi": 4.875209653689452,
                    "hrScore": 0.7770112395314622,
                    "hrColor": "#43a047",
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ]
        },
        "rhr": {
            "latestScore": -1.9399999999999995,
            "averageScore": -1.7210000000000003,
            "daily": [
                {
                    "label": "Oct 05",
                    "rhr": 45,
                    "hrScore": 0.806,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Oct 04",
                    "rhr": 45,
                    "hrScore": 0.806,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Oct 03",
                    "rhr": 46,
                    "hrScore": 0.8133,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Oct 02",
                    "rhr": 49,
                    "hrScore": 0.8352,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Oct 01",
                    "rhr": 50,
                    "hrScore": 0.8425,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Sep 30",
                    "rhr": 50,
                    "hrScore": 0.8425,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Sep 29",
                    "rhr": 51,
                    "hrScore": 0.8498,
                    "hrColor": "#43a047",
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ]
        },
        "heartRate": {
            "latestScore": 0.13157894736842146,
            "averageScore": 0.07402539963353827,
            "daily": [
                {
                    "label": "Oct 05",
                    "mpaTime": 26.0,
                    "vpaTime": 0.0,
                    "adjVpaTime": 13.0,
                    "rolling7Day": 143.0,
                    "hazardRatio": 0.9868421052631579,
                    "restingHR": 45.0,
                    "maxHR": 195.0,
                    "hrReserve": 150.0,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hasData": true
                },
                {
                    "label": "Oct 04",
                    "mpaTime": 6.0,
                    "vpaTime": 0.0,
                    "adjVpaTime": 3.0,
                    "rolling7Day": 130.0,
                    "hazardRatio": 0.9897744360902255,
                    "restingHR": 45.0,
                    "maxHR": 195.0,
                    "hrReserve": 150.0,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hasData": true
                },
                {
                    "label": "Oct 03",
                    "mpaTime": 0.0,
                    "vpaTime": 0.0,
                    "adjVpaTime": 0.0,
                    "rolling7Day": 127.0,
                    "hazardRatio": 0.9909523809523809,
                    "restingHR": 46.0,
                    "maxHR": 195.0,
                    "hrReserve": 149.0,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hasData": true
                },
                {
                    "label": "Oct 02",
                    "mpaTime": 102.0,
                    "vpaTime": 2.0,
                    "adjVpaTime": 53.0,
                    "rolling7Day": 127.0,
                    "hazardRatio": 0.9909523809523809,
                    "restingHR": 49.0,
                    "maxHR": 195.0,
                    "hrReserve": 146.0,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hasData": true
                },
                {
                    "label": "Oct 01",
                    "mpaTime": 40.0,
                    "vpaTime": 2.0,
                    "adjVpaTime": 22.0,
                    "rolling7Day": 131.0,
                    "hazardRatio": 0.9895488721804511,
                    "restingHR": 50.0,
                    "maxHR": 195.0,
                    "hrReserve": 145.0,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hasData": true
                },
                {
                    "label": "Sep 30",
                    "mpaTime": 44.0,
                    "vpaTime": 0.0,
                    "adjVpaTime": 22.0,
                    "rolling7Day": 109.0,
                    "hazardRatio": 0.9995238095238095,
                    "restingHR": 50.0,
                    "maxHR": 195.0,
                    "hrReserve": 145.0,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hasData": true
                },
                {
                    "label": "Sep 29",
                    "mpaTime": 36.0,
                    "vpaTime": 12.0,
                    "adjVpaTime": 30.0,
                    "rolling7Day": 107.0,
                    "hazardRatio": 1.0005882352941176,
                    "restingHR": 51.0,
                    "maxHR": 195.0,
                    "hrReserve": 144.0,
                    "zoneTimes": {
                        "0-4": 0.0,
                        "100-104": 0.0,
                        "105-109": 0.0,
                        "10-14": 0.0,
                        "110-114": 0.0,
                        "115-119": 0.0,
                        "120-124": 0.0,
                        "125-129": 0.0,
                        "130-134": 0.0,
                        "135-139": 0.0,
                        "140-144": 0.0,
                        "145-149": 0.0,
                        "150-154": 0.0,
                        "155-159": 0.0,
                        "15-19": 0.0,
                        "160-164": 0.0,
                        "165-169": 0.0,
                        "170-174": 0.0,
                        "175-179": 0.0,
                        "180-184": 0.0,
                        "185-189": 0.0,
                        "190-194": 0.0,
                        "195-199": 0.0,
                        "200plus": 0.0,
                        "20-24": 0.0,
                        "25-29": 0.0,
                        "30-34": 0.0,
                        "35-39": 0.0,
                        "40-44": 0.0,
                        "45-49": 0.0,
                        "50-54": 0.0,
                        "55-59": 0.0,
                        "5-9": 0.0,
                        "60-64": 0.0,
                        "65-69": 0.0,
                        "70-74": 0.0,
                        "75-79": 0.0,
                        "80-84": 0.0,
                        "85-89": 0.0,
                        "90-94": 0.0,
                        "95-99": 0.0
                    },
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ]
        }
    },
    "weekly": {
        "sleep": {
            "latestScore": 0.00943750000000021,
            "averageScore": -0.27469115933596355,
            "daily": [
                {
                    "label": "Week of Sep 29",
                    "consistencyScore": 0.95,
                    "durationScore": 1.053625,
                    "consistencyColor": "#43a047",
                    "durationColor": "#e53935",
                    "sleepTime": "00:56",
                    "wakeTime": "06:53",
                    "sleepDuration": 5.95,
                    "timeInBed": 6.016666666666667,
                    "awakeCount": 0,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 22",
                    "consistencyScore": 1.0291336276680638,
                    "durationScore": 0.9478947368421053,
                    "consistencyColor": "#ef8b89",
                    "durationColor": "#43a047",
                    "sleepTime": "00:00",
                    "wakeTime": "06:38",
                    "sleepDuration": 7.65952380952381,
                    "timeInBed": 8.054761904761905,
                    "awakeCount": 1,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 15",
                    "consistencyScore": 1.08071682540937,
                    "durationScore": 0.9834440789473685,
                    "consistencyColor": "#e53935",
                    "durationColor": "#c0dfc2",
                    "sleepTime": "23:23",
                    "wakeTime": "06:57",
                    "sleepDuration": 6.919444444444444,
                    "timeInBed": 7.552777777777777,
                    "awakeCount": 2,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 08",
                    "consistencyScore": 0.9901752927006611,
                    "durationScore": 0.9557142857142857,
                    "consistencyColor": "#daecda",
                    "durationColor": "#58aa5c",
                    "sleepTime": "23:49",
                    "wakeTime": "07:17",
                    "sleepDuration": 7.145238095238095,
                    "timeInBed": 7.369047619047619,
                    "awakeCount": 1,
                    "hasData": true
                },
                {
                    "label": "Week of Sep 01",
                    "consistencyScore": 0.9659199760234168,
                    "durationScore": 0.9913452380952382,
                    "consistencyColor": "#7ebe81",
                    "durationColor": "#deeedf",
                    "sleepTime": "00:32",
                    "wakeTime": "07:03",
                    "sleepDuration": 7.192857142857143,
                    "timeInBed": 7.3809523809523805,
                    "awakeCount": 0,
                    "hasData": true
                },
                {
                    "label": "Week of Aug 25",
                    "consistencyScore": 0.9757496990241373,
                    "durationScore": 0.9500000000000001,
                    "consistencyColor": "#a3d0a5",
                    "durationColor": "#43a047",
                    "sleepTime": "00:06",
                    "wakeTime": "06:55",
                    "sleepDuration": 7.499126984126984,
                    "timeInBed": 7.770555555555555,
                    "awakeCount": 1,
                    "hasData": true
                },
                {
                    "label": "Week of Aug 18",
                    "consistencyScore": 0.9890892874406938,
                    "durationScore": 0.9538680555555556,
                    "consistencyColor": "#d5ead6",
                    "durationColor": "#51a755",
                    "sleepTime": "23:19",
                    "wakeTime": "07:27",
                    "sleepDuration": 7.430555555555556,
                    "timeInBed": 7.663888888888889,
                    "awakeCount": 1,
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ]
        },
        "vo2": {
            "latestScore": -4.6,
            "averageScore": -4.6,
            "daily": [
                {
                    "date": "Week of Sep 29",
                    "vo2": 53.9
                },
                {
                    "date": "Week of Sep 22",
                    "vo2": 53.771428571428565
                },
                {
                    "date": "Week of Sep 15",
                    "vo2": 53.74285714285714
                },
                {
                    "date": "Week of Sep 08",
                    "vo2": 53.971428571428575
                },
                {
                    "date": "Week of Sep 01",
                    "vo2": 54.228571428571435
                },
                {
                    "date": "Week of Aug 25",
                    "vo2": 53.98571428571428
                },
                {
                    "date": "Week of Aug 18",
                    "vo2": 53.957142857142856
                }
            ],
            "zones": [
                {
                    "value": 36.05,
                    "color": "#e53935"
                },
                {
                    "value": 38.85,
                    "color": "#e53935"
                },
                {
                    "value": 44.8,
                    "color": "#ffffff"
                },
                {
                    "value": 51.28,
                    "color": "#43a047"
                },
                {
                    "value": 54.95,
                    "color": "#43a047"
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ]
        },
        "steps": {
            "latestScore": 0.0,
            "averageScore": 0.42857142857142927,
            "daily": [
                {
                    "label": "Week of Sep 29",
                    "dailySteps": 14063,
                    "rollingAvgSteps": 12747,
                    "hazardRatio": 1.0,
                    "hrColor": "#ffffff",
                    "hasData": true
                },
                {
                    "label": "Week of Sep 22",
                    "dailySteps": 13571,
                    "rollingAvgSteps": 13967,
                    "hazardRatio": 1.0,
                    "hrColor": "#ffffff",
                    "hasData": true
                },
                {
                    "label": "Week of Sep 15",
                    "dailySteps": 10742,
                    "rollingAvgSteps": 10064,
                    "hazardRatio": 1.0,
                    "hrColor": "#ffffff",
                    "hasData": true
                },
                {
                    "label": "Week of Sep 08",
                    "dailySteps": 9908,
                    "rollingAvgSteps": 13404,
                    "hazardRatio": 1.0,
                    "hrColor": "#ffffff",
                    "hasData": true
                },
                {
                    "label": "Week of Sep 01",
                    "dailySteps": 16839,
                    "rollingAvgSteps": 13742,
                    "hazardRatio": 1.2142857142857142,
                    "hrColor": "#e53935",
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ]
        },
        "strength": {
            "latestScore": -0.27396107700892847,
            "averageScore": -0.17314354393170972,
            "daily": [
                {
                    "label": "Week of Sep 29",
                    "dailyDuration": 47.1454833984375,
                    "weeklySum": 173.82956542968753,
                    "hrScore": 0.9726038922991072,
                    "hrColor": "#97ca9a",
                    "hasData": true
                },
                {
                    "label": "Week of Sep 22",
                    "dailyDuration": 23.46622605096726,
                    "weeklySum": 117.62231619698663,
                    "hrScore": 0.9833100350100977,
                    "hrColor": "#c0dfc1",
                    "hasData": true
                },
                {
                    "label": "Week of Sep 15",
                    "dailyDuration": 0.0,
                    "weeklySum": 29.518938337053587,
                    "hrScore": 1.0063995604915144,
                    "hrColor": "#fbe5e5",
                    "hasData": true
                },
                {
                    "label": "Week of Sep 08",
                    "dailyDuration": 17.047952415829613,
                    "weeklySum": 127.73584827241447,
                    "hrScore": 0.9813836479481115,
                    "hrColor": "#b9dbba",
                    "hasData": true
                },
                {
                    "label": "Week of Sep 01",
                    "dailyDuration": 12.868347749255951,
                    "weeklySum": 86.03494698660718,
                    "hrScore": 0.9893266767644558,
                    "hrColor": "#d6ead7",
                    "hasData": true
                },
                {
                    "label": "Week of Aug 25",
                    "dailyDuration": 12.913033040364581,
                    "weeklySum": 122.8364240373884,
                    "hrScore": 0.9823168716119259,
                    "hrColor": "#bcddbd",
                    "hasData": true
                },
                {
                    "label": "Week of Aug 18",
                    "dailyDuration": 33.003515043712795,
                    "weeklySum": 221.8411156063988,
                    "hrScore": 0.9634588351225907,
                    "hrColor": "#75b978",
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ]
        },
        "bodyComp": {
            "latestScore": -2.229887604685378,
            "averageScore": -2.3713754752127194,
            "daily": [
                {
                    "label": "Week of Sep 29",
                    "weight": 91.169,
                    "bodyFat": 18.9,
                    "ffmi": 20.919550418741512,
                    "fmi": 4.875209653689452,
                    "hrScore": 0.7770112395314622,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Sep 22",
                    "weight": 91.81228571428572,
                    "bodyFat": 18.7,
                    "ffmi": 21.118944739054516,
                    "fmi": 4.85782238246136,
                    "hrScore": 0.772026381523637,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Sep 15",
                    "weight": 91.837,
                    "bodyFat": 19.057142857142857,
                    "ffmi": 21.03201440535472,
                    "fmi": 4.95174521438272,
                    "hrScore": 0.7741996398661319,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Sep 08",
                    "weight": 91.55971428571429,
                    "bodyFat": 19.0,
                    "ffmi": 20.98307140431999,
                    "fmi": 4.922234810515425,
                    "hrScore": 0.7754232148920002,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Sep 01",
                    "weight": 91.59657142857144,
                    "bodyFat": 11.028571428571428,
                    "ffmi": 23.059770985578478,
                    "fmi": 2.855963347991981,
                    "hrScore": 0.7613766915378646,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Aug 25",
                    "weight": 91.47142857142856,
                    "bodyFat": 0.0,
                    "ffmi": 25.880327232749146,
                    "fmi": 0.0,
                    "hrScore": 0.74,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Aug 18",
                    "weight": 91.31414285714285,
                    "bodyFat": 0.0,
                    "ffmi": 25.835825842333314,
                    "fmi": 0.0,
                    "hrScore": 0.74,
                    "hrColor": "#43a047",
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ]
        },
        "rhr": {
            "latestScore": -1.502,
            "averageScore": -1.7075918367346954,
            "daily": [
                {
                    "label": "Week of Sep 29",
                    "rhr": 51,
                    "hrScore": 0.8498,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Sep 22",
                    "rhr": 47,
                    "hrScore": 0.8237285714285714,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Sep 15",
                    "rhr": 49,
                    "hrScore": 0.8352,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Sep 08",
                    "rhr": 47,
                    "hrScore": 0.8237285714285715,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Sep 01",
                    "rhr": 48,
                    "hrScore": 0.8299857142857142,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Aug 25",
                    "rhr": 47,
                    "hrScore": 0.8216428571428571,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Week of Aug 18",
                    "rhr": 47,
                    "hrScore": 0.8206,
                    "hrColor": "#43a047",
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ]
        },
        "heartRate": {
            "latestScore": -0.0058823529411755615,
            "averageScore": 0.05524507048388472,
            "daily": [
                {
                    "label": "Week of Sep 29",
                    "mpaTime": 36.0,
                    "vpaTime": 12.0,
                    "adjVpaTime": 30.0,
                    "rolling7Day": 107.0,
                    "hazardRatio": 1.0005882352941176,
                    "restingHR": 51.0,
                    "maxHR": 195.0,
                    "hrReserve": 144.0,
                    "zoneTimes": {},
                    "hasData": true
                },
                {
                    "label": "Week of Sep 22",
                    "mpaTime": 244.0,
                    "vpaTime": 30.0,
                    "adjVpaTime": 152.0,
                    "rolling7Day": 148.85714285714286,
                    "hazardRatio": 0.9861654135338346,
                    "restingHR": 47.42857142857143,
                    "maxHR": 195.0,
                    "hrReserve": 147.57142857142858,
                    "zoneTimes": {},
                    "hasData": true
                },
                {
                    "label": "Week of Sep 15",
                    "mpaTime": 80.0,
                    "vpaTime": 34.0,
                    "adjVpaTime": 74.0,
                    "rolling7Day": 64.42857142857143,
                    "hazardRatio": 1.0402568130055763,
                    "restingHR": 49.0,
                    "maxHR": 195.0,
                    "hrReserve": 146.0,
                    "zoneTimes": {},
                    "hasData": true
                },
                {
                    "label": "Week of Sep 08",
                    "mpaTime": 52.0,
                    "vpaTime": 36.0,
                    "adjVpaTime": 62.0,
                    "rolling7Day": 139.28571428571428,
                    "hazardRatio": 0.9943848272215919,
                    "restingHR": 47.42857142857143,
                    "maxHR": 195.0,
                    "hrReserve": 147.57142857142858,
                    "zoneTimes": {},
                    "hasData": true
                },
                {
                    "label": "Week of Sep 01",
                    "mpaTime": 430.0,
                    "vpaTime": 40.0,
                    "adjVpaTime": 255.0,
                    "rolling7Day": 237.85714285714286,
                    "hazardRatio": 0.9654731562562581,
                    "restingHR": 48.285714285714285,
                    "maxHR": 195.0,
                    "hrReserve": 146.71428571428572,
                    "zoneTimes": {},
                    "hasData": true
                },
                {
                    "label": "Week of Aug 25",
                    "mpaTime": 276.0,
                    "vpaTime": 56.0,
                    "adjVpaTime": 194.0,
                    "rolling7Day": 162.42857142857142,
                    "hazardRatio": 0.9824597207303974,
                    "restingHR": 47.142857142857146,
                    "maxHR": 195.0,
                    "hrReserve": 147.85714285714286,
                    "zoneTimes": {},
                    "hasData": true
                },
                {
                    "label": "Week of Aug 18",
                    "mpaTime": 222.0,
                    "vpaTime": 28.0,
                    "adjVpaTime": 139.0,
                    "rolling7Day": 134.0,
                    "hazardRatio": 0.9920002846195045,
                    "restingHR": 47.0,
                    "maxHR": 195.0,
                    "hrReserve": 148.0,
                    "zoneTimes": {},
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ]
        }
    },
    "monthly": {
        "sleep": {
            "latestScore": -0.4345251060338462,
            "averageScore": -0.4063606054958524,
            "daily": [
                {
                    "label": "Sep 2025",
                    "consistencyScore": 0.9671045604148337,
                    "durationScore": 0.9899027777777779,
                    "consistencyColor": "#83c085",
                    "durationColor": "#d9ebd9",
                    "sleepTime": "00:48",
                    "wakeTime": "08:56",
                    "sleepDuration": 7.305555555555556,
                    "timeInBed": 7.513888888888889,
                    "awakeCount": 0,
                    "hasData": true
                },
                {
                    "label": "Aug 2025",
                    "consistencyScore": 0.9755003680075366,
                    "durationScore": 0.9523584064327486,
                    "consistencyColor": "#a2d0a4",
                    "durationColor": "#4ba44f",
                    "sleepTime": "00:06",
                    "wakeTime": "06:55",
                    "sleepDuration": 7.594592592592592,
                    "timeInBed": 7.905703703703704,
                    "awakeCount": 1,
                    "hasData": true
                },
                {
                    "label": "Jul 2025",
                    "consistencyScore": 1.0690281419413712,
                    "durationScore": 0.9751556310130165,
                    "consistencyColor": "#e53935",
                    "durationColor": "#a1cfa3",
                    "sleepTime": "23:41",
                    "wakeTime": "07:54",
                    "sleepDuration": 7.129354838709677,
                    "timeInBed": 7.515913978494624,
                    "awakeCount": 1,
                    "hasData": true
                },
                {
                    "label": "Jun 2025",
                    "consistencyScore": 1.0163006771771979,
                    "durationScore": 0.9638528370135109,
                    "consistencyColor": "#f6bebd",
                    "durationColor": "#77ba79",
                    "sleepTime": "23:00",
                    "wakeTime": "06:26",
                    "sleepDuration": 7.293438697318008,
                    "timeInBed": 7.751484674329502,
                    "awakeCount": 1,
                    "hasData": true
                },
                {
                    "label": "May 2025",
                    "consistencyScore": 0.9832050699700726,
                    "durationScore": 0.9421026457272214,
                    "consistencyColor": "#bfdfc1",
                    "durationColor": "#43a047",
                    "sleepTime": "01:19",
                    "wakeTime": "09:03",
                    "sleepDuration": 7.71239247311828,
                    "timeInBed": 8.024758064516128,
                    "awakeCount": 1,
                    "hasData": true
                },
                {
                    "label": "Apr 2025",
                    "consistencyScore": 1.0041863565453928,
                    "durationScore": 0.9532257066276804,
                    "consistencyColor": "#fceeee",
                    "durationColor": "#4fa652",
                    "sleepTime": "23:06",
                    "wakeTime": "07:30",
                    "sleepDuration": 7.4635,
                    "timeInBed": 7.775166666666666,
                    "awakeCount": 0,
                    "hasData": true
                },
                {
                    "label": "Mar 2025",
                    "consistencyScore": 1.0148690514196324,
                    "durationScore": 0.9621792350499906,
                    "consistencyColor": "#f7c4c2",
                    "durationColor": "#70b773",
                    "sleepTime": "22:45",
                    "wakeTime": "07:00",
                    "sleepDuration": 7.477267025089606,
                    "timeInBed": 7.991245519713262,
                    "awakeCount": 1,
                    "hasData": true
                },
                {
                    "label": "Feb 2025",
                    "consistencyScore": 0.9608072903181162,
                    "durationScore": 0.9416826849733029,
                    "consistencyColor": "#6bb46e",
                    "durationColor": "#43a047",
                    "sleepTime": "01:32",
                    "wakeTime": "09:44",
                    "sleepDuration": 7.912995169082126,
                    "timeInBed": 8.391980676328503,
                    "awakeCount": 1,
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ]
        },
        "vo2": {
            "latestScore": -4.6,
            "averageScore": -4.6,
            "daily": [
                {
                    "date": "Sep 2025",
                    "vo2": 54.23333333333333
                },
                {
                    "date": "Aug 2025",
                    "vo2": 53.900000000000006
                },
                {
                    "date": "Jul 2025",
                    "vo2": 54.40967741935484
                },
                {
                    "date": "Jun 2025",
                    "vo2": 56.46333333333334
                },
                {
                    "date": "May 2025",
                    "vo2": 57.12580645161291
                },
                {
                    "date": "Apr 2025",
                    "vo2": 55.99
                },
                {
                    "date": "Mar 2025",
                    "vo2": 56.18387096774194
                },
                {
                    "date": "Feb 2025",
                    "vo2": 56.29130434782609
                }
            ],
            "zones": [
                {
                    "value": 36.05,
                    "color": "#e53935"
                },
                {
                    "value": 38.85,
                    "color": "#e53935"
                },
                {
                    "value": 44.8,
                    "color": "#ffffff"
                },
                {
                    "value": 51.28,
                    "color": "#43a047"
                },
                {
                    "value": 54.95,
                    "color": "#43a047"
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ]
        },
        "steps": {
            "latestScore": 2.5,
            "averageScore": 2.5,
            "daily": [
                {
                    "label": "Sep 2025",
                    "dailySteps": 15869,
                    "rollingAvgSteps": 13068,
                    "hazardRatio": 1.25,
                    "hrColor": "#e53935",
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ]
        },
        "strength": {
            "latestScore": -0.10544958560681272,
            "averageScore": -0.10943718681176051,
            "daily": [
                {
                    "label": "Sep 2025",
                    "dailyDuration": 15.013072374131944,
                    "weeklySum": 85.3610324435764,
                    "hrScore": 0.9894550414393187,
                    "hrColor": "#d7ead8",
                    "hasData": true
                },
                {
                    "label": "Aug 2025",
                    "dailyDuration": 24.237059759324595,
                    "weeklySum": 186.0499379147766,
                    "hrScore": 0.970557108079917,
                    "hrColor": "#90c792",
                    "hasData": true
                },
                {
                    "label": "Jul 2025",
                    "dailyDuration": 22.432217308782764,
                    "weeklySum": 146.4851279638147,
                    "hrScore": 0.977812356578321,
                    "hrColor": "#abd4ad",
                    "hasData": true
                },
                {
                    "label": "Jun 2025",
                    "dailyDuration": 18.642835150824656,
                    "weeklySum": 129.50860290527348,
                    "hrScore": 0.9810459803989955,
                    "hrColor": "#b7dab9",
                    "hasData": true
                },
                {
                    "label": "May 2025",
                    "dailyDuration": 14.577932247038811,
                    "weeklySum": 89.50533053490426,
                    "hrScore": 0.9916794326461894,
                    "hrColor": "#dfefe0",
                    "hasData": true
                },
                {
                    "label": "Apr 2025",
                    "dailyDuration": 9.027952745225694,
                    "weeklySum": 68.91549411349827,
                    "hrScore": 0.9966101280898644,
                    "hrColor": "#f2f8f2",
                    "hasData": true
                },
                {
                    "label": "Mar 2025",
                    "dailyDuration": 3.2601747246198753,
                    "weeklySum": 20.376661829794617,
                    "hrScore": 1.008666312203356,
                    "hrColor": "#fadcdb",
                    "hasData": true
                },
                {
                    "label": "Feb 2025",
                    "dailyDuration": 7.076574618574502,
                    "weeklySum": 50.46401743128682,
                    "hrScore": 0.9966238911146291,
                    "hrColor": "#f2f8f2",
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ]
        },
        "bodyComp": {
            "latestScore": -2.397326715048287,
            "averageScore": -2.574665839381036,
            "daily": [
                {
                    "label": "Sep 2025",
                    "weight": 91.48283333333335,
                    "bodyFat": 9.783333333333333,
                    "ffmi": 23.35661861513506,
                    "fmi": 2.52693540629244,
                    "hrScore": 0.7602673284951713,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Aug 2025",
                    "weight": 91.29296774193548,
                    "bodyFat": 0.0,
                    "ffmi": 25.82983469384775,
                    "fmi": 0.0,
                    "hrScore": 0.74,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Jul 2025",
                    "weight": 88.67735483870968,
                    "bodyFat": 0.0,
                    "ffmi": 25.089790300676125,
                    "fmi": 0.0,
                    "hrScore": 0.74,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Jun 2025",
                    "weight": 86.40946666666667,
                    "bodyFat": 0.0,
                    "ffmi": 24.448128866757205,
                    "fmi": 0.0,
                    "hrScore": 0.74,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "May 2025",
                    "weight": 84.594,
                    "bodyFat": 0.0,
                    "ffmi": 23.93447261204165,
                    "fmi": 0.0,
                    "hrScore": 0.74,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Apr 2025",
                    "weight": 84.594,
                    "bodyFat": 0.0,
                    "ffmi": 23.93447261204165,
                    "fmi": 0.0,
                    "hrScore": 0.74,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Mar 2025",
                    "weight": 83.83329032258064,
                    "bodyFat": 0.0,
                    "ffmi": 23.719242395478908,
                    "fmi": 0.0,
                    "hrScore": 0.74,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Feb 2025",
                    "weight": 83.687,
                    "bodyFat": 0.0,
                    "ffmi": 23.677851969216842,
                    "fmi": 0.0,
                    "hrScore": 0.74,
                    "hrColor": "#43a047",
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ]
        },
        "rhr": {
            "latestScore": -1.6844999999999999,
            "averageScore": -1.7477756252921917,
            "daily": [
                {
                    "label": "Sep 2025",
                    "rhr": 48,
                    "hrScore": 0.83155,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Aug 2025",
                    "rhr": 47,
                    "hrScore": 0.8220129032258066,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Jul 2025",
                    "rhr": 47,
                    "hrScore": 0.8241322580645162,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Jun 2025",
                    "rhr": 47,
                    "hrScore": 0.8264400000000001,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "May 2025",
                    "rhr": 47,
                    "hrScore": 0.8227193548387097,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Apr 2025",
                    "rhr": 47,
                    "hrScore": 0.8269266666666667,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Mar 2025",
                    "rhr": 47,
                    "hrScore": 0.8229548387096774,
                    "hrColor": "#43a047",
                    "hasData": true
                },
                {
                    "label": "Feb 2025",
                    "rhr": 47,
                    "hrScore": 0.8250434782608695,
                    "hrColor": "#43a047",
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ]
        },
        "heartRate": {
            "latestScore": 0.33877808929102415,
            "averageScore": -0.06865448074953706,
            "daily": [
                {
                    "label": "Sep 2025",
                    "mpaTime": 326.0,
                    "vpaTime": 40.0,
                    "adjVpaTime": 203.0,
                    "rolling7Day": 235.0,
                    "hazardRatio": 0.9661221910708976,
                    "restingHR": 48.5,
                    "maxHR": 195.0,
                    "hrReserve": 146.5,
                    "zoneTimes": {},
                    "hasData": true
                },
                {
                    "label": "Aug 2025",
                    "mpaTime": 1170.0,
                    "vpaTime": 174.0,
                    "adjVpaTime": 759.0,
                    "rolling7Day": 162.38709677419354,
                    "hazardRatio": 0.984476799839555,
                    "restingHR": 47.064516129032256,
                    "maxHR": 195.0,
                    "hrReserve": 147.93548387096774,
                    "zoneTimes": {},
                    "hasData": true
                },
                {
                    "label": "Jul 2025",
                    "mpaTime": 630.0,
                    "vpaTime": 132.0,
                    "adjVpaTime": 447.0,
                    "rolling7Day": 101.64516129032258,
                    "hazardRatio": 1.0086350014673848,
                    "restingHR": 47.193548387096776,
                    "maxHR": 195.0,
                    "hrReserve": 147.80645161290323,
                    "zoneTimes": {},
                    "hasData": true
                },
                {
                    "label": "Jun 2025",
                    "mpaTime": 546.0,
                    "vpaTime": 54.0,
                    "adjVpaTime": 327.0,
                    "rolling7Day": 65.8,
                    "hazardRatio": 1.0682277999219771,
                    "restingHR": 47.56666666666667,
                    "maxHR": 195.0,
                    "hrReserve": 147.43333333333334,
                    "zoneTimes": {},
                    "hasData": true
                },
                {
                    "label": "May 2025",
                    "mpaTime": 0.0,
                    "vpaTime": 0.0,
                    "adjVpaTime": 0.0,
                    "rolling7Day": 0.0,
                    "hazardRatio": null,
                    "restingHR": 47.225806451612904,
                    "maxHR": 195.0,
                    "hrReserve": 147.7741935483871,
                    "zoneTimes": {},
                    "hasData": true
                },
                {
                    "label": "Apr 2025",
                    "mpaTime": 0.0,
                    "vpaTime": 0.0,
                    "adjVpaTime": 0.0,
                    "rolling7Day": 0.0,
                    "hazardRatio": null,
                    "restingHR": 47.8,
                    "maxHR": 195.0,
                    "hrReserve": 147.2,
                    "zoneTimes": {},
                    "hasData": true
                },
                {
                    "label": "Mar 2025",
                    "mpaTime": 0.0,
                    "vpaTime": 0.0,
                    "adjVpaTime": 0.0,
                    "rolling7Day": 0.0,
                    "hazardRatio": null,
                    "restingHR": 47.12903225806452,
                    "maxHR": 195.0,
                    "hrReserve": 147.8709677419355,
                    "zoneTimes": {},
                    "hasData": true
                },
                {
                    "label": "Feb 2025",
                    "mpaTime": 0.0,
                    "vpaTime": 0.0,
                    "adjVpaTime": 0.0,
                    "rolling7Day": 0.0,
                    "hazardRatio": null,
                    "restingHR": 47.608695652173914,
                    "maxHR": 195.0,
                    "hrReserve": 147.3913043478261,
                    "zoneTimes": {},
                    "hasData": true
                }
            ],
            "colorStops": [
                {
                    "score": 2,
                    "color": "#d32f2f"
                },
                {
                    "score": 1,
                    "color": "#f57c00"
                },
                {
                    "score": 0,
                    "color": "#ffffff"
                },
                {
                    "score": -1,
                    "color": "#7cb342"
                },
                {
                    "score": -2,
                    "color": "#388e3c"
                }
            ]
        }
    }
};

        // Chart.js configuration
        try {
            if (typeof ChartDataLabels !== 'undefined') {
                Chart.register(ChartDataLabels);
            }
            if (typeof ChartAnnotation !== 'undefined') {
                Chart.register(ChartAnnotation);
            }
        } catch (error) {
            console.warn('Chart.js plugin registration failed:', error);
        }

        // Color utility functions
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }

        function rgbToHex(r, g, b) {
            return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
        }

        function getColorForScore(score) {
            if (score >= 1.5) return "#d32f2f";
            if (score >= 1.2) return "#f57c00";
            if (score >= 0.8) return "#ffffff";
            if (score >= 0.5) return "#7cb342";
            return "#388e3c";
        }

        // Helper function to convert time string to minutes from midnight
        function timeToMinutes(timeStr) {
            if (!timeStr) return 0;
            const [hours, minutes] = timeStr.split(':').map(Number);
            return hours * 60 + minutes;
        }

        // Initialize charts and interactions
        function initializeCharts() {
            console.log('initializeCharts called');
            console.log('chartData:', chartData);
            
            if (chartData && chartData.sleep) {
                console.log('Processing sleep data');
                const sleepData = chartData.sleep;
                createSleepCharts(sleepData);
                updateSleepSummary(sleepData);
            }

            if (chartData && chartData.vo2) {
                const vo2Data = chartData.vo2;
                createVO2Charts(vo2Data);
                updateVO2Summary(vo2Data);
            }

            if (chartData && chartData.steps) {
                const stepsData = chartData.steps;
                createStepsCharts(stepsData);
                updateStepsSummary(stepsData);
            }

            if (chartData && chartData.strength) {
                const strengthData = chartData.strength;
                createStrengthCharts(strengthData);
                updateStrengthSummary(strengthData);
            }

            if (chartData && chartData.bodyComp) {
                const bodyCompData = chartData.bodyComp;
                createBodyCompCharts(bodyCompData);
                updateBodyCompSummary(bodyCompData);
            }

            if (chartData && chartData.rhr) {
                const rhrData = chartData.rhr;
                createRHRCharts(rhrData);
                updateRHRSummary(rhrData);
            }

            if (chartData && chartData.heartRate) {
                const heartRateData = chartData.heartRate;
                createHeartRateCharts(heartRateData);
                updateHeartRateSummary(heartRateData);
            }
        }

        // Summary update functions
        function updateSleepSummary(data) {
            updateSummaryScale('sleep', data.latestScore, data.averageScore, data.colorStops);
        }

        function updateVO2Summary(data) {
            updateSummaryScale('vo2', data.latestScore, data.averageScore, data.colorStops);
        }

        function updateStepsSummary(data) {
            updateSummaryScale('steps', data.latestScore, data.averageScore, data.colorStops);
        }

        function updateStrengthSummary(data) {
            updateSummaryScale('strength', data.latestScore, data.averageScore, data.colorStops);
        }

        function updateBodyCompSummary(data) {
            updateSummaryScale('bodyComp', data.latestScore, data.averageScore, data.colorStops);
        }

        function updateRHRSummary(data) {
            updateSummaryScale('rhr', data.latestScore, data.averageScore, data.colorStops);
        }

        function updateHeartRateSummary(data) {
            updateSummaryScale('heart-rate', data.latestScore, data.averageScore, data.colorStops);
        }

        function updateSummaryScale(metric, latestScore, averageScore, colorStops) {
            console.log('updateSummaryScale called with:', metric, latestScore, averageScore, colorStops);
            
            const scaleBar = document.querySelector(`#${metric}-summary .score-scale-bar`);
            const lastPointer = document.querySelector(`#${metric}-last-pointer`);
            const avgPointer = document.querySelector(`#${metric}-avg-pointer`);

            console.log('Elements found:', { 
                scaleBar: !!scaleBar, 
                lastPointer: !!lastPointer, 
                avgPointer: !!avgPointer 
            });

            if (!scaleBar || !lastPointer || !avgPointer) {
                console.log('Missing elements, returning');
                return;
            }

            // Create gradient background
            const gradient = createGradient(colorStops);
            console.log('Generated gradient:', gradient);
            scaleBar.style.setProperty('background', gradient, 'important');
            console.log('Applied gradient to scaleBar with !important');

            // Position pointers
            const lastPosition = Math.max(0, Math.min(100, (latestScore + 2) * 25));
            const avgPosition = Math.max(0, Math.min(100, (averageScore + 2) * 25));

            lastPointer.style.left = `${lastPosition}%`;
            avgPointer.style.left = `${avgPosition}%`;

            // Set pointer colors
            const lastColor = getColorForScore(latestScore);
            const avgColor = getColorForScore(averageScore);

            lastPointer.style.borderTopColor = lastColor;
            avgPointer.style.borderBottomColor = avgColor;
        }

        function createGradient(colorStops) {
            console.log('createGradient called with colorStops:', colorStops);
            const sortedStops = colorStops.sort((a, b) => b.score - a.score);
            console.log('Sorted stops:', sortedStops);
            
            // Use a simpler, more reliable gradient format
            const gradient = `linear-gradient(to right, 
                #d32f2f 0%, 
                #f57c00 25%, 
                #ffffff 50%, 
                #7cb342 75%, 
                #388e3c 100%)`;
            
            console.log('Generated gradient string:', gradient);
            return gradient;
        }

        
// Tab switching functionality
function switchTab(tabName) {
    // Update navigation buttons
    document.querySelectorAll('.nav-button').forEach(btn => {
        btn.style.backgroundColor = '#333';
        btn.classList.remove('active');
    });
    document.getElementById(tabName + '-nav').style.backgroundColor = '#007bff';
    document.getElementById(tabName + '-nav').classList.add('active');
    
    // Update tab content visibility
    document.querySelectorAll('.tab-content').forEach(content => {
        content.classList.remove('active');
    });
    document.getElementById(tabName + '-content').classList.add('active');
    
    // Re-initialize charts with the new data
    initializeChartsForTab(tabName);
}

// Initialize charts for specific tab
function initializeChartsForTab(tabName) {
    const data = chartData[tabName];
    if (!data) return;
    
    if (data.sleep) {
        createSleepCharts(data.sleep);
        updateSleepSummary(data.sleep);
    }
    if (data.vo2) {
        createVO2Charts(data.vo2);
        updateVO2Summary(data.vo2);
    }
    if (data.steps) {
        createStepsCharts(data.steps);
        updateStepsSummary(data.steps);
    }
    if (data.strength) {
        createStrengthCharts(data.strength);
        updateStrengthSummary(data.strength);
    }
    if (data.bodyComp) {
        createBodyCompCharts(data.bodyComp);
        updateBodyCompSummary(data.bodyComp);
    }
    if (data.rhr) {
        createRHRCharts(data.rhr);
        updateRHRSummary(data.rhr);
    }
    if (data.heartRate) {
        createHeartRateCharts(data.heartRate);
        updateHeartRateSummary(data.heartRate);
    }
}

// Override the original initializeCharts to work with tabbed data
function initializeCharts() {
    console.log('initializeCharts called for unified report');
    console.log('chartData:', chartData);
    
    // Initialize with daily data by default
    initializeChartsForTab('daily');
}

// Chart creation functions (same as original)
function createSleepCharts(data) {
    // Sleep windows chart - shows actual sleep periods
    const sleepWindowsCtx = document.getElementById('sleep-windows-chart');
    if (sleepWindowsCtx && data.daily) {
        // Process sleep data to create proper sleep window visualization
        // Reverse data to show most recent on the right
        const sleepWindows = data.daily.slice().reverse().map((d, index) => {
            if (!d.sleepTime || !d.wakeTime) {
                return { 
                    y: index, 
                    x: 12 * 60, // Default to midday if no data
                    width: 0, 
                    color: '#666',
                    sleepTime: d.sleepTime,
                    wakeTime: d.wakeTime
                };
            }
            
            // Convert time strings to minutes from midnight
            let sleepMinutes = timeToMinutes(d.sleepTime);
            let wakeMinutes = timeToMinutes(d.wakeTime);
            
            // Convert to minutes relative to midday-at-boundaries layout
            // Left boundary (12:00 PM) = -720, Center (12:00 AM) = 0, Right boundary (12:00 PM) = +720
            // Previous day 12:00 PM to 11:59 PM: -720 to 0
            // Next day 12:00 AM to 11:59 AM: 0 to +720
            
            let sleepRelativeToMidday, wakeRelativeToMidday;
            
            if (sleepMinutes >= 12 * 60) {
                // Sleep time is 12:00 PM or later (previous day)
                sleepRelativeToMidday = sleepMinutes - (12 * 60) - (12 * 60); // Convert to -720 to 0 range
            } else {
                // Sleep time is before 12:00 PM (next day)
                sleepRelativeToMidday = sleepMinutes; // Convert to 0 to +720 range
            }
            
            if (wakeMinutes >= 12 * 60) {
                // Wake time is 12:00 PM or later (previous day)
                wakeRelativeToMidday = wakeMinutes - (12 * 60) - (12 * 60); // Convert to -720 to 0 range
            } else {
                // Wake time is before 12:00 PM (next day)
                wakeRelativeToMidday = wakeMinutes; // Convert to 0 to +720 range
            }
            
            // Handle sleep periods that cross midnight (sleep in previous day, wake in next day)
            if (sleepMinutes >= 12 * 60 && wakeMinutes < 12 * 60) {
                // Sleep time is in previous day, wake time is in next day
                // This is normal overnight sleep
                // sleepRelativeToMidday is already correct (negative)
                // wakeRelativeToMidday is already correct (positive)
            }
            
            // Calculate duration
            const duration = wakeRelativeToMidday - sleepRelativeToMidday;
            
            return {
                y: index, // Vertical position (day index)
                x: sleepRelativeToMidday, // Start position relative to midday
                width: duration, // Duration in minutes
                color: d.consistencyColor,
                sleepTime: d.sleepTime,
                wakeTime: d.wakeTime
            };
        });
        
        // Create horizontal bar chart with proper time axis
        new Chart(sleepWindowsCtx, {
            type: 'bar',
            data: {
                labels: sleepWindows.map((w, i) => data.daily.slice().reverse()[i].label),
                datasets: [{
                    label: 'Sleep Periods',
                    data: sleepWindows.map(w => ({
                        x: [w.x, w.x + w.width], // [start, end] times
                        y: sleepWindows.indexOf(w) // Day index
                    })),
                    backgroundColor: sleepWindows.map(w => w.color),
                    borderColor: sleepWindows.map(w => w.color),
                    borderWidth: 2,
                    barThickness: 25
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y', // This makes bars horizontal
                plugins: {
                    legend: { display: false },
                    datalabels: { display: false },
                    tooltip: {
                        callbacks: {
                            title: function(context) {
                                return context[0].label;
                            },
                            label: function(context) {
                                const window = sleepWindows[context.dataIndex];
                                const duration = Math.round(window.width / 60 * 10) / 10;
                                return [
                                    `Sleep: ${window.sleepTime}`,
                                    `Wake: ${window.wakeTime}`,
                                    `Duration: ${duration}h`
                                ];
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Time of Day (Midday to Midday)'
                        },
                        min: -12 * 60, // 12 hours before midday (12:00 previous day)
                        max: 12 * 60,  // 12 hours after midday (12:00 next day)
                        type: 'linear',
                        ticks: {
                            // Force specific tick positions for midday-to-midday display
                            // Show: 12:00, 15:00, 18:00, 21:00, 00:00, 03:00, 06:00, 09:00, 12:00
                            stepSize: 180, // Every 3 hours
                            callback: function(value) {
                                // For midday-to-midday display with midnight at center:
                                // We want: 12:00 (left) ‚Üí 15:00 ‚Üí 18:00 ‚Üí 21:00 ‚Üí 00:00 (center) ‚Üí 03:00 ‚Üí 06:00 ‚Üí 09:00 ‚Üí 12:00 (right)
                                // Chart range: -720 to +720 minutes
                                // -720 = 12:00, -540 = 15:00, -360 = 18:00, -180 = 21:00, 0 = 00:00, +180 = 03:00, +360 = 06:00, +540 = 09:00, +720 = 12:00
                                
                                // Convert chart position to actual time
                                // -720 to 0: previous day 12:00 to midnight
                                // 0 to +720: midnight to next day 12:00
                                let actualMinutes;
                                if (value <= 0) {
                                    // Previous day: 12:00 PM to 11:59 PM
                                    actualMinutes = value + (12 * 60) + (12 * 60); // Add 12 hours to get to 12:00 PM
                                } else {
                                    // Next day: 12:00 AM to 11:59 AM  
                                    actualMinutes = value;
                                }
                                
                                let hours = Math.floor(actualMinutes / 60);
                                const minutes = actualMinutes % 60;
                                
                                // Handle 24-hour rollover
                                if (hours >= 24) hours -= 24;
                                if (hours < 0) hours += 24;
                                
                                return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
                            }
                        }
                    },
                    y: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Date'
                        },
                        type: 'category'
                    }
                }
            }
        });
    }

    // Sleep duration chart
    const sleepDurationCtx = document.getElementById('sleep-duration-chart');
    if (sleepDurationCtx && data.daily) {
        // Reverse data to show most recent on the right
        const reversedDaily = data.daily.slice().reverse();
        
        new Chart(sleepDurationCtx, {
            type: 'bar',
            data: {
                labels: reversedDaily.map(d => d.label),
                datasets: [{
                    label: 'Sleep Duration (hours)',
                    data: reversedDaily.map(d => d.sleepDuration),
                    backgroundColor: '#4CAF50',
                    borderColor: '#4CAF50',
                    borderWidth: 1,
                    borderRadius: 4,
                    borderSkipped: false
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    datalabels: { display: false }
                },
                scales: {
                    x: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Date'
                        },
                        offset: true,
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Hours'
                        },
                        beginAtZero: true,
                        grid: {
                            display: true
                        }
                    }
                }
            }
        });
    }
}

function createVO2Charts(data) {
    const vo2Ctx = document.getElementById('vo2-max-chart');
    if (vo2Ctx && data.daily) {
        // Reverse data to show most recent on the right
        const reversedDaily = data.daily.slice().reverse();
        
        new Chart(vo2Ctx, {
            type: 'line',
            data: {
                labels: reversedDaily.map(d => d.date),
                datasets: [{
                    label: 'VO2 Max',
                    data: reversedDaily.map(d => d.vo2),
                    borderColor: '#FF9800',
                    backgroundColor: 'rgba(255, 152, 0, 0.1)',
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    datalabels: { display: false }
                }
            }
        });
    }
}

function createStepsCharts(data) {
    const stepsCtx = document.getElementById('steps-chart');
    if (stepsCtx && data.daily) {
        // Reverse data to show most recent on the right
        const reversedDaily = data.daily.slice().reverse();
        
        new Chart(stepsCtx, {
            type: 'bar',
            data: {
                labels: reversedDaily.map(d => d.label),
                datasets: [{
                    label: 'Daily Steps',
                    data: reversedDaily.map(d => d.dailySteps),
                    backgroundColor: reversedDaily.map(d => d.hrColor),
                    borderColor: reversedDaily.map(d => d.hrColor),
                    borderWidth: 1,
                    borderRadius: 4,
                    borderSkipped: false
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                animation: false,
                plugins: {
                    legend: { display: false },
                    datalabels: { display: false },
                    tooltip: {
                        callbacks: {
                            title: function(context) {
                                return context[0].label;
                            },
                            label: function(context) {
                                const value = context.parsed.y;
                                return [
                                    `Steps: ${value.toLocaleString()}`,
                                    `Rolling Avg: ${data.daily[context.dataIndex].rollingAvgSteps.toLocaleString()}`
                                ];
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Date'
                        },
                        offset: true,
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Steps'
                        },
                        beginAtZero: true,
                        grid: {
                            display: true
                        },
                        ticks: {
                            callback: function(value) {
                                return value.toLocaleString();
                            }
                        }
                    }
                }
            }
        });
    }
}

function createStrengthCharts(data) {
    const strengthCtx = document.getElementById('strength-chart');
    if (strengthCtx && data.daily) {
        // Reverse data to show most recent on the right
        const reversedDaily = data.daily.slice().reverse();
        
        new Chart(strengthCtx, {
            type: 'bar',
            data: {
                labels: reversedDaily.map(d => d.label),
                datasets: [{
                    label: 'Strength Training (minutes)',
                    data: reversedDaily.map(d => d.dailyDuration),
                    backgroundColor: reversedDaily.map(d => d.hrColor),
                    borderColor: reversedDaily.map(d => d.hrColor),
                    borderWidth: 1,
                    borderRadius: 4,
                    borderSkipped: false
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                animation: false,
                layout: {
                    padding: {
                        left: 10,
                        right: 10,
                        top: 10,
                        bottom: 10
                    }
                },
                plugins: {
                    legend: { display: false },
                    datalabels: { display: false },
                    tooltip: {
                        callbacks: {
                            title: function(context) {
                                return context[0].label;
                            },
                            label: function(context) {
                                const value = context.parsed.y;
                                const weeklySum = data.daily[context.dataIndex].weeklySum;
                                return [
                                    `Duration: ${Math.round(value * 10) / 10} min`,
                                    `Weekly Total: ${Math.round(weeklySum * 10) / 10} min`
                                ];
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Date'
                        },
                        offset: true,
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Minutes'
                        },
                        beginAtZero: true,
                        grid: {
                            display: true
                        },
                        ticks: {
                            callback: function(value) {
                                return Math.round(value);
                            }
                        }
                    }
                }
            }
        });
    }
}

function createBodyCompCharts(data) {
    const bodyCompCtx = document.getElementById('bodyComp-chart');
    if (bodyCompCtx && data.daily) {
        // Reverse data to show most recent on the right
        const reversedDaily = data.daily.slice().reverse();
        
        new Chart(bodyCompCtx, {
            type: 'line',
            data: {
                labels: reversedDaily.map(d => d.label),
                datasets: [
                    {
                        label: 'Weight (kg)',
                        data: reversedDaily.map(d => d.weight),
                        borderColor: '#FF5722',
                        backgroundColor: 'rgba(255, 87, 34, 0.1)',
                        yAxisID: 'y'
                    },
                    {
                        label: 'Body Fat %',
                        data: reversedDaily.map(d => d.bodyFat),
                        borderColor: '#9C27B0',
                        backgroundColor: 'rgba(156, 39, 176, 0.1)',
                        yAxisID: 'y1'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: true },
                    datalabels: { display: false }
                },
                scales: {
                    x: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Date'
                        },
                        offset: true,
                        grid: {
                            display: false
                        }
                    },
                    y: { 
                        type: 'linear', 
                        display: true, 
                        position: 'left',
                        title: {
                            display: true,
                            text: 'Weight (kg)'
                        }
                    },
                    y1: { 
                        type: 'linear', 
                        display: true, 
                        position: 'right',
                        title: {
                            display: true,
                            text: 'Body Fat (%)'
                        }
                    }
                }
            }
        });
    }
}

function createRHRCharts(data) {
    const rhrCtx = document.getElementById('rhr-chart');
    if (rhrCtx && data.daily) {
        // Reverse data to show most recent on the right
        const reversedDaily = data.daily.slice().reverse();
        
        new Chart(rhrCtx, {
            type: 'line',
            data: {
                labels: reversedDaily.map(d => d.label),
                datasets: [{
                    label: 'Resting Heart Rate (BPM)',
                    data: reversedDaily.map(d => d.rhr),
                    borderColor: '#E91E63',
                    backgroundColor: 'rgba(233, 30, 99, 0.1)',
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    datalabels: { display: false }
                }
            }
        });
    }
}

function createHeartRateCharts(data) {
    const activityCtx = document.getElementById('heart-rate-activity-chart');
    if (activityCtx && data.daily) {
        // Reverse data to show most recent on the right
        const reversedDaily = data.daily.slice().reverse();
        
        new Chart(activityCtx, {
            type: 'bar',
            data: {
                labels: reversedDaily.map(d => d.label),
                datasets: [
                    {
                        label: 'MPA Time (min)',
                        data: reversedDaily.map(d => d.mpaTime),
                        backgroundColor: '#4CAF50',
                        stack: 'activity'
                    },
                    {
                        label: 'VPA Time (min)',
                        data: reversedDaily.map(d => d.vpaTime),
                        backgroundColor: '#FF9800',
                        stack: 'activity'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: true },
                    datalabels: { display: false }
                },
                scales: {
                    x: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Date'
                        },
                        offset: true,
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Minutes'
                        },
                        beginAtZero: true,
                        stacked: true,
                        grid: {
                            display: true
                        }
                    }
                }
            }
        });
    }

    const hrCtx = document.getElementById('heart-rate-hr-chart');
    if (hrCtx && data.daily) {
        // Use the same reversed data for consistency
        const reversedDaily = data.daily.slice().reverse();
        
        new Chart(hrCtx, {
            type: 'line',
            data: {
                labels: reversedDaily.map(d => d.label),
                datasets: [{
                    label: 'Hazard Ratio',
                    data: reversedDaily.map(d => d.hazardRatio),
                    borderColor: '#F44336',
                    backgroundColor: 'rgba(244, 67, 54, 0.1)',
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    datalabels: { display: false }
                }
            }
        });
    }
}


        // Event listeners for summary item clicks
        document.addEventListener('DOMContentLoaded', function() {
            initializeCharts();

            // Add click listeners to summary items
            document.querySelectorAll('.summary-item').forEach(item => {
                item.addEventListener('click', function() {
                    const detailsId = this.id.replace('-summary', '-details');
                    const details = document.getElementById(detailsId);
                    if (details) {
                        details.classList.toggle('visible');
                    }
                });
            });

            // Tab switching functionality
            const navButtons = document.querySelectorAll('.nav-button');
            navButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Get the tab name from button ID
                    const tabName = this.id.replace('-nav', '');
                    
                    // Call the switchTab function if it exists (defined in unified template)
                    if (typeof switchTab === 'function') {
                        switchTab(tabName);
                    } else {
                        // Fallback for non-unified templates
                        navButtons.forEach(btn => btn.style.backgroundColor = '#333');
                        this.style.backgroundColor = '#007bff';
                        
                        // Navigate to the appropriate report type
                        const currentDate = document.getElementById('current-date').textContent || new Date().toISOString().split('T')[0];
                        
                        // Construct URL based on report type and current date
                        let baseUrl = window.location.origin + window.location.pathname;
                        // Remove current report type from path if present
                        baseUrl = baseUrl.replace(/\/report_(daily|weekly|monthly)\//, '/');
                        
                        const newUrl = `${baseUrl}report_${tabName}/${currentDate}/`;
                        window.location.href = newUrl;
                    }
                });
            });

            // Date navigation functionality
            const prevButton = document.getElementById('prev-day');
            const nextButton = document.getElementById('next-day');
            const currentDateSpan = document.getElementById('current-date');
            
            // Initialize current date display
            if (currentDateSpan && !currentDateSpan.textContent) {
                const today = new Date();
                currentDateSpan.textContent = today.toISOString().split('T')[0];
            }
            
            if (prevButton) {
                prevButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    navigateDate(-1);
                });
            }
            
            if (nextButton) {
                nextButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    navigateDate(1);
                });
            }
            
            function navigateDate(direction) {
                const currentDateStr = currentDateSpan.textContent;
                if (!currentDateStr) return;
                
                const currentDate = new Date(currentDateStr);
                const newDate = new Date(currentDate);
                newDate.setDate(currentDate.getDate() + direction);
                
                const newDateStr = newDate.toISOString().split('T')[0];
                currentDateSpan.textContent = newDateStr;
                
                // Update URL to reflect new date
                const currentPath = window.location.pathname;
                const pathParts = currentPath.split('/');
                
                // Find and replace the date part
                for (let i = 0; i < pathParts.length; i++) {
                    if (pathParts[i].match(/^\d{4}-\d{2}-\d{2}$/)) {
                        pathParts[i] = newDateStr;
                        break;
                    }
                }
                
                const newUrl = pathParts.join('/');
                window.location.href = newUrl;
            }
        });
    </script>
</body>
</html>